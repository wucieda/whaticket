{"version":3,"sources":["assets/sound.mp3","assets/wa-background.png","translate/languages/index.js","translate/languages/pt.js","translate/languages/en.js","translate/languages/es.js","translate/i18n.js","errors/toastError.js","services/api.js","hooks/useWhatsApps/index.js","context/WhatsApp/WhatsAppsContext.js","hooks/useAuth.js/index.js","context/Auth/AuthContext.js","rules.js","components/Can/index.js","layout/MainListItems.js","components/ButtonWithSpinner/index.js","components/MarkdownWrapper/index.js","components/TicketListItem/index.js","hooks/useTickets/index.js","components/NotificationsPopOver/index.js","components/QueueSelect/index.js","components/UserModal/index.js","components/BackdropLoading/index.js","layout/index.js","pages/Dashboard/Title.js","pages/Dashboard/Chart.js","pages/Dashboard/index.js","components/ContactModal/index.js","components/NewTicketModal/index.js","components/TicketsListSkeleton/index.js","components/TicketsList/index.js","components/TabPanel/index.js","components/TicketsQueueSelect/index.js","components/TicketsManager/index.js","components/ContactDrawerSkeleton/index.js","components/ContactDrawer/index.js","components/MessageInput/RecordingTimer.js","context/ReplyingMessage/ReplyingMessageContext.js","components/MessageInput/index.js","hooks/useLocalStorage/index.js","components/TicketHeaderSkeleton/index.js","components/TicketHeader/index.js","components/TicketInfo/index.js","components/ConfirmationModal/index.js","hooks/useQueues/index.js","components/TransferTicketModal/index.js","components/TicketOptionsMenu/index.js","components/TicketActionButtons/index.js","components/VcardPreview/index.js","components/LocationPreview/index.js","components/ModalImageCors/index.js","components/MessageOptionsMenu/index.js","components/MessagesList/index.js","components/Ticket/index.js","pages/Tickets/index.js","pages/Signup/index.js","pages/Login/index.js","components/MainContainer/index.js","components/MainHeader/index.js","components/MainHeaderButtonsWrapper/index.js","components/Title/index.js","components/TableRowSkeleton/index.js","components/WhatsAppModal/index.js","components/QrcodeModal/index.js","pages/Connections/index.js","pages/Settings/index.js","pages/Users/index.js","pages/Contacts/index.js","components/QuickAnswersModal/index.js","pages/QuickAnswers/index.js","components/ColorPicker/index.js","components/QueueModal/index.js","pages/Queues/index.js","components/CampaignModal/index.js","pages/Campaigns/index.js","routes/Route.js","routes/index.js","App.js","index.js"],"names":["module","exports","messages","pt","translations","signup","title","toasts","success","fail","form","name","email","password","buttons","submit","login","register","auth","dashboard","charts","perDay","inAttendance","waiting","closed","connections","deleted","confirmationModal","deleteTitle","deleteMessage","disconnectTitle","disconnectMessage","add","disconnect","tryAgain","qrcode","newQr","connecting","toolTips","disconnected","content","connected","timeout","table","status","lastUpdate","default","actions","session","whatsappModal","edit","farewellMessage","okAdd","okEdit","cancel","qrCode","message","contacts","searchPlaceholder","importTitlte","importMessage","import","whatsapp","contactModal","mainInfo","extraInfo","number","extraName","extraValue","addExtraInfo","quickAnswersModal","shortcut","queueModal","color","greetingMessage","userModal","profile","chat","noTicketMessage","ticketsManager","newTicket","ticketsQueueSelect","placeholder","tickets","notification","tabs","open","search","showAll","transferTicketModal","fieldLabel","fieldQueueLabel","fieldQueuePlaceholder","noOptions","ok","ticketsList","pendingHeader","assignedHeader","noTicketsTitle","noTicketsMessage","accept","newTicketModal","mainDrawer","listItems","quickAnswers","queues","administration","users","settings","appBar","user","logout","notifications","noTickets","greeting","queueSelect","inputLabel","userCreation","options","enabled","disabled","messagesList","header","assignedTo","return","resolve","reopen","messagesInput","placeholderOpen","placeholderClosed","signMessage","contactDrawer","ticketOptionsMenu","delete","transfer","confirm","messageOptionsMenu","reply","backendErrors","ERR_NO_OTHER_WHATSAPP","ERR_NO_DEF_WAPP_FOUND","ERR_WAPP_NOT_INITIALIZED","ERR_WAPP_CHECK_CONTACT","ERR_WAPP_INVALID_CONTACT","ERR_WAPP_DOWNLOAD_MEDIA","ERR_INVALID_CREDENTIALS","ERR_SENDING_WAPP_MSG","ERR_DELETE_WAPP_MSG","ERR_OTHER_OPEN_TICKET","ERR_SESSION_EXPIRED","ERR_USER_CREATION_DISABLED","ERR_NO_PERMISSION","ERR_DUPLICATED_CONTACT","ERR_NO_SETTING_FOUND","ERR_NO_CONTACT_FOUND","ERR_NO_TICKET_FOUND","ERR_NO_USER_FOUND","ERR_NO_WAPP_FOUND","ERR_CREATING_MESSAGE","ERR_CREATING_TICKET","ERR_FETCH_WAPP_MSG","ERR_QUEUE_COLOR_ALREADY_EXISTS","ERR_WAPP_GREETING_REQUIRED","en","campaignModal","conextion","attachment","variables","csvfile","sample","campaings","reports","campaigns","createdAt","progress","titleFrom","es","i18n","use","LanguageDetector","init","debug","defaultNS","fallbackLng","ns","resources","toastError","err","errorMsg","response","data","error","exists","toast","t","toastId","api","axios","create","baseURL","process","withCredentials","reducer","state","action","type","whatsApps","payload","whatsApp","whatsAppIndex","findIndex","s","id","updatedAt","retries","whatsAppId","splice","useWhatsApps","useReducer","dispatch","useState","loading","setLoading","useEffect","a","get","fetchSession","socket","openSocket","on","whatsappId","WhatsAppsContext","createContext","WhatsAppsProvider","children","Provider","value","useAuth","history","useHistory","isAuth","setIsAuth","setUser","interceptors","request","config","token","localStorage","getItem","headers","JSON","parse","Promise","reject","originalRequest","_retry","post","setItem","stringify","defaults","Authorization","removeItem","undefined","handleLogin","userData","push","handleLogout","AuthContext","AuthProvider","rules","static","admin","Can","role","perform","yes","no","permissions","staticPermissions","includes","dynamicPermissions","dynamic","permissionCondition","check","ListItemLink","props","icon","primary","to","className","renderLink","React","useMemo","forwardRef","itemProps","ref","ListItem","button","component","ListItemIcon","ListItemText","defaultProps","MainListItems","drawerClose","useContext","connectionWarning","setConnectionWarning","delayDebounceFn","setTimeout","length","filter","whats","clearTimeout","onClick","Badge","badgeContent","Divider","ListSubheader","inset","useStyles","makeStyles","theme","position","buttonProgress","green","top","left","marginTop","marginLeft","ButtonWithSpinner","rest","classes","Button","CircularProgress","size","elements","allowedElements","CustomLink","target","rel","MarkdownWrapper","boldRegex","tildaRegex","test","replace","markdownOptions","disableParsingRawHTML","forceInline","overrides","forEach","element","el","ticket","pendingTicket","cursor","noTicketsDiv","display","height","margin","flexDirection","alignItems","justifyContent","noTicketsText","textAlign","fontSize","lineHeight","fontWeight","contactNameWrapper","lastMessageTime","justifySelf","closedBadge","alignSelf","marginRight","contactLastMessage","paddingRight","newMessagesCount","badgeStyle","backgroundColor","acceptButton","ticketQueueColor","flex","width","TicketListItem","ticketId","useParams","isMounted","useRef","current","handleAcepptTicket","put","userId","Fragment","key","dense","e","selected","clsx","Tooltip","arrow","placement","queue","style","ListItemAvatar","Avatar","src","contact","profilePicUrl","disableTypography","Typography","noWrap","variant","lastMessage","isSameDay","parseISO","Date","format","secondary","unreadMessages","badge","useTickets","searchParam","pageNumber","date","queueIds","withUnreadMessages","hasMore","setHasMore","setTickets","count","setCount","fetchTickets","params","horasFecharAutomaticamente","REACT_APP_HOURS_CLOSE_TICKETS_AUTO","Number","dataLimite","setHours","getHours","closeTicket","tabContainer","overflowY","maxHeight","scrollbarStyles","popoverPaper","maxWidth","spacing","breakpoints","down","noShadow","boxShadow","NotificationsPopOver","ticketIdUrl","location","pathname","split","ticketIdRef","anchorEl","isOpen","setIsOpen","setNotifications","setDesktopNotifications","useSound","alertSound","play","soundAlertRef","historyRef","window","Notification","requestPermission","console","log","emit","prevState","ticketIndex","notfiticationIndex","n","tag","String","close","read","document","visibilityState","isGroup","handleNotifications","body","renotify","onclick","preventDefault","focus","handleClickAway","NotificationTicket","IconButton","aria-label","Popover","disableScrollLock","anchorOrigin","vertical","horizontal","transformOrigin","paper","onClose","List","map","chips","flexWrap","chip","QueueSelect","selectedQueueIds","onChange","setQueues","FormControl","fullWidth","InputLabel","Select","multiple","labelWidth","MenuProps","getContentAnchorEl","renderValue","find","q","Chip","label","MenuItem","root","multFieldLine","btnWrapper","formControl","minWidth","UserSchema","Yup","shape","min","max","required","UserModal","initialState","loggedInUser","setSelectedQueueIds","showPassword","setShowPassword","userQueueIds","fetchUser","handleClose","handleSaveUser","values","Dialog","scroll","DialogTitle","initialValues","enableReinitialize","validationSchema","onSubmit","setSubmitting","touched","errors","isSubmitting","DialogContent","dividers","as","TextField","autoFocus","Boolean","helperText","InputProps","endAdornment","InputAdornment","VisibilityOff","Visibility","labelId","DialogActions","backdrop","zIndex","drawer","BackdropLoading","Backdrop","toolbar","toolbarIcon","padding","minHeight","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","menuButtonHidden","flexGrow","drawerPaper","whiteSpace","drawerPaperClose","overflowX","up","appBarSpacer","overflow","container","paddingTop","paddingBottom","LoggedInLayout","userModalOpen","setUserModalOpen","setAnchorEl","menuOpen","setMenuOpen","drawerOpen","setDrawerOpen","drawerVariant","setDrawerVariant","offsetWidth","handleCloseMenu","Drawer","AppBar","Toolbar","edge","aria-controls","aria-haspopup","event","currentTarget","Menu","Title","gutterBottom","Chart","useTheme","toISOString","time","amount","chartData","setChartData","aux","startOfHour","ResponsiveContainer","BarChart","barSize","right","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","stroke","palette","text","YAxis","allowDecimals","Label","angle","textAnchor","fill","Bar","main","fixedHeightPaper","customFixedHeightPaper","customFixedHeightPaperLg","Dashboard","GetTickets","Container","Grid","item","xs","Paper","paragraph","textField","extraAttr","ContactSchema","ContactModal","contactId","onSave","setContact","fetchContact","handleSaveContact","marginBottom","remove","info","index","createFilterOptions","trim","NewTicketModal","modalOpen","setOptions","setSearchParam","selectedContact","setSelectedContact","newContact","setNewContact","contactModalOpen","setContactModalOpen","fetchContacts","handleSaveTicket","Autocomplete","clearOnBlur","autoHighlight","freeSolo","clearOnEscape","getOptionLabel","option","renderOption","filterOptions","filtered","inputValue","newValue","handleSelectOption","renderInput","onKeyPress","TicketsSkeleton","Skeleton","animation","ticketsListWrapper","borderTopRightRadius","borderBottomRightRadius","borderTop","ticketsListHeader","borderBottom","ticketsCount","unshift","TicketsList","updateCount","setPageNumber","shouldUpdateTicket","queueId","indexOf","square","elevation","onScroll","scrollTop","scrollHeight","clientHeight","TicketsListSkeleton","TabPanel","aria-labelledby","TicketsQueueSelect","userQueues","displayEmpty","Checkbox","checked","ticketsWrapper","tabsHeader","settingsIcon","tab","ticketOptionsBox","background","serachInputWrapper","borderRadius","searchIcon","searchInput","border","show","hide","TicketsManager","searchTimeout","setTab","tabOpen","setTabOpen","newTicketModalOpen","setNewTicketModalOpen","showAllTickets","setShowAllTickets","searchInputRef","openCount","setOpenCount","pendingCount","setPendingCount","toUpperCase","applyPanelStyle","Tabs","indicatorColor","textColor","Tab","InputBase","inputRef","searchedTerm","toLowerCase","FormControlLabel","labelPlacement","control","Switch","val","ContactDrawerSkeleton","contactHeader","contactAvatar","contactDetails","contactExtraInfo","flexShrink","borderRight","ContactDrawer","handleDrawerClose","setModalOpen","anchor","PaperProps","BackdropProps","ModalProps","getElementById","alt","Link","href","timerBox","RecordingTimer","minutes","seconds","timer","setTimer","interval","setInterval","clearInterval","addZero","ReplyMessageContext","ReplyMessageProvider","replyingMessage","setReplyingMessage","Mp3Recorder","MicRecorder","bitRate","mainWrapper","newMessageBox","messageInputWrapper","messageInput","paddingLeft","sendMessageIcons","uploadInput","viewMediaInputWrapper","emojiBox","circleLoading","opacity","audioLoading","recorderWrapper","alignContent","cancelAudioIcon","sendAudioIcon","replyginMsgWrapper","replyginMsgContainer","replyginMsgBody","replyginContactMsgSideColor","replyginSelfMsgSideColor","messageContactName","messageQuickAnswersWrapper","listStyle","textOverflow","MessageInput","ticketStatus","medias","setMedias","inputMessage","setInputMessage","showEmoji","setShowEmoji","recording","setRecording","setQuickAnswer","typeBar","setTypeBar","initialValue","storedValue","setStoredValue","valueToStore","Function","useLocalStorage","setSignMessage","handleChangeMedias","files","selectedMedias","Array","from","handleUploadMedia","formData","FormData","append","media","handleSendMessage","fromMe","mediaUrl","quotedMsg","handleStartRecording","navigator","mediaDevices","getUserMedia","audio","start","handleLoadQuickAnswer","substring","handleUploadAudio","stop","getMp3","blob","filename","getTime","handleCancelAudio","handleMenuItemClick","renderReplyingMessage","Hidden","only","ClickAwayListener","onClickAway","perLine","showPreview","showSkinTones","onSelect","emoji","native","htmlFor","keepMounted","input","multiline","maxRows","onPaste","clipboardData","handleInputPaste","shiftKey","messageQuickAnswersWrapperItem","handleQuickAnswersClick","ticketHeader","TicketHeaderSkeleton","Card","CardHeader","titleTypographyProps","subheaderTypographyProps","avatar","subheader","TicketHeader","TicketInfo","ConfirmationModal","onConfirm","useQueues","findAll","TransferTicketModal","ticketid","allQueues","setAllQueues","selectedUser","setSelectedUser","selectedQueue","setSelectedQueue","findAllQueues","list","loadQueues","fetchUsers","isArray","noOptionsText","TicketOptionsMenu","confirmationOpen","setConfirmationOpen","transferTicketModalOpen","setTransferTicketModalOpen","handleDeleteTicket","handleOpenConfirmationModal","actionButtons","TicketActionButtons","ticketOptionsMenuOpen","handleUpdateTicketStatus","startIcon","Replay","VcardPreview","numbers","contactObj","handleNewChat","LocationPreview","image","link","description","handleLocation","float","dangerouslySetInnerHTML","__html","clear","messageMedia","objectFit","borderTopLeftRadius","borderBottomLeftRadius","ModalImageCors","imageUrl","fetching","setFetching","blobUrl","setBlobUrl","responseType","url","URL","createObjectURL","Blob","fetchImage","smallSrcSet","medium","large","MessageOptionsMenu","handleDeleteMessage","messagesListWrapper","backgroundImage","whatsBackground","messageLeft","quotedContainerLeft","quotedSideColorLeft","messageRight","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","textContentItem","overflowWrap","textContentItemDeleted","fontStyle","timestamp","dailyTimestamp","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","newMessages","messageIndex","m","newMessage","messageToUpdate","MessagesList","lastMessageRef","selectedMessage","setSelectedMessage","messageOptionsMenuOpen","currentTicketId","scrollToBottom","fetchMessages","scrollIntoView","handleOpenMessageOptionsMenu","checkMessageMedia","mediaType","locationParts","imageLocation","linkLocation","descriptionLocation","array","obj","ind","controls","GetApp","renderDailyTimestamps","messageDay","previousMessageDay","renderMessageDivider","renderQuotedMessage","prevPageNumber","isDeleted","ExpandMore","Block","ack","AccessTime","Done","DoneAll","renderMessageAck","ticketInfo","flexBasis","ticketActionButtons","borderLeft","mainWrapperShift","easeOut","Ticket","setTicket","fetchTicket","chatContainer","chatPapper","contactsWrapper","contactsWrapperSmall","messagessWrapper","welcomeMsg","ticketsManagerClosed","Chat","md","SignUp","handleSignUp","CssBaseline","LockOutlined","autoComplete","justify","RouterLink","Box","mt","Login","handleChangeInput","noValidate","mainContainer","contentWrapper","MainContainer","contactsHeader","MainHeader","MainHeaderButtonsWrapper","customTableCell","TableRowSkeleton","columns","TableRow","TableCell","_","align","SessionSchema","memo","isDefault","setWhatsApp","whatsQueueIds","handleSaveWhatsApp","whatsappData","rows","selectedIds","setQrCode","mainPaper","tooltip","typography","pxToRem","tooltipPopper","CustomToolTip","popper","Connections","whatsAppModalOpen","setWhatsAppModalOpen","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","confirmationModalInitialState","confirmModalInfo","setConfirmModalInfo","handleStartWhatsAppSession","handleRequestNewQrCode","handleCloseWhatsAppModal","useCallback","handleCloseQrModal","handleSubmitConfirmationModal","renderActionButtons","handleOpenQrModal","Table","TableHead","TableBody","SignalCellularConnectedNoInternet0Bar","CropFree","SignalCellular4Bar","SignalCellularConnectedNoInternet2Bar","renderStatusToolTips","CheckCircle","handleEditWhatsApp","Edit","settingOption","Settings","setSettings","settingIndex","setting","handleChangeSetting","selectedValue","settingKey","getSettingValue","readonly","newUsers","userIndex","u","Users","deletingUser","setDeletingUser","handleDeleteUser","startAdornment","handleEditUser","newContacts","contactIndex","c","Contacts","selectedContactId","setSelectedContactId","deletingContact","setDeletingContact","confirmOpen","setConfirmOpen","handleDeleteContact","handleimportContact","go","textQuickAnswerContainer","QuickAnswerSchema","QuickAnswersModal","quickAnswerId","quickAnswer","fetchQuickAnswer","handleSaveQuickAnswer","newQuickAnswers","quickAnswerIndex","QuickAnswers","selectedQuickAnswers","setSelectedQuickAnswers","quickAnswersModalOpen","setQuickAnswersModalOpen","deletingQuickAnswers","setDeletingQuickAnswers","fetchQuickAnswers","handleDeleteQuickAnswers","handleEditQuickAnswers","ColorPicker","currentColor","selectedColor","setSelectedColor","paperFullWidth","triangle","colors","hex","onChangeComplete","colorAdorment","QueueSchema","QueueModal","colorPickerModalOpen","setColorPickerModalOpen","setQueue","greetingRef","handleSaveQueue","onFocus","Colorize","newQueues","queueIndex","Queues","queueModalOpen","setQueueModalOpen","handleDeleteQueue","handleEditQueue","CampaignModalOpen","setCampaignModalOpen","CampaignModal","Route","Component","isPrivate","Routes","exact","path","Signup","Tickets","Campaigns","autoClose","App","locale","setLocale","createTheme","light","contrastText","i18nlocale","ptBR","ThemeProvider","ReactDOM","render"],"mappings":"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","file":"static/js/main.41855dce.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sound.9fd5812c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/wa-background.adbccee0.png\";","import { messages as portugueseMessages } from \"./pt\";\nimport { messages as englishMessages } from \"./en\";\nimport { messages as spanishMessages } from \"./es\";\n\nconst messages = {\n\t...portugueseMessages,\n\t...englishMessages,\n\t...spanishMessages,\n};\n\nexport { messages };\n","const messages = {\n  pt: {\n    translations: {\n      signup: {\n        title: \"Cadastre-se\",\n        toasts: {\n          success: \"Usurio criado com sucesso! Faa seu login!!!.\",\n          fail: \"Erro ao criar usurio. Verifique os dados informados.\",\n        },\n        form: {\n          name: \"Nome\",\n          email: \"Email\",\n          password: \"Senha\",\n        },\n        buttons: {\n          submit: \"Cadastrar\",\n          login: \"J tem uma conta? Entre!\",\n        },\n      },\n      login: {\n        title: \"Login\",\n        form: {\n          email: \"Email\",\n          password: \"Senha\",\n        },\n        buttons: {\n          submit: \"Entrar\",\n          register: \"No tem um conta? Cadastre-se!\",\n        },\n      },\n      auth: {\n        toasts: {\n          success: \"Login efetuado com sucesso!\",\n        },\n      },\n      dashboard: {\n        charts: {\n          perDay: {\n            title: \"Tickets hoje: \",\n          },\n        },\n        messages: {\n          inAttendance: {\n            title: \"Em Atendimento\"\n          },\n          waiting: {\n            title: \"Aguardando\"\n          },\n          closed: {\n            title: \"Finalizado\"\n          }\n        }\n      },\n      connections: {\n        title: \"Conexes\",\n        toasts: {\n          deleted: \"Conexo com o WhatsApp excluda com sucesso!\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Deletar\",\n          deleteMessage: \"Voc tem certeza? Essa ao no pode ser revertida.\",\n          disconnectTitle: \"Desconectar\",\n          disconnectMessage:\n            \"Tem certeza? Voc precisar ler o QR Code novamente.\",\n        },\n        buttons: {\n          add: \"Adicionar WhatsApp\",\n          disconnect: \"desconectar\",\n          tryAgain: \"Tentar novamente\",\n          qrcode: \"QR CODE\",\n          newQr: \"Novo QR CODE\",\n          connecting: \"Conectando\",\n        },\n        toolTips: {\n          disconnected: {\n            title: \"Falha ao iniciar sesso do WhatsApp\",\n            content:\n              \"Certifique-se de que seu celular esteja conectado  internet e tente novamente, ou solicite um novo QR Code\",\n          },\n          qrcode: {\n            title: \"Esperando leitura do QR Code\",\n            content:\n              \"Clique no boto 'QR CODE' e leia o QR Code com o seu celular para iniciar a sesso\",\n          },\n          connected: {\n            title: \"Conexo estabelecida!\",\n          },\n          timeout: {\n            title: \"A conexo com o celular foi perdida\",\n            content:\n              \"Certifique-se de que seu celular esteja conectado  internet e o WhatsApp esteja aberto, ou clique no boto 'Desconectar' para obter um novo QR Code\",\n          },\n        },\n        table: {\n          name: \"Nome\",\n          status: \"Status\",\n          lastUpdate: \"ltima atualizao\",\n          default: \"Padro\",\n          actions: \"Aes\",\n          session: \"Sesso\",\n        },\n      },\n      whatsappModal: {\n        title: {\n          add: \"Adicionar WhatsApp\",\n          edit: \"Editar WhatsApp\",\n        },\n        form: {\n          name: \"Nome\",\n          default: \"Padro\",\n          farewellMessage: \"Mensagem de despedida\"\n        },\n        buttons: {\n          okAdd: \"Adicionar\",\n          okEdit: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"WhatsApp salvo com sucesso.\",\n      },\n      qrCode: {\n        message: \"Leia o QrCode para iniciar a sesso\",\n      },\n      contacts: {\n        title: \"Contatos\",\n        toasts: {\n          deleted: \"Contato excludo com sucesso!\",\n        },\n        searchPlaceholder: \"Pesquisar...\",\n        confirmationModal: {\n          deleteTitle: \"Deletar \",\n          importTitlte: \"Importar contatos\",\n          deleteMessage:\n            \"Tem certeza que deseja deletar este contato? Todos os tickets relacionados sero perdidos.\",\n          importMessage: \"Deseja importas todos os contatos do telefone?\",\n        },\n        buttons: {\n          import: \"Importar Contatos\",\n          add: \"Adicionar Contato\",\n        },\n        table: {\n          name: \"Nome\",\n          whatsapp: \"WhatsApp\",\n          email: \"Email\",\n          actions: \"Aes\",\n        },\n      },\n      contactModal: {\n        title: {\n          add: \"Adicionar contato\",\n          edit: \"Editar contato\",\n        },\n        form: {\n          mainInfo: \"Dados do contato\",\n          extraInfo: \"Informaes adicionais\",\n          name: \"Nome\",\n          number: \"Nmero do Whatsapp\",\n          email: \"Email\",\n          extraName: \"Nome do campo\",\n          extraValue: \"Valor\",\n        },\n        buttons: {\n          addExtraInfo: \"Adicionar informao\",\n          okAdd: \"Adicionar\",\n          okEdit: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Contato salvo com sucesso.\",\n      },\n      quickAnswersModal: {\n        title: {\n          add: \"Adicionar Resposta Rpida\",\n          edit: \"Editar Resposta Rpida\",\n        },\n        form: {\n          shortcut: \"Atalho\",\n          message: \"Resposta Rpida\",\n        },\n        buttons: {\n          okAdd: \"Adicionar\",\n          okEdit: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Resposta Rpida salva com sucesso.\",\n      },\n      queueModal: {\n        title: {\n          add: \"Adicionar fila\",\n          edit: \"Editar fila\",\n        },\n        form: {\n          name: \"Nome\",\n          color: \"Cor\",\n          greetingMessage: \"Mensagem de saudao\",\n        },\n        buttons: {\n          okAdd: \"Adicionar\",\n          okEdit: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      userModal: {\n        title: {\n          add: \"Adicionar usurio\",\n          edit: \"Editar usurio\",\n        },\n        form: {\n          name: \"Nome\",\n          email: \"Email\",\n          password: \"Senha\",\n          profile: \"Perfil\",\n        },\n        buttons: {\n          okAdd: \"Adicionar\",\n          okEdit: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Usurio salvo com sucesso.\",\n      },\n      chat: {\n        noTicketMessage: \"Selecione um ticket para comear a conversar.\",\n      },\n      ticketsManager: {\n        buttons: {\n          newTicket: \"Novo\",\n        },\n      },\n      ticketsQueueSelect: {\n        placeholder: \"Filas\",\n      },\n      tickets: {\n        toasts: {\n          deleted: \"O ticket que voc estava foi deletado.\",\n        },\n        notification: {\n          message: \"Mensagem de\",\n        },\n        tabs: {\n          open: { title: \"Inbox\" },\n          closed: { title: \"Resolvidos\" },\n          search: { title: \"Busca\" },\n        },\n        search: {\n          placeholder: \"Buscar tickets e mensagens\",\n        },\n        buttons: {\n          showAll: \"Todos\",\n        },\n      },\n      transferTicketModal: {\n        title: \"Transferir Ticket\",\n        fieldLabel: \"Digite para buscar usurios\",\n        fieldQueueLabel: \"Transferir para fila\",\n        fieldQueuePlaceholder: \"Selecione uma fila\",\n        noOptions: \"Nenhum usurio encontrado com esse nome\",\n        buttons: {\n          ok: \"Transferir\",\n          cancel: \"Cancelar\",\n        },\n      },\n      ticketsList: {\n        pendingHeader: \"Aguardando\",\n        assignedHeader: \"Atendendo\",\n        noTicketsTitle: \"Nada aqui!\",\n        noTicketsMessage:\n          \"Nenhum ticket encontrado com esse status ou termo pesquisado\",\n        buttons: {\n          accept: \"Aceitar\",\n        },\n      },\n      newTicketModal: {\n        title: \"Criar Ticket\",\n        fieldLabel: \"Digite para pesquisar o contato\",\n        add: \"Adicionar\",\n        buttons: {\n          ok: \"Salvar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      mainDrawer: {\n        listItems: {\n          dashboard: \"Dashboard\",\n          connections: \"Conexes\",\n          tickets: \"Tickets\",\n          contacts: \"Contatos\",\n          quickAnswers: \"Respostas Rpidas\",\n          queues: \"Filas\",\n          administration: \"Administrao\",\n          users: \"Usurios\",\n          settings: \"Configuraes\",\n        },\n        appBar: {\n          user: {\n            profile: \"Perfil\",\n            logout: \"Sair\",\n          },\n        },\n      },\n      notifications: {\n        noTickets: \"Nenhuma notificao.\",\n      },\n      queues: {\n        title: \"Filas\",\n        table: {\n          name: \"Nome\",\n          color: \"Cor\",\n          greeting: \"Mensagem de saudao\",\n          actions: \"Aes\",\n        },\n        buttons: {\n          add: \"Adicionar fila\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Excluir\",\n          deleteMessage:\n            \"Voc tem certeza? Essa ao no pode ser revertida! Os tickets dessa fila continuaro existindo, mas no tero mais nenhuma fila atribuda.\",\n        },\n      },\n      queueSelect: {\n        inputLabel: \"Filas\",\n      },\n      quickAnswers: {\n        title: \"Respostas Rpidas\",\n        table: {\n          shortcut: \"Atalho\",\n          message: \"Resposta Rpida\",\n          actions: \"Aes\",\n        },\n        buttons: {\n          add: \"Adicionar Resposta Rpida\",\n        },\n        toasts: {\n          deleted: \"Resposta Rpida excluda com sucesso.\",\n        },\n        searchPlaceholder: \"Pesquisar...\",\n        confirmationModal: {\n          deleteTitle:\n            \"Voc tem certeza que quer excluir esta Resposta Rpida: \",\n          deleteMessage: \"Esta ao no pode ser revertida.\",\n        },\n      },\n      users: {\n        title: \"Usurios\",\n        table: {\n          name: \"Nome\",\n          email: \"Email\",\n          profile: \"Perfil\",\n          actions: \"Aes\",\n        },\n        buttons: {\n          add: \"Adicionar usurio\",\n        },\n        toasts: {\n          deleted: \"Usurio excludo com sucesso.\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Excluir\",\n          deleteMessage:\n            \"Todos os dados do usurio sero perdidos. Os tickets abertos deste usurio sero movidos para a fila.\",\n        },\n      },\n      settings: {\n        success: \"Configuraes salvas com sucesso.\",\n        title: \"Configuraes\",\n        settings: {\n          userCreation: {\n            name: \"Criao de usurio\",\n            options: {\n              enabled: \"Ativado\",\n              disabled: \"Desativado\",\n            },\n          },\n        },\n      },\n      messagesList: {\n        header: {\n          assignedTo: \"Atribudo :\",\n          buttons: {\n            return: \"Retornar\",\n            resolve: \"Resolver\",\n            reopen: \"Reabrir\",\n            accept: \"Aceitar\",\n          },\n        },\n      },\n      messagesInput: {\n        placeholderOpen: \"Digite uma mensagem ou tecle ''/'' para utilizar as respostas rpidas cadastrada\",\n        placeholderClosed:\n          \"Reabra ou aceite esse ticket para enviar uma mensagem.\",\n        signMessage: \"Assinar\",\n      },\n      contactDrawer: {\n        header: \"Dados do contato\",\n        buttons: {\n          edit: \"Editar contato\",\n        },\n        extraInfo: \"Outras informaes\",\n      },\n      ticketOptionsMenu: {\n        delete: \"Deletar\",\n        transfer: \"Transferir\",\n        confirmationModal: {\n          title: \"Deletar o ticket do contato\",\n          message:\n            \"Ateno! Todas as mensagens relacionadas ao ticket sero perdidas.\",\n        },\n        buttons: {\n          delete: \"Excluir\",\n          cancel: \"Cancelar\",\n        },\n      },\n      confirmationModal: {\n        buttons: {\n          confirm: \"Ok\",\n          cancel: \"Cancelar\",\n        },\n      },\n      messageOptionsMenu: {\n        delete: \"Deletar\",\n        reply: \"Responder\",\n        confirmationModal: {\n          title: \"Apagar mensagem?\",\n          message: \"Esta ao no pode ser revertida.\",\n        },\n      },\n      backendErrors: {\n        ERR_NO_OTHER_WHATSAPP: \"Deve haver pelo menos um WhatsApp padro.\",\n        ERR_NO_DEF_WAPP_FOUND:\n          \"Nenhum WhatsApp padro encontrado. Verifique a pgina de conexes.\",\n        ERR_WAPP_NOT_INITIALIZED:\n          \"Esta sesso do WhatsApp no foi inicializada. Verifique a pgina de conexes.\",\n        ERR_WAPP_CHECK_CONTACT:\n          \"No foi possvel verificar o contato do WhatsApp. Verifique a pgina de conexes\",\n        ERR_WAPP_INVALID_CONTACT: \"Este no  um nmero de Whatsapp vlido.\",\n        ERR_WAPP_DOWNLOAD_MEDIA:\n          \"No foi possvel baixar mdia do WhatsApp. Verifique a pgina de conexes.\",\n        ERR_INVALID_CREDENTIALS:\n          \"Erro de autenticao. Por favor, tente novamente.\",\n        ERR_SENDING_WAPP_MSG:\n          \"Erro ao enviar mensagem do WhatsApp. Verifique a pgina de conexes.\",\n        ERR_DELETE_WAPP_MSG: \"No foi possvel excluir a mensagem do WhatsApp.\",\n        ERR_OTHER_OPEN_TICKET: \"J existe um tquete aberto para este contato.\",\n        ERR_SESSION_EXPIRED: \"Sesso expirada. Por favor entre.\",\n        ERR_USER_CREATION_DISABLED:\n          \"A criao do usurio foi desabilitada pelo administrador.\",\n        ERR_NO_PERMISSION: \"Voc no tem permisso para acessar este recurso.\",\n        ERR_DUPLICATED_CONTACT: \"J existe um contato com este nmero.\",\n        ERR_NO_SETTING_FOUND: \"Nenhuma configurao encontrada com este ID.\",\n        ERR_NO_CONTACT_FOUND: \"Nenhum contato encontrado com este ID.\",\n        ERR_NO_TICKET_FOUND: \"Nenhum tquete encontrado com este ID.\",\n        ERR_NO_USER_FOUND: \"Nenhum usurio encontrado com este ID.\",\n        ERR_NO_WAPP_FOUND: \"Nenhum WhatsApp encontrado com este ID.\",\n        ERR_CREATING_MESSAGE: \"Erro ao criar mensagem no banco de dados.\",\n        ERR_CREATING_TICKET: \"Erro ao criar tquete no banco de dados.\",\n        ERR_FETCH_WAPP_MSG:\n          \"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.\",\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\n          \"Esta cor j est em uso, escolha outra.\",\n        ERR_WAPP_GREETING_REQUIRED:\n          \"A mensagem de saudao  obrigatrio quando h mais de uma fila.\",\n      },\n    },\n  },\n};\n\nexport { messages };\n","const messages = {\n  en: {\n    translations: {\n      signup: {\n        title: \"Sign up\",\n        toasts: {\n          success: \"User created successfully! Please login!\",\n          fail: \"Error creating user. Check the reported data.\",\n        },\n        form: {\n          name: \"Name\",\n          email: \"Email\",\n          password: \"Password\",\n        },\n        buttons: {\n          submit: \"Register\",\n          login: \"Already have an account? Log in!\",\n        },\n      },\n      login: {\n        title: \"Login\",\n        form: {\n          email: \"Email\",\n          password: \"Password\",\n        },\n        buttons: {\n          submit: \"Enter\",\n          register: \"Don't have an account? Register!\",\n        },\n      },\n      auth: {\n        toasts: {\n          success: \"Login successfully!\",\n        },\n      },\n      dashboard: {\n        charts: {\n          perDay: {\n            title: \"Tickets today: \",\n          },\n        },\n        messages: {\n          inAttendance: {\n            title: \"In Service\"\n          },\n          waiting: {\n            title: \"Waiting\"\n          },\n          closed: {\n            title: \"Closed\"\n          }\n        }\n      },\n      connections: {\n        title: \"Connections\",\n        toasts: {\n          deleted: \"WhatsApp connection deleted sucessfully!\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          deleteMessage: \"Are you sure? It cannot be reverted.\",\n          disconnectTitle: \"Disconnect\",\n          disconnectMessage: \"Are you sure? You'll need to read QR Code again.\",\n        },\n        buttons: {\n          add: \"Add WhatsApp\",\n          disconnect: \"Disconnect\",\n          tryAgain: \"Try Again\",\n          qrcode: \"QR CODE\",\n          newQr: \"New QR CODE\",\n          connecting: \"Connectiing\",\n        },\n        toolTips: {\n          disconnected: {\n            title: \"Failed to start WhatsApp session\",\n            content:\n              \"Make sure your cell phone is connected to the internet and try again, or request a new QR Code\",\n          },\n          qrcode: {\n            title: \"Waiting for QR Code read\",\n            content:\n              \"Click on 'QR CODE' button and read the QR Code with your cell phone to start session\",\n          },\n          connected: {\n            title: \"Connection established\",\n          },\n          timeout: {\n            title: \"Connection with cell phone has been lost\",\n            content:\n              \"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode\",\n          },\n        },\n        table: {\n          name: \"Name\",\n          status: \"Status\",\n          lastUpdate: \"Last Update\",\n          default: \"Default\",\n          actions: \"Actions\",\n          session: \"Session\",\n        },\n      },\n      whatsappModal: {\n        title: {\n          add: \"Add WhatsApp\",\n          edit: \"Edit WhatsApp\",\n        },\n        form: {\n          name: \"Name\",\n          default: \"Default\",\n        },\n        buttons: {\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n        success: \"WhatsApp saved successfully.\",\n      },\n      qrCode: {\n        message: \"Read QrCode to start the session\",\n      },\n      contacts: {\n        title: \"Contacts\",\n        toasts: {\n          deleted: \"Contact deleted sucessfully!\",\n        },\n        searchPlaceholder: \"Search ...\",\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          importTitlte: \"Import contacts\",\n          deleteMessage:\n            \"Are you sure you want to delete this contact? All related tickets will be lost.\",\n          importMessage: \"Do you want to import all contacts from the phone?\",\n        },\n        buttons: {\n          import: \"Import Contacts\",\n          add: \"Add Contact\",\n        },\n        table: {\n          name: \"Name\",\n          whatsapp: \"WhatsApp\",\n          email: \"Email\",\n          actions: \"Actions\",\n        },\n      },\n      contactModal: {\n        title: {\n          add: \"Add contact\",\n          edit: \"Edit contact\",\n        },\n        form: {\n          mainInfo: \"Contact details\",\n          extraInfo: \"Additional information\",\n          name: \"Name\",\n          number: \"Whatsapp number\",\n          email: \"Email\",\n          extraName: \"Field name\",\n          extraValue: \"Value\",\n        },\n        buttons: {\n          addExtraInfo: \"Add information\",\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n        success: \"Contact saved successfully.\",\n      },\n      quickAnswersModal: {\n        title: {\n          add: \"Add Quick Reply\",\n          edit: \"Edit Quick Answer\",\n        },\n        form: {\n          shortcut: \"Shortcut\",\n          message: \"Quick Reply\",\n        },\n        buttons: {\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n        success: \"Quick Reply saved successfully.\",\n      },\n      queueModal: {\n        title: {\n          add: \"Add queue\",\n          edit: \"Edit queue\",\n        },\n        form: {\n          name: \"Name\",\n          color: \"Color\",\n          greetingMessage: \"Greeting Message\",\n        },\n        buttons: {\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n      },\n      campaignModal: {\n        title: {\n          add: \"Add campaign\",\n          edit: \"Edit campaign\",\n        },\n        form: {\n          name: \"Name\",\n          conextion: \"Select a connection*\",\n          attachment: \"ADD ATTACHMENT\",\n          message: \"default message\",\n          variables: \"Available variables\",\n          csvfile: \"IMPORT CSV FILE\",\n          sample: \"download the sample file\",\n        },\n        buttons: {\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n      },\n      userModal: {\n        title: {\n          add: \"Add user\",\n          edit: \"Edit user\",\n        },\n        form: {\n          name: \"Name\",\n          email: \"Email\",\n          password: \"Password\",\n          profile: \"Profile\",\n        },\n        buttons: {\n          okAdd: \"Add\",\n          okEdit: \"Save\",\n          cancel: \"Cancel\",\n        },\n        success: \"User saved successfully.\",\n      },\n      chat: {\n        noTicketMessage: \"Select a ticket to start chatting.\",\n      },\n      ticketsManager: {\n        buttons: {\n          newTicket: \"New\",\n        },\n      },\n      ticketsQueueSelect: {\n        placeholder: \"Queues\",\n      },\n      tickets: {\n        toasts: {\n          deleted: \"The ticket you were on has been deleted.\",\n        },\n        notification: {\n          message: \"Message from\",\n        },\n        tabs: {\n          open: { title: \"Inbox\" },\n          closed: { title: \"Resolved\" },\n          search: { title: \"Search\" },\n        },\n        search: {\n          placeholder: \"Search tickets and messages.\",\n        },\n        buttons: {\n          showAll: \"All\",\n        },\n      },\n      transferTicketModal: {\n        title: \"Transfer Ticket\",\n        fieldLabel: \"Type to search for users\",\n        fieldQueueLabel: \"Transfer to queue\",\n        fieldQueuePlaceholder: \"Please select a queue\",\n        noOptions: \"No user found with this name\",\n        buttons: {\n          ok: \"Transfer\",\n          cancel: \"Cancel\",\n        },\n      },\n      ticketsList: {\n        pendingHeader: \"Queue\",\n        assignedHeader: \"Working on\",\n        noTicketsTitle: \"Nothing here!\",\n        noTicketsMessage: \"No tickets found with this status or search term.\",\n        buttons: {\n          accept: \"Accept\",\n        },\n      },\n      newTicketModal: {\n        title: \"Create Ticket\",\n        fieldLabel: \"Type to search for a contact\",\n        add: \"Add\",\n        buttons: {\n          ok: \"Save\",\n          cancel: \"Cancel\",\n        },\n      },\n      mainDrawer: {\n        listItems: {\n          dashboard: \"Dashboard\",\n          connections: \"Connections\",\n          tickets: \"Conversations\",\n          contacts: \"Contacts\",\n          quickAnswers: \"Quick Answers\",\n          queues: \"Queues & Chatbots\",\n          campaings: \"Campaigns\",\n          reports: \"Reports\",\n          administration: \"Administration\",\n          users: \"Users\",\n          settings: \"Settings\",\n        },\n        appBar: {\n          user: {\n            profile: \"Profile\",\n            logout: \"Logout\",\n          },\n        },\n      },\n      notifications: {\n        noTickets: \"No notifications.\",\n      },\n      queues: {\n        title: \"Queues\",\n        table: {\n          name: \"Name\",\n          color: \"Color\",\n          greeting: \"Greeting message\",\n          actions: \"Actions\",\n        },\n        buttons: {\n          add: \"Add queue\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          deleteMessage:\n            \"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned.\",\n        },\n      },\n      queueSelect: {\n        inputLabel: \"Queues\",\n      },\n      campaigns: {\n        title: \"Campaigns\",\n        table: {\n          name: \"Campaign Name\",\n          status: \"Status\",\n          createdAt: \"Created at\",\n          progress: \"Progress\",\n          actions: \"Actions\",\n        },\n        buttons: {\n          add: \"New Campaign\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          deleteMessage:\n            \"Are you sure? It cannot be reverted!\",\n        },\n      },\n      quickAnswers: {\n        title: \"Quick Answers\",\n        table: {\n          shortcut: \"Shortcut\",\n          message: \"Quick Reply\",\n          actions: \"Actions\",\n        },\n        buttons: {\n          add: \"Add Quick Reply\",\n        },\n        toasts: {\n          deleted: \"Quick Reply deleted successfully.\",\n        },\n        searchPlaceholder: \"Search...\",\n        confirmationModal: {\n          deleteTitle: \"Are you sure you want to delete this Quick Reply: \",\n          deleteMessage: \"This action cannot be undone.\",\n        },\n      },\n      users: {\n        title: \"Users\",\n        table: {\n          name: \"Name\",\n          email: \"Email\",\n          profile: \"Profile\",\n          actions: \"Actions\",\n        },\n        buttons: {\n          add: \"Add user\",\n        },\n        toasts: {\n          deleted: \"User deleted sucessfully.\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          deleteMessage:\n            \"All user data will be lost. Users' open tickets will be moved to queue.\",\n        },\n      },\n      settings: {\n        success: \"Settings saved successfully.\",\n        title: \"Settings\",\n        settings: {\n          userCreation: {\n            name: \"User creation\",\n            options: {\n              enabled: \"Enabled\",\n              disabled: \"Disabled\",\n            },\n          },\n        },\n      },\n      messagesList: {\n        header: {\n          assignedTo: \"Assigned to:\",\n          buttons: {\n            return: \"Return\",\n            resolve: \"Resolve\",\n            reopen: \"Reopen\",\n            accept: \"Accept\",\n          },\n        },\n      },\n      messagesInput: {\n        placeholderOpen: \"Type a message or press ''/'' to use the registered quick responses\",\n        placeholderClosed: \"Reopen or accept this ticket to send a message.\",\n        signMessage: \"Sign\",\n      },\n      contactDrawer: {\n        header: \"Contact details\",\n        buttons: {\n          edit: \"Edit contact\",\n        },\n        extraInfo: \"Other information\",\n      },\n      ticketOptionsMenu: {\n        delete: \"Delete\",\n        transfer: \"Transfer\",\n        confirmationModal: {\n          title: \"Delete ticket #\",\n          titleFrom: \"from contact \",\n          message: \"Attention! All ticket's related messages will be lost.\",\n        },\n        buttons: {\n          delete: \"Delete\",\n          cancel: \"Cancel\",\n        },\n      },\n      confirmationModal: {\n        buttons: {\n          confirm: \"Ok\",\n          cancel: \"Cancel\",\n        },\n      },\n      messageOptionsMenu: {\n        delete: \"Delete\",\n        reply: \"Reply\",\n        confirmationModal: {\n          title: \"Delete message?\",\n          message: \"This action cannot be reverted.\",\n        },\n      },\n      backendErrors: {\n        ERR_NO_OTHER_WHATSAPP:\n          \"There must be at lest one default WhatsApp connection.\",\n        ERR_NO_DEF_WAPP_FOUND:\n          \"No default WhatsApp found. Check connections page.\",\n        ERR_WAPP_NOT_INITIALIZED:\n          \"This WhatsApp session is not initialized. Check connections page.\",\n        ERR_WAPP_CHECK_CONTACT:\n          \"Could not check WhatsApp contact. Check connections page.\",\n        ERR_WAPP_INVALID_CONTACT: \"This is not a valid whatsapp number.\",\n        ERR_WAPP_DOWNLOAD_MEDIA:\n          \"Could not download media from WhatsApp. Check connections page.\",\n        ERR_INVALID_CREDENTIALS: \"Authentication error. Please try again.\",\n        ERR_SENDING_WAPP_MSG:\n          \"Error sending WhatsApp message. Check connections page.\",\n        ERR_DELETE_WAPP_MSG: \"Couldn't delete message from WhatsApp.\",\n        ERR_OTHER_OPEN_TICKET:\n          \"There's already an open ticket for this contact.\",\n        ERR_SESSION_EXPIRED: \"Session expired. Please login.\",\n        ERR_USER_CREATION_DISABLED:\n          \"User creation was disabled by administrator.\",\n        ERR_NO_PERMISSION: \"You don't have permission to access this resource.\",\n        ERR_DUPLICATED_CONTACT: \"A contact with this number already exists.\",\n        ERR_NO_SETTING_FOUND: \"No setting found with this ID.\",\n        ERR_NO_CONTACT_FOUND: \"No contact found with this ID.\",\n        ERR_NO_TICKET_FOUND: \"No ticket found with this ID.\",\n        ERR_NO_USER_FOUND: \"No user found with this ID.\",\n        ERR_NO_WAPP_FOUND: \"No WhatsApp found with this ID.\",\n        ERR_CREATING_MESSAGE: \"Error while creating message on database.\",\n        ERR_CREATING_TICKET: \"Error while creating ticket on database.\",\n        ERR_FETCH_WAPP_MSG:\n          \"Error fetching the message in WhtasApp, maybe it is too old.\",\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\n          \"This color is already in use, pick another one.\",\n        ERR_WAPP_GREETING_REQUIRED:\n          \"Greeting message is required if there is more than one queue.\",\n      },\n    },\n  },\n};\n\nexport { messages };\n","const messages = {\n  es: {\n    translations: {\n      signup: {\n        title: \"Registro\",\n        toasts: {\n          success:\n            \"El usuario ha sido creado satisfactoriamente! Ahora inicia sesin!\",\n          fail: \"Error creando el usuario. Verifica la data reportada.\",\n        },\n        form: {\n          name: \"Nombre\",\n          email: \"Correo Electrnico\",\n          password: \"Contrasea\",\n        },\n        buttons: {\n          submit: \"Regstrate\",\n          login: \"Ya tienes una cuenta? Inicia sesin!\",\n        },\n      },\n      login: {\n        title: \"Inicio de Sesin\",\n        form: {\n          email: \"Correo Electrnico\",\n          password: \"Contrasea\",\n        },\n        buttons: {\n          submit: \"Ingresa\",\n          register: \"No tienes cuenta? Regstrate!\",\n        },\n      },\n      auth: {\n        toasts: {\n          success: \"Inicio de sesin exitoso!\",\n        },\n      },\n      dashboard: {\n        charts: {\n          perDay: {\n            title: \"Tickets hoy: \",\n          },\n        },\n        messages: {\n          inAttendance: {\n            title: \"En servicio\"\n          },\n          waiting: {\n            title: \"Esperando\"\n          },\n          closed: {\n            title: \"Finalizado\"\n          }\n        }\n      },\n      connections: {\n        title: \"Conexiones\",\n        toasts: {\n          deleted:\n            \"La conexin de WhatsApp ha sido borrada satisfactoriamente!\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Borrar\",\n          deleteMessage: \"Ests seguro? Este proceso no puede ser revertido.\",\n          disconnectTitle: \"Desconectar\",\n          disconnectMessage: \"Ests seguro? Deber volver a leer el cdigo QR\",\n        },\n        buttons: {\n          add: \"Agrega WhatsApp\",\n          disconnect: \"Desconectar\",\n          tryAgain: \"Intntalo de nuevo\",\n          qrcode: \"QR CODE\",\n          newQr: \"Nuevo QR CODE\",\n          connecting: \"Conectando\",\n        },\n        toolTips: {\n          disconnected: {\n            title: \"No se pudo iniciar la sesin de WhatsApp\",\n            content:\n              \"Asegrese de que su telfono celular est conectado a Internet y vuelva a intentarlo o solicite un nuevo cdigo QR\",\n          },\n          qrcode: {\n            title: \"Esperando la lectura del cdigo QR\",\n            content:\n              \"Haga clic en el botn 'CDIGO QR' y lea el Cdigo QR con su telfono celular para iniciar la sesin\",\n          },\n          connected: {\n            title: \"Conexin establecida\",\n          },\n          timeout: {\n            title: \"Se perdi la conexin con el telfono celular\",\n            content:\n              \"Asegrese de que su telfono celular est conectado a Internet y que WhatsApp est abierto, o haga clic en el botn 'Desconectar' para obtener un nuevo cdigo QR\",\n          },\n        },\n        table: {\n          name: \"Nombre\",\n          status: \"Estado\",\n          lastUpdate: \"ltima Actualizacin\",\n          default: \"Por Defecto\",\n          actions: \"Acciones\",\n          session: \"Sesin\",\n        },\n      },\n      whatsappModal: {\n        title: {\n          add: \"Agrega WhatsApp\",\n          edit: \"Edita WhatsApp\",\n        },\n        form: {\n          name: \"Nombre\",\n          default: \"Por Defecto\",\n        },\n        buttons: {\n          okAdd: \"Agregar\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"WhatsApp guardado satisfactoriamente.\",\n      },\n      qrCode: {\n        message: \"Le el cdigo QR para empezar la sesin.\",\n      },\n      contacts: {\n        title: \"Contactos\",\n        toasts: {\n          deleted: \"Contacto borrado satisfactoriamente!\",\n        },\n        searchPlaceholder: \"Buscar...\",\n        confirmationModal: {\n          deleteTitle: \"Borrar\",\n          importTitlte: \"Importar contactos\",\n          deleteMessage:\n            \"Ests seguro que deseas borrar este contacto? Todos los tickets relacionados se perdern.\",\n          importMessage:\n            \"Quieres importar todos los contactos desde tu telfono?\",\n        },\n        buttons: {\n          import: \"Importar Contactos\",\n          add: \"Agregar Contacto\",\n        },\n        table: {\n          name: \"Nombre\",\n          whatsapp: \"WhatsApp\",\n          email: \"Correo Electrnico\",\n          actions: \"Acciones\",\n        },\n      },\n      contactModal: {\n        title: {\n          add: \"Agregar contacto\",\n          edit: \"Editar contacto\",\n        },\n        form: {\n          mainInfo: \"Detalles del contacto\",\n          extraInfo: \"Informacin adicional\",\n          name: \"Nombre\",\n          number: \"Nmero de Whatsapp\",\n          email: \"Correo Electrnico\",\n          extraName: \"Nombre del Campo\",\n          extraValue: \"Valor\",\n        },\n        buttons: {\n          addExtraInfo: \"Agregar informacin\",\n          okAdd: \"Agregar\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Contacto guardado satisfactoriamente.\",\n      },\n      quickAnswersModal: {\n        title: {\n          add: \"Agregar respuesta rpida\",\n          edit: \"Editar respuesta rpida\",\n        },\n        form: {\n          shortcut: \"Atajo\",\n          message: \"Respuesta rpida\",\n        },\n        buttons: {\n          okAdd: \"Agregar\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Respuesta rpida guardada correctamente.\",\n      },\n      queueModal: {\n        title: {\n          add: \"Agregar cola\",\n          edit: \"Editar cola\",\n        },\n        form: {\n          name: \"Nombre\",\n          color: \"Color\",\n          greetingMessage: \"Mensaje de saludo\",\n        },\n        buttons: {\n          okAdd: \"Aadir\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      campaignModal: {\n        title: {\n          add: \"Agregar campaa\",\n          edit: \"Editar Agregar\",\n        },\n        form: {\n          name: \"Nombre\",\n          conextion: \"Seleccionar una conexion*\",\n          attachment: \"AADIR ADJUNTO\",\n          message: \"mensaje predeterminado\",\n          variables: \"Variables disponibles\",\n          csvfile: \"IMPORTAR ARCHIVO CSV\",\n          sample: \"descargar el archivo de muestra\",\n        },\n        buttons: {\n          okAdd: \"Aadir\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      userModal: {\n        title: {\n          add: \"Agregar usuario\",\n          edit: \"Editar usuario\",\n        },\n        form: {\n          name: \"Nombre\",\n          email: \"Correo Electrnico\",\n          password: \"Contrasea\",\n          profile: \"Perfil\",\n        },\n        buttons: {\n          okAdd: \"Agregar\",\n          okEdit: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n        success: \"Usuario guardado satisfactoriamente.\",\n      },\n      chat: {\n        noTicketMessage: \"Selecciona un ticket para empezar a chatear.\",\n      },\n      ticketsManager: {\n        buttons: {\n          newTicket: \"Nuevo\",\n        },\n      },\n      ticketsQueueSelect: {\n        placeholder: \"Linhas\",\n      },\n      tickets: {\n        toasts: {\n          deleted: \"El ticket en el que estabas ha sido borrado.\",\n        },\n        notification: {\n          message: \"Mensaje de\",\n        },\n        tabs: {\n          open: { title: \"Bandeja\" },\n          closed: { title: \"Resueltos\" },\n          search: { title: \"Buscar\" },\n        },\n        search: {\n          placeholder: \"Buscar tickets y mensajes.\",\n        },\n        buttons: {\n          showAll: \"Todos\",\n        },\n      },\n      transferTicketModal: {\n        title: \"Transferir Ticket\",\n        fieldLabel: \"Escriba para buscar usuarios\",\n        fieldQueueLabel: \"Transferir a la cola\",\n        fieldQueuePlaceholder: \"Seleccione una cola\",\n        noOptions: \"No se encontraron usuarios con ese nombre\",\n        buttons: {\n          ok: \"Transferir\",\n          cancel: \"Cancelar\",\n        },\n      },\n      ticketsList: {\n        pendingHeader: \"Cola\",\n        assignedHeader: \"Trabajando en\",\n        noTicketsTitle: \"Nada ac!\",\n        noTicketsMessage:\n          \"No se encontraron tickets con este estado o trmino de bsqueda\",\n        buttons: {\n          accept: \"Acceptar\",\n        },\n      },\n      newTicketModal: {\n        title: \"Crear Ticket\",\n        fieldLabel: \"Escribe para buscar un contacto\",\n        add: \"Aadir\",\n        buttons: {\n          ok: \"Guardar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      mainDrawer: {\n        listItems: {\n          dashboard: \"Dashboard\",\n          connections: \"Conexiones\",\n          tickets: \"Conversaciones\",\n          contacts: \"Contactos\",\n          quickAnswers: \"Respuestas rpidas\",\n          queues: \"colas & Chatbots\",\n          campaings: \"Campaas\",\n          reports: \"Reportes\",\n          administration: \"Administracin\",\n          users: \"Usuarios\",\n          settings: \"Configuracin\",\n        },\n        appBar: {\n          user: {\n            profile: \"Perfil\",\n            logout: \"Cerrar Sesin\",\n          },\n        },\n      },\n      notifications: {\n        noTickets: \"Sin notificaciones.\",\n      },\n      queues: {\n        title: \"Colas\",\n        table: {\n          name: \"Nombre\",\n          color: \"Color\",\n          greeting: \"Mensaje de saludo\",\n          actions: \"Comportamiento\",\n        },\n        buttons: {\n          add: \"Agregar cola\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Eliminar\",\n          deleteMessage:\n            \"Ests seguro? Esta accin no se puede revertir! Los tickets en esa cola seguirn existiendo, pero ya no tendrn ninguna cola asignada.\",\n        },\n      },\n      queueSelect: {\n        inputLabel: \"Linhas\",\n      },\n      campaigns: {\n        title: \"Campaas\",\n        table: {\n          name: \"Nombre de Campaa\",\n          status: \"estado\",\n          createdAt: \"Creado en\",\n          progress: \"Progreso\",\n          actions: \"Acciones\",\n        },\n        buttons: {\n          add: \"New Campaign\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Delete\",\n          deleteMessage:\n            \"Are you sure? It cannot be reverted!\",\n        },\n      },\n      quickAnswers: {\n        title: \"Respuestas rpidas\",\n        table: {\n          shortcut: \"Atajo\",\n          message: \"Respuesta rpida\",\n          actions: \"Acciones\",\n        },\n        buttons: {\n          add: \"Agregar respuesta rpida\",\n        },\n        toasts: {\n          deleted: \"Respuesta rpida eliminada correctamente\",\n        },\n        searchPlaceholder: \"Buscar ...\",\n        confirmationModal: {\n          deleteTitle:\n            \"Est seguro de que desea eliminar esta respuesta rpida?\",\n          deleteMessage: \"Esta accin no se puede deshacer.\",\n        },\n      },\n      users: {\n        title: \"Usuarios\",\n        table: {\n          name: \"Nombre\",\n          email: \"Correo Electrnico\",\n          profile: \"Perfil\",\n          actions: \"Acciones\",\n        },\n        buttons: {\n          add: \"Agregar usuario\",\n        },\n        toasts: {\n          deleted: \"Usuario borrado satisfactoriamente.\",\n        },\n        confirmationModal: {\n          deleteTitle: \"Borrar\",\n          deleteMessage:\n            \"Toda la informacin del usuario se perder. Los tickets abiertos de los usuarios se movern a la cola.\",\n        },\n      },\n      settings: {\n        success: \"Configuracin guardada satisfactoriamente.\",\n        title: \"Configuracin\",\n        settings: {\n          userCreation: {\n            name: \"Creacin de usuarios\",\n            options: {\n              enabled: \"Habilitado\",\n              disabled: \"Deshabilitado\",\n            },\n          },\n        },\n      },\n      messagesList: {\n        header: {\n          assignedTo: \"Asignado a:\",\n          buttons: {\n            return: \"Devolver\",\n            resolve: \"Resolver\",\n            reopen: \"Reabrir\",\n            accept: \"Aceptar\",\n          },\n        },\n      },\n      messagesInput: {\n        placeholderOpen: \"Escriba un mensaje o presione '' / '' para usar las respuestas rpidas registradas\",\n        placeholderClosed:\n          \"Vuelva a abrir o acepte este ticket para enviar un mensaje.\",\n        signMessage: \"Firmar\",\n      },\n      contactDrawer: {\n        header: \"Detalles del contacto\",\n        buttons: {\n          edit: \"Editar contacto\",\n        },\n        extraInfo: \"Otra informacin\",\n      },\n      ticketOptionsMenu: {\n        delete: \"Borrar\",\n        transfer: \"Transferir\",\n        confirmationModal: {\n          title: \"Borrar ticket #\",\n          titleFrom: \"del contacto \",\n          message:\n            \"Atencin! Todos los mensajes Todos los mensajes relacionados con el ticket se perdern.\",\n        },\n        buttons: {\n          delete: \"Borrar\",\n          cancel: \"Cancelar\",\n        },\n      },\n      confirmationModal: {\n        buttons: {\n          confirm: \"Ok\",\n          cancel: \"Cancelar\",\n        },\n      },\n      messageOptionsMenu: {\n        delete: \"Borrar\",\n        reply: \"Responder\",\n        confirmationModal: {\n          title: \"Borrar mensaje?\",\n          message: \"Esta accin no puede ser revertida.\",\n        },\n      },\n      backendErrors: {\n        ERR_NO_OTHER_WHATSAPP:\n          \"Debe haber al menos una conexin de WhatsApp predeterminada.\",\n        ERR_NO_DEF_WAPP_FOUND:\n          \"No se encontr WhatsApp predeterminado. Verifique la pgina de conexiones.\",\n        ERR_WAPP_NOT_INITIALIZED:\n          \"Esta sesin de WhatsApp no est inicializada. Verifique la pgina de conexiones.\",\n        ERR_WAPP_CHECK_CONTACT:\n          \"No se pudo verificar el contacto de WhatsApp. Verifique la pgina de conexiones.\",\n        ERR_WAPP_INVALID_CONTACT: \"Este no es un nmero de whatsapp vlido.\",\n        ERR_WAPP_DOWNLOAD_MEDIA:\n          \"No se pudieron descargar los medios de WhatsApp. Verifique la pgina de conexiones.\",\n        ERR_INVALID_CREDENTIALS: \"Error de autenticacin. Vuelva a intentarlo.\",\n        ERR_SENDING_WAPP_MSG:\n          \"Error al enviar el mensaje de WhatsApp. Verifique la pgina de conexiones.\",\n        ERR_DELETE_WAPP_MSG: \"No se pudo borrar el mensaje de WhatsApp.\",\n        ERR_OTHER_OPEN_TICKET: \"Ya hay un ticket abierto para este contacto.\",\n        ERR_SESSION_EXPIRED: \"Sesin caducada. Inicie sesin.\",\n        ERR_USER_CREATION_DISABLED:\n          \"La creacin de usuarios fue deshabilitada por el administrador.\",\n        ERR_NO_PERMISSION: \"No tienes permiso para acceder a este recurso.\",\n        ERR_DUPLICATED_CONTACT: \"Ya existe un contacto con este nmero.\",\n        ERR_NO_SETTING_FOUND:\n          \"No se encontr ninguna configuracin con este ID.\",\n        ERR_NO_CONTACT_FOUND: \"No se encontr ningn contacto con este ID.\",\n        ERR_NO_TICKET_FOUND: \"No se encontr ningn ticket con este ID.\",\n        ERR_NO_USER_FOUND: \"No se encontr ningn usuario con este ID.\",\n        ERR_NO_WAPP_FOUND: \"No se encontr WhatsApp con este ID.\",\n        ERR_CREATING_MESSAGE: \"Error al crear el mensaje en la base de datos.\",\n        ERR_CREATING_TICKET: \"Error al crear el ticket en la base de datos.\",\n        ERR_FETCH_WAPP_MSG:\n          \"Error al obtener el mensaje en WhtasApp, tal vez sea demasiado antiguo.\",\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\n          \"Este color ya est en uso, elija otro.\",\n        ERR_WAPP_GREETING_REQUIRED:\n          \"El mensaje de saludo es obligatorio cuando hay ms de una cola.\",\n      },\n    },\n  },\n};\n\nexport { messages };\n","import i18n from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\n\nimport { messages } from \"./languages\";\n\ni18n.use(LanguageDetector).init({\n\tdebug: false,\n\tdefaultNS: [\"translations\"],\n\tfallbackLng: \"en\",\n\tns: [\"translations\"],\n\tresources: messages,\n});\n\nexport { i18n };\n","import { toast } from \"react-toastify\";\nimport { i18n } from \"../translate/i18n\";\n\nconst toastError = err => {\n\tconst errorMsg = err.response?.data?.message || err.response.data.error;\n\tif (errorMsg) {\n\t\tif (i18n.exists(`backendErrors.${errorMsg}`)) {\n\t\t\ttoast.error(i18n.t(`backendErrors.${errorMsg}`), {\n\t\t\t\ttoastId: errorMsg,\n\t\t\t});\n\t\t} else {\n\t\t\ttoast.error(errorMsg, {\n\t\t\t\ttoastId: errorMsg,\n\t\t\t});\n\t\t}\n\t} else {\n\t\ttoast.error(\"An error occurred!\");\n\t}\n};\n\nexport default toastError;\n","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: process.env.REACT_APP_BACKEND_URL,\r\n\twithCredentials: true,\r\n});\r\n\r\nexport default api;\r\n","import { useState, useEffect, useReducer } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport toastError from \"../../errors/toastError\";\n\nimport api from \"../../services/api\";\n\nconst reducer = (state, action) => {\n\tif (action.type === \"LOAD_WHATSAPPS\") {\n\t\tconst whatsApps = action.payload;\n\n\t\treturn [...whatsApps];\n\t}\n\n\tif (action.type === \"UPDATE_WHATSAPPS\") {\n\t\tconst whatsApp = action.payload;\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsApp.id);\n\n\t\tif (whatsAppIndex !== -1) {\n\t\t\tstate[whatsAppIndex] = whatsApp;\n\t\t\treturn [...state];\n\t\t} else {\n\t\t\treturn [whatsApp, ...state];\n\t\t}\n\t}\n\n\tif (action.type === \"UPDATE_SESSION\") {\n\t\tconst whatsApp = action.payload;\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsApp.id);\n\n\t\tif (whatsAppIndex !== -1) {\n\t\t\tstate[whatsAppIndex].status = whatsApp.status;\n\t\t\tstate[whatsAppIndex].updatedAt = whatsApp.updatedAt;\n\t\t\tstate[whatsAppIndex].qrcode = whatsApp.qrcode;\n\t\t\tstate[whatsAppIndex].retries = whatsApp.retries;\n\t\t\treturn [...state];\n\t\t} else {\n\t\t\treturn [...state];\n\t\t}\n\t}\n\n\tif (action.type === \"DELETE_WHATSAPPS\") {\n\t\tconst whatsAppId = action.payload;\n\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsAppId);\n\t\tif (whatsAppIndex !== -1) {\n\t\t\tstate.splice(whatsAppIndex, 1);\n\t\t}\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"RESET\") {\n\t\treturn [];\n\t}\n};\n\nconst useWhatsApps = () => {\n\tconst [whatsApps, dispatch] = useReducer(reducer, []);\n\tconst [loading, setLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tconst fetchSession = async () => {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(\"/whatsapp/\");\n\t\t\t\tdispatch({ type: \"LOAD_WHATSAPPS\", payload: data });\n\t\t\t\tsetLoading(false);\n\t\t\t} catch (err) {\n\t\t\t\tsetLoading(false);\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t};\n\t\tfetchSession();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n\t\tsocket.on(\"whatsapp\", data => {\n\t\t\tif (data.action === \"update\") {\n\t\t\t\tdispatch({ type: \"UPDATE_WHATSAPPS\", payload: data.whatsapp });\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"whatsapp\", data => {\n\t\t\tif (data.action === \"delete\") {\n\t\t\t\tdispatch({ type: \"DELETE_WHATSAPPS\", payload: data.whatsappId });\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"whatsappSession\", data => {\n\t\t\tif (data.action === \"update\") {\n\t\t\t\tdispatch({ type: \"UPDATE_SESSION\", payload: data.session });\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, []);\n\n\treturn { whatsApps, loading };\n};\n\nexport default useWhatsApps;\n","import React, { createContext } from \"react\";\n\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\n\nconst WhatsAppsContext = createContext();\n\nconst WhatsAppsProvider = ({ children }) => {\n\tconst { loading, whatsApps } = useWhatsApps();\n\n\treturn (\n\t\t<WhatsAppsContext.Provider value={{ whatsApps, loading }}>\n\t\t\t{children}\n\t\t</WhatsAppsContext.Provider>\n\t);\n};\n\nexport { WhatsAppsContext, WhatsAppsProvider };\n","import { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport openSocket from \"socket.io-client\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useAuth = () => {\r\n\tconst history = useHistory();\r\n\tconst [isAuth, setIsAuth] = useState(false);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [user, setUser] = useState({});\r\n\r\n\tapi.interceptors.request.use(\r\n\t\tconfig => {\r\n\t\t\tconst token = localStorage.getItem(\"token\");\r\n\t\t\tif (token) {\r\n\t\t\t\tconfig.headers[\"Authorization\"] = `Bearer ${JSON.parse(token)}`;\r\n\t\t\t\tsetIsAuth(true);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\terror => {\r\n\t\t\tPromise.reject(error);\r\n\t\t}\r\n\t);\r\n\r\n\tapi.interceptors.response.use(\r\n\t\tresponse => {\r\n\t\t\treturn response;\r\n\t\t},\r\n\t\tasync error => {\r\n\t\t\tconst originalRequest = error.config;\r\n\t\t\tif (error?.response?.status === 403 && !originalRequest._retry) {\r\n\t\t\t\toriginalRequest._retry = true;\r\n\r\n\t\t\t\tconst { data } = await api.post(\"/auth/refresh_token\");\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tlocalStorage.setItem(\"token\", JSON.stringify(data.token));\r\n\t\t\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn api(originalRequest);\r\n\t\t\t}\r\n\t\t\tif (error?.response?.status === 401) {\r\n\t\t\t\tlocalStorage.removeItem(\"token\");\r\n\t\t\t\tapi.defaults.headers.Authorization = undefined;\r\n\t\t\t\tsetIsAuth(false);\r\n\t\t\t}\r\n\t\t\treturn Promise.reject(error);\r\n\t\t}\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst token = localStorage.getItem(\"token\");\r\n\t\t(async () => {\r\n\t\t\tif (token) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { data } = await api.post(\"/auth/refresh_token\");\r\n\t\t\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\t\t\tsetIsAuth(true);\r\n\t\t\t\t\tsetUser(data.user);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\ttoastError(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\r\n\r\n\t\tsocket.on(\"user\", data => {\r\n\t\t\tif (data.action === \"update\" && data.user.id === user.id) {\r\n\t\t\t\tsetUser(data.user);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [user]);\r\n\r\n\tconst handleLogin = async userData => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst { data } = await api.post(\"/auth/login\", userData);\r\n\t\t\tlocalStorage.setItem(\"token\", JSON.stringify(data.token));\r\n\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\tsetUser(data.user);\r\n\t\t\tsetIsAuth(true);\r\n\t\t\ttoast.success(i18n.t(\"auth.toasts.success\"));\r\n\t\t\thistory.push(\"/tickets\");\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait api.delete(\"/auth/logout\");\r\n\t\t\tsetIsAuth(false);\r\n\t\t\tsetUser({});\r\n\t\t\tlocalStorage.removeItem(\"token\");\r\n\t\t\tapi.defaults.headers.Authorization = undefined;\r\n\t\t\tsetLoading(false);\r\n\t\t\thistory.push(\"/login\");\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn { isAuth, user, loading, handleLogin, handleLogout };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\tconst { loading, user, isAuth, handleLogin, handleLogout } = useAuth();\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider\r\n\t\t\tvalue={{ loading, user, isAuth, handleLogin, handleLogout }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n","const rules = {\n\tuser: {\n\t\tstatic: [],\n\t},\n\n\tadmin: {\n\t\tstatic: [\n\t\t\t\"drawer-admin-items:view\",\n\t\t\t\"tickets-manager:showall\",\n\t\t\t\"user-modal:editProfile\",\n\t\t\t\"user-modal:editQueues\",\n\t\t\t\"ticket-options:deleteTicket\",\n\t\t\t\"contacts-page:deleteContact\",\n\t\t],\n\t},\n};\n\nexport default rules;\n","import rules from \"../../rules\";\n\nconst check = (role, action, data) => {\n\tconst permissions = rules[role];\n\tif (!permissions) {\n\t\t// role is not present in the rules\n\t\treturn false;\n\t}\n\n\tconst staticPermissions = permissions.static;\n\n\tif (staticPermissions && staticPermissions.includes(action)) {\n\t\t// static rule not provided for action\n\t\treturn true;\n\t}\n\n\tconst dynamicPermissions = permissions.dynamic;\n\n\tif (dynamicPermissions) {\n\t\tconst permissionCondition = dynamicPermissions[action];\n\t\tif (!permissionCondition) {\n\t\t\t// dynamic rule not provided for action\n\t\t\treturn false;\n\t\t}\n\n\t\treturn permissionCondition(data);\n\t}\n\treturn false;\n};\n\nconst Can = ({ role, perform, data, yes, no }) =>\n\tcheck(role, perform, data) ? yes() : no();\n\nCan.defaultProps = {\n\tyes: () => null,\n\tno: () => null,\n};\n\nexport { Can };\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { Badge } from \"@material-ui/core\";\r\nimport DashboardOutlinedIcon from \"@material-ui/icons/DashboardOutlined\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SyncAltIcon from \"@material-ui/icons/ImportantDevices\";\r\nimport SettingsOutlinedIcon from \"@material-ui/icons/SettingsOutlined\";\r\nimport PeopleAltOutlinedIcon from \"@material-ui/icons/Group\";\r\nimport ContactPhoneOutlinedIcon from \"@material-ui/icons/ContactPhoneOutlined\";\r\nimport AccountTreeOutlinedIcon from \"@material-ui/icons/Queue\";\r\nimport QuestionAnswerOutlinedIcon from \"@material-ui/icons/QuestionAnswerOutlined\";\r\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\r\nimport EventNoteIcon from \"@material-ui/icons/EventRounded\";\r\n\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport { Can } from \"../components/Can\";\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to, className } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () =>\r\n      React.forwardRef((itemProps, ref) => (\r\n        <RouterLink to={to} ref={ref} {...itemProps} />\r\n      )),\r\n    [to]\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button component={renderLink} className={className}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst MainListItems = (props) => {\r\n  const { drawerClose } = props;\r\n  const { whatsApps } = useContext(WhatsAppsContext);\r\n  const { user } = useContext(AuthContext);\r\n  const [connectionWarning, setConnectionWarning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      if (whatsApps.length > 0) {\r\n        const offlineWhats = whatsApps.filter((whats) => {\r\n          return (\r\n            whats.status === \"qrcode\" ||\r\n            whats.status === \"PAIRING\" ||\r\n            whats.status === \"DISCONNECTED\" ||\r\n            whats.status === \"TIMEOUT\" ||\r\n            whats.status === \"OPENING\"\r\n          );\r\n        });\r\n        if (offlineWhats.length > 0) {\r\n          setConnectionWarning(true);\r\n        } else {\r\n          setConnectionWarning(false);\r\n        }\r\n      }\r\n    }, 2000);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [whatsApps]);\r\n\r\n  return (\r\n    <div onClick={drawerClose}>\r\n      <ListItemLink\r\n        to=\"/\"\r\n        primary=\"Dashboard\"\r\n        icon={<DashboardOutlinedIcon />}\r\n      />\r\n      <ListItemLink\r\n        to=\"/connections\"\r\n        primary={i18n.t(\"mainDrawer.listItems.connections\")}\r\n        icon={\r\n          <Badge badgeContent={connectionWarning ? \"!\" : 0} color=\"error\">\r\n            <SyncAltIcon />\r\n          </Badge>\r\n        }\r\n      />\r\n      <ListItemLink\r\n        to=\"/tickets\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tickets\")}\r\n        icon={<WhatsAppIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/contacts\"\r\n        primary={i18n.t(\"mainDrawer.listItems.contacts\")}\r\n        icon={<ContactPhoneOutlinedIcon />}\r\n      />\r\n      <ListItemLink\r\n        to=\"/quickAnswers\"\r\n        primary={i18n.t(\"mainDrawer.listItems.quickAnswers\")}\r\n        icon={<QuestionAnswerOutlinedIcon />}\r\n      />\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"drawer-admin-items:view\"\r\n        yes={() => (\r\n          <>\r\n            <Divider />\r\n            <ListSubheader inset>\r\n              {i18n.t(\"mainDrawer.listItems.administration\")}\r\n            </ListSubheader>\r\n            <ListItemLink\r\n              to=\"/users\"\r\n              primary={i18n.t(\"mainDrawer.listItems.users\")}\r\n              icon={<PeopleAltOutlinedIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/queues\"\r\n              primary={i18n.t(\"mainDrawer.listItems.queues\")}\r\n              icon={<AccountTreeOutlinedIcon />}\r\n            />\r\n             <ListItemLink\r\n              to=\"/campaigns\"\r\n              primary={i18n.t(\"mainDrawer.listItems.campaings\")}\r\n              icon={<EventNoteIcon />}\r\n            />\r\n             <ListItemLink\r\n              to=\"/\"\r\n              primary={i18n.t(\"mainDrawer.listItems.reports\")}\r\n              icon={<AssignmentIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/settings\"\r\n              primary={i18n.t(\"mainDrawer.listItems.settings\")}\r\n              icon={<SettingsOutlinedIcon />}\r\n            />\r\n          </>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainListItems;\r\n","import React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport { CircularProgress, Button } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n\tbutton: {\n\t\tposition: \"relative\",\n\t},\n\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: \"absolute\",\n\t\ttop: \"50%\",\n\t\tleft: \"50%\",\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n}));\n\nconst ButtonWithSpinner = ({ loading, children, ...rest }) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Button className={classes.button} disabled={loading} {...rest}>\n\t\t\t{children}\n\t\t\t{loading && (\n\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\n\t\t\t)}\n\t\t</Button>\n\t);\n};\n\nexport default ButtonWithSpinner;\n","import React from \"react\";\nimport Markdown from \"markdown-to-jsx\";\n\nconst elements = [\n\t\"a\",\n\t\"abbr\",\n\t\"address\",\n\t\"area\",\n\t\"article\",\n\t\"aside\",\n\t\"audio\",\n\t\"b\",\n\t\"base\",\n\t\"bdi\",\n\t\"bdo\",\n\t\"big\",\n\t\"blockquote\",\n\t\"body\",\n\t\"br\",\n\t\"button\",\n\t\"canvas\",\n\t\"caption\",\n\t\"cite\",\n\t\"code\",\n\t\"col\",\n\t\"colgroup\",\n\t\"data\",\n\t\"datalist\",\n\t\"dd\",\n\t\"del\",\n\t\"details\",\n\t\"dfn\",\n\t\"dialog\",\n\t\"div\",\n\t\"dl\",\n\t\"dt\",\n\t\"em\",\n\t\"embed\",\n\t\"fieldset\",\n\t\"figcaption\",\n\t\"figure\",\n\t\"footer\",\n\t\"form\",\n\t\"h1\",\n\t\"h2\",\n\t\"h3\",\n\t\"h4\",\n\t\"h5\",\n\t\"h6\",\n\t\"head\",\n\t\"header\",\n\t\"hgroup\",\n\t\"hr\",\n\t\"html\",\n\t\"i\",\n\t\"iframe\",\n\t\"img\",\n\t\"input\",\n\t\"ins\",\n\t\"kbd\",\n\t\"keygen\",\n\t\"label\",\n\t\"legend\",\n\t\"li\",\n\t\"link\",\n\t\"main\",\n\t\"map\",\n\t\"mark\",\n\t\"marquee\",\n\t\"menu\",\n\t\"menuitem\",\n\t\"meta\",\n\t\"meter\",\n\t\"nav\",\n\t\"noscript\",\n\t\"object\",\n\t\"ol\",\n\t\"optgroup\",\n\t\"option\",\n\t\"output\",\n\t\"p\",\n\t\"param\",\n\t\"picture\",\n\t\"pre\",\n\t\"progress\",\n\t\"q\",\n\t\"rp\",\n\t\"rt\",\n\t\"ruby\",\n\t\"s\",\n\t\"samp\",\n\t\"script\",\n\t\"section\",\n\t\"select\",\n\t\"small\",\n\t\"source\",\n\t\"span\",\n\t\"strong\",\n\t\"style\",\n\t\"sub\",\n\t\"summary\",\n\t\"sup\",\n\t\"table\",\n\t\"tbody\",\n\t\"td\",\n\t\"textarea\",\n\t\"tfoot\",\n\t\"th\",\n\t\"thead\",\n\t\"time\",\n\t\"title\",\n\t\"tr\",\n\t\"track\",\n\t\"u\",\n\t\"ul\",\n\t\"var\",\n\t\"video\",\n\t\"wbr\",\n\n\t// SVG\n\t\"circle\",\n\t\"clipPath\",\n\t\"defs\",\n\t\"ellipse\",\n\t\"foreignObject\",\n\t\"g\",\n\t\"image\",\n\t\"line\",\n\t\"linearGradient\",\n\t\"marker\",\n\t\"mask\",\n\t\"path\",\n\t\"pattern\",\n\t\"polygon\",\n\t\"polyline\",\n\t\"radialGradient\",\n\t\"rect\",\n\t\"stop\",\n\t\"svg\",\n\t\"text\",\n\t\"tspan\",\n];\n\nconst allowedElements = [\"a\", \"b\", \"strong\", \"em\", \"u\", \"code\", \"del\"];\n\nconst CustomLink = ({ children, ...props }) => (\n\t<a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t{children}\n\t</a>\n);\n\nconst MarkdownWrapper = ({ children }) => {\n\tconst boldRegex = /\\*(.*?)\\*/g;\n\tconst tildaRegex = /~(.*?)~/g;\n\t\n\tif(children && children.includes('BEGIN:VCARD'))\n\t\t//children = \"Diga ol ao seu novo contato clicando em *conversar*!\";\n\t\tchildren = null;\n\t\n\tif(children && children.includes('data:image/'))\n\t\tchildren = null;\n\t\n\tif (children && boldRegex.test(children)) {\n\t\tchildren = children.replace(boldRegex, \"**$1**\");\n\t}\n\tif (children && tildaRegex.test(children)) {\n\t\tchildren = children.replace(tildaRegex, \"~~$1~~\");\n\t}\n\n\tconst options = React.useMemo(() => {\n\t\tconst markdownOptions = {\n\t\t\tdisableParsingRawHTML: true,\n\t\t\tforceInline: true,\n\t\t\toverrides: {\n\t\t\t\ta: { component: CustomLink },\n\t\t\t},\n\t\t};\n\n\t\telements.forEach(element => {\n\t\t\tif (!allowedElements.includes(element)) {\n\t\t\t\tmarkdownOptions.overrides[element] = el => el.children || null;\n\t\t\t}\n\t\t});\n\n\t\treturn markdownOptions;\n\t}, []);\n\n\tif (!children) return null;\n\t\n\treturn <Markdown options={options}>{children}</Markdown>;\n};\n\nexport default MarkdownWrapper;","import React, { useState, useEffect, useRef, useContext } from \"react\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { parseISO, format, isSameDay } from \"date-fns\";\nimport clsx from \"clsx\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Badge from \"@material-ui/core/Badge\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport { Tooltip } from \"@material-ui/core\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport toastError from \"../../errors/toastError\";\n\nconst useStyles = makeStyles(theme => ({\n\tticket: {\n\t\tposition: \"relative\",\n\t},\n\n\tpendingTicket: {\n\t\tcursor: \"unset\",\n\t},\n\n\tnoTicketsDiv: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100px\",\n\t\tmargin: 40,\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\n\tnoTicketsText: {\n\t\ttextAlign: \"center\",\n\t\tcolor: \"rgb(104, 121, 146)\",\n\t\tfontSize: \"14px\",\n\t\tlineHeight: \"1.4\",\n\t},\n\n\tnoTicketsTitle: {\n\t\ttextAlign: \"center\",\n\t\tfontSize: \"16px\",\n\t\tfontWeight: \"600\",\n\t\tmargin: \"0px\",\n\t},\n\n\tcontactNameWrapper: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\n\tlastMessageTime: {\n\t\tjustifySelf: \"flex-end\",\n\t},\n\n\tclosedBadge: {\n\t\talignSelf: \"center\",\n\t\tjustifySelf: \"flex-end\",\n\t\tmarginRight: 32,\n\t\tmarginLeft: \"auto\",\n\t},\n\n\tcontactLastMessage: {\n\t\tpaddingRight: 20,\n\t},\n\n\tnewMessagesCount: {\n\t\talignSelf: \"center\",\n\t\tmarginRight: 8,\n\t\tmarginLeft: \"auto\",\n\t},\n\n\tbadgeStyle: {\n\t\tcolor: \"white\",\n\t\tbackgroundColor: green[500],\n\t},\n\n\tacceptButton: {\n\t\tposition: \"absolute\",\n\t\tleft: \"50%\",\n\t},\n\n\tticketQueueColor: {\n\t\tflex: \"none\",\n\t\twidth: \"8px\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\ttop: \"0%\",\n\t\tleft: \"0%\",\n\t},\n}));\n\nconst TicketListItem = ({ ticket }) => {\n\tconst classes = useStyles();\n\tconst history = useHistory();\n\tconst [loading, setLoading] = useState(false);\n\tconst { ticketId } = useParams();\n\tconst isMounted = useRef(true);\n\tconst { user } = useContext(AuthContext);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, []);\n\n\tconst handleAcepptTicket = async id => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tawait api.put(`/tickets/${id}`, {\n\t\t\t\tstatus: \"open\",\n\t\t\t\tuserId: user?.id,\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\ttoastError(err);\n\t\t}\n\t\tif (isMounted.current) {\n\t\t\tsetLoading(false);\n\t\t}\n\t\thistory.push(`/tickets/${id}`);\n\t};\n\n\tconst handleSelectTicket = id => {\n\t\thistory.push(`/tickets/${id}`);\n\t};\n\n\treturn (\n\t\t<React.Fragment key={ticket.id}>\n\t\t\t<ListItem\n\t\t\t\tdense\n\t\t\t\tbutton\n\t\t\t\tonClick={e => {\n\t\t\t\t\tif (ticket.status === \"pending\") return;\n\t\t\t\t\thandleSelectTicket(ticket.id);\n\t\t\t\t}}\n\t\t\t\tselected={ticketId && +ticketId === ticket.id}\n\t\t\t\tclassName={clsx(classes.ticket, {\n\t\t\t\t\t[classes.pendingTicket]: ticket.status === \"pending\",\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<Tooltip\n\t\t\t\t\tarrow\n\t\t\t\t\tplacement=\"right\"\n\t\t\t\t\ttitle={ticket.queue?.name || \"Sem fila\"}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{ backgroundColor: ticket.queue?.color || \"#7C7C7C\" }}\n\t\t\t\t\t\tclassName={classes.ticketQueueColor}\n\t\t\t\t\t></span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Avatar src={ticket?.contact?.profilePicUrl} />\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tdisableTypography\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<span className={classes.contactNameWrapper}>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ticket.contact.name}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{ticket.status === \"closed\" && (\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tclassName={classes.closedBadge}\n\t\t\t\t\t\t\t\t\tbadgeContent={\"closed\"}\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{ticket.lastMessage && (\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tclassName={classes.lastMessageTime}\n\t\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\t\tcolor=\"textSecondary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{isSameDay(parseISO(ticket.updatedAt), new Date()) ? (\n\t\t\t\t\t\t\t\t\t\t<>{format(parseISO(ticket.updatedAt), \"HH:mm\")}</>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<>{format(parseISO(ticket.updatedAt), \"dd/MM/yyyy\")}</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t}\n\t\t\t\t\tsecondary={\n\t\t\t\t\t\t<span className={classes.contactNameWrapper}>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tclassName={classes.contactLastMessage}\n\t\t\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\tcolor=\"textSecondary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ticket.lastMessage ? (\n\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{ticket.lastMessage}</MarkdownWrapper>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tclassName={classes.newMessagesCount}\n\t\t\t\t\t\t\t\tbadgeContent={ticket.unreadMessages}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tbadge: classes.badgeStyle,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ticket.status === \"pending\" && (\n\t\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tclassName={classes.acceptButton}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tonClick={e => handleAcepptTicket(ticket.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"ticketsList.buttons.accept\")}\n\t\t\t\t\t</ButtonWithSpinner>\n\t\t\t\t)}\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\n\t\t</React.Fragment>\n\t);\n};\n\nexport default TicketListItem;\n","import { useState, useEffect } from \"react\";\nimport toastError from \"../../errors/toastError\";\n\nimport api from \"../../services/api\";\n\nconst useTickets = ({\n    searchParam,\n    pageNumber,\n    status,\n    date,\n    showAll,\n    queueIds,\n    withUnreadMessages,\n}) => {\n    const [loading, setLoading] = useState(true);\n    const [hasMore, setHasMore] = useState(false);\n    const [tickets, setTickets] = useState([]);\n    const [count, setCount] = useState(0);\n\n    useEffect(() => {\n        setLoading(true);\n        const delayDebounceFn = setTimeout(() => {\n            const fetchTickets = async() => {\n                try {\n                    const { data } = await api.get(\"/tickets\", {\n                        params: {\n                            searchParam,\n                            pageNumber,\n                            status,\n                            date,\n                            showAll,\n                            queueIds,\n                            withUnreadMessages,\n                        },\n                    })\n                    setTickets(data.tickets)\n\n                    let horasFecharAutomaticamente = process.env.REACT_APP_HOURS_CLOSE_TICKETS_AUTO\n\n                    if (status === \"open\" && horasFecharAutomaticamente && horasFecharAutomaticamente !== \"\" &&\n                        horasFecharAutomaticamente !== \"0\" && Number(horasFecharAutomaticamente) > 0) {\n\n                        let dataLimite = new Date()\n                        dataLimite.setHours(dataLimite.getHours() - Number(horasFecharAutomaticamente))\n\n                        data.tickets.forEach(ticket => {\n                            if (ticket.status !== \"closed\") {\n                                let dataUltimaInteracaoChamado = new Date(ticket.updatedAt)\n                                if (dataUltimaInteracaoChamado < dataLimite)\n                                    closeTicket(ticket)\n                            }\n                        })\n                    }\n\n                    setHasMore(data.hasMore)\n                    setCount(data.count)\n                    setLoading(false)\n                } catch (err) {\n                    setLoading(false)\n                    toastError(err)\n                }\n            }\n\n            const closeTicket = async(ticket) => {\n                await api.put(`/tickets/${ticket.id}`, {\n                    status: \"closed\",\n                    userId: ticket.userId || null,\n                })\n            }\n\n            fetchTickets()\n        }, 500)\n        return () => clearTimeout(delayDebounceFn)\n    }, [\n        searchParam,\n        pageNumber,\n        status,\n        date,\n        showAll,\n        queueIds,\n        withUnreadMessages,\n    ])\n\n    return { tickets, loading, hasMore, count };\n};\n\nexport default useTickets;","import React, { useState, useRef, useEffect, useContext } from \"react\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport openSocket from \"socket.io-client\";\nimport useSound from \"use-sound\";\n\nimport Popover from \"@material-ui/core/Popover\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Badge from \"@material-ui/core/Badge\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport { i18n } from \"../../translate/i18n\";\nimport useTickets from \"../../hooks/useTickets\";\nimport alertSound from \"../../assets/sound.mp3\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles(theme => ({\n\ttabContainer: {\n\t\toverflowY: \"auto\",\n\t\tmaxHeight: 350,\n\t\t...theme.scrollbarStyles,\n\t},\n\tpopoverPaper: {\n\t\twidth: \"100%\",\n\t\tmaxWidth: 350,\n\t\tmarginLeft: theme.spacing(2),\n\t\tmarginRight: theme.spacing(1),\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tmaxWidth: 270,\n\t\t},\n\t},\n\tnoShadow: {\n\t\tboxShadow: \"none !important\",\n\t},\n}));\n\nconst NotificationsPopOver = () => {\n\tconst classes = useStyles();\n\n\tconst history = useHistory();\n\tconst { user } = useContext(AuthContext);\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\n\tconst ticketIdRef = useRef(ticketIdUrl);\n\tconst anchorEl = useRef();\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [notifications, setNotifications] = useState([]);\n\n\tconst [, setDesktopNotifications] = useState([]);\n\n\tconst { tickets } = useTickets({ withUnreadMessages: \"true\" });\n\tconst [play] = useSound(alertSound);\n\tconst soundAlertRef = useRef();\n\n\tconst historyRef = useRef(history);\n\n\tuseEffect(() => {\n\t\tsoundAlertRef.current = play;\n\n\t\tif (!(\"Notification\" in window)) {\n\t\t\tconsole.log(\"This browser doesn't support notifications\");\n\t\t} else {\n\t\t\tNotification.requestPermission();\n\t\t}\n\t}, [play]);\n\n\tuseEffect(() => {\n\t\tsetNotifications(tickets);\n\t}, [tickets]);\n\n\tuseEffect(() => {\n\t\tticketIdRef.current = ticketIdUrl;\n\t}, [ticketIdUrl]);\n\n\tuseEffect(() => {\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n\t\tsocket.on(\"connect\", () => socket.emit(\"joinNotification\"));\n\n\t\tsocket.on(\"ticket\", data => {\n\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\n\t\t\t\tsetNotifications(prevState => {\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\n\t\t\t\t\tif (ticketIndex !== -1) {\n\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\n\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t}\n\t\t\t\t\treturn prevState;\n\t\t\t\t});\n\n\t\t\t\tsetDesktopNotifications(prevState => {\n\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\t\t\tn => n.tag === String(data.ticketId)\n\t\t\t\t\t);\n\t\t\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\t\t\tprevState[notfiticationIndex].close();\n\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\n\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t}\n\t\t\t\t\treturn prevState;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"appMessage\", data => {\n\t\t\tif (\n\t\t\t\tdata.action === \"create\" &&\n\t\t\t\t!data.message.read &&\n\t\t\t\t(data.ticket.userId === user?.id || !data.ticket.userId)\n\t\t\t) {\n\t\t\t\tsetNotifications(prevState => {\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticket.id);\n\t\t\t\t\tif (ticketIndex !== -1) {\n\t\t\t\t\t\tprevState[ticketIndex] = data.ticket;\n\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t}\n\t\t\t\t\treturn [data.ticket, ...prevState];\n\t\t\t\t});\n\n\t\t\t\tconst shouldNotNotificate =\n\t\t\t\t\t(data.message.ticketId === ticketIdRef.current &&\n\t\t\t\t\t\tdocument.visibilityState === \"visible\") ||\n\t\t\t\t\t(data.ticket.userId && data.ticket.userId !== user?.id) ||\n\t\t\t\t\tdata.ticket.isGroup;\n\n\t\t\t\tif (shouldNotNotificate) return;\n\n\t\t\t\thandleNotifications(data);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, [user]);\n\n\tconst handleNotifications = data => {\n\t\tconst { message, contact, ticket } = data;\n\n\t\tconst options = {\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\n\t\t\ticon: contact.profilePicUrl,\n\t\t\ttag: ticket.id,\n\t\t\trenotify: true,\n\t\t};\n\n\t\tconst notification = new Notification(\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\n\t\t\toptions\n\t\t);\n\n\t\tnotification.onclick = e => {\n\t\t\te.preventDefault();\n\t\t\twindow.focus();\n\t\t\thistoryRef.current.push(`/tickets/${ticket.id}`);\n\t\t};\n\n\t\tsetDesktopNotifications(prevState => {\n\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\tn => n.tag === notification.tag\n\t\t\t);\n\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\tprevState[notfiticationIndex] = notification;\n\t\t\t\treturn [...prevState];\n\t\t\t}\n\t\t\treturn [notification, ...prevState];\n\t\t});\n\n\t\tsoundAlertRef.current();\n\t};\n\n\tconst handleClick = () => {\n\t\tsetIsOpen(prevState => !prevState);\n\t};\n\n\tconst handleClickAway = () => {\n\t\tsetIsOpen(false);\n\t};\n\n\tconst NotificationTicket = ({ children }) => {\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<IconButton\n\t\t\t\tonClick={handleClick}\n\t\t\t\tref={anchorEl}\n\t\t\t\taria-label=\"Open Notifications\"\n\t\t\t\tcolor=\"inherit\"\n\t\t\t>\n\t\t\t\t<Badge badgeContent={notifications.length} color=\"secondary\">\n\t\t\t\t\t<ChatIcon />\n\t\t\t\t</Badge>\n\t\t\t</IconButton>\n\t\t\t<Popover\n\t\t\t\tdisableScrollLock\n\t\t\t\topen={isOpen}\n\t\t\t\tanchorEl={anchorEl.current}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\n\t\t\t\tonClose={handleClickAway}\n\t\t\t>\n\t\t\t\t<List dense className={classes.tabContainer}>\n\t\t\t\t\t{notifications.length === 0 ? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tnotifications.map(ticket => (\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\n\t\t\t\t\t\t\t</NotificationTicket>\n\t\t\t\t\t\t))\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</Popover>\n\t\t</>\n\t);\n};\n\nexport default NotificationsPopOver;","import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Chip from \"@material-ui/core/Chip\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\n\nconst useStyles = makeStyles(theme => ({\n\tchips: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\tchip: {\n\t\tmargin: 2,\n\t},\n}));\n\nconst QueueSelect = ({ selectedQueueIds, onChange }) => {\n\tconst classes = useStyles();\n\tconst [queues, setQueues] = useState([]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(\"/queue\");\n\t\t\t\tsetQueues(data);\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tconst handleChange = e => {\n\t\tonChange(e.target.value);\n\t};\n\n\treturn (\n\t\t<div style={{ marginTop: 6 }}>\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\n\t\t\t\t<InputLabel>{i18n.t(\"queueSelect.inputLabel\")}</InputLabel>\n\t\t\t\t<Select\n\t\t\t\t\tmultiple\n\t\t\t\t\tlabelWidth={60}\n\t\t\t\t\tvalue={selectedQueueIds}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t}}\n\t\t\t\t\trenderValue={selected => (\n\t\t\t\t\t\t<div className={classes.chips}>\n\t\t\t\t\t\t\t{selected?.length > 0 &&\n\t\t\t\t\t\t\t\tselected.map(id => {\n\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\n\t\t\t\t\t\t\t\t\treturn queue ? (\n\t\t\t\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null;\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{queues.map(queue => (\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\n\t\t\t\t\t\t\t{queue.name}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t</Select>\n\t\t\t</FormControl>\n\t\t</div>\n\t);\n};\n\nexport default QueueSelect;\n","import React, { useState, useEffect, useContext } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport {\n\tButton,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogTitle,\n\tCircularProgress,\n\tSelect,\n\tInputLabel,\n\tMenuItem,\n\tFormControl,\n\tTextField,\n\tInputAdornment,\n\tIconButton\n  } from '@material-ui/core';\n\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport QueueSelect from \"../QueueSelect\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Can } from \"../Can\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\tmultFieldLine: {\n\t\tdisplay: \"flex\",\n\t\t\"& > *:not(:last-child)\": {\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t},\n\n\tbtnWrapper: {\n\t\tposition: \"relative\",\n\t},\n\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: \"absolute\",\n\t\ttop: \"50%\",\n\t\tleft: \"50%\",\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n\tformControl: {\n\t\tmargin: theme.spacing(1),\n\t\tminWidth: 120,\n\t},\n}));\n\nconst UserSchema = Yup.object().shape({\n\tname: Yup.string()\n\t\t.min(2, \"Too Short!\")\n\t\t.max(50, \"Too Long!\")\n\t\t.required(\"Required\"),\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\n});\n\nconst UserModal = ({ open, onClose, userId }) => {\n\tconst classes = useStyles();\n\n\tconst initialState = {\n\t\tname: \"\",\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\tprofile: \"user\",\n\t};\n\n\tconst { user: loggedInUser } = useContext(AuthContext);\n\n\tconst [user, setUser] = useState(initialState);\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\n\tconst [showPassword, setShowPassword] = useState(false);\n\n\n\tuseEffect(() => {\n\t\tconst fetchUser = async () => {\n\t\t\tif (!userId) return;\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(`/users/${userId}`);\n\t\t\t\tsetUser(prevState => {\n\t\t\t\t\treturn { ...prevState, ...data };\n\t\t\t\t});\n\t\t\t\tconst userQueueIds = data.queues?.map(queue => queue.id);\n\t\t\t\tsetSelectedQueueIds(userQueueIds);\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t};\n\n\t\tfetchUser();\n\t}, [userId, open]);\n\n\tconst handleClose = () => {\n\t\tonClose();\n\t\tsetUser(initialState);\n\t};\n\n\tconst handleSaveUser = async values => {\n\t\tconst userData = { ...values, queueIds: selectedQueueIds };\n\t\ttry {\n\t\t\tif (userId) {\n\t\t\t\tawait api.put(`/users/${userId}`, userData);\n\t\t\t} else {\n\t\t\t\tawait api.post(\"/users\", userData);\n\t\t\t}\n\t\t\ttoast.success(i18n.t(\"userModal.success\"));\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t\thandleClose();\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tmaxWidth=\"xs\"\n\t\t\t\tfullWidth\n\t\t\t\tscroll=\"paper\"\n\t\t\t>\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\n\t\t\t\t\t{userId\n\t\t\t\t\t\t? `${i18n.t(\"userModal.title.edit\")}`\n\t\t\t\t\t\t: `${i18n.t(\"userModal.title.add\")}`}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={user}\n\t\t\t\t\tenableReinitialize={true}\n\t\t\t\t\tvalidationSchema={UserSchema}\n\t\t\t\t\tonSubmit={(values, actions) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\thandleSaveUser(values);\n\t\t\t\t\t\t\tactions.setSubmitting(false);\n\t\t\t\t\t\t}, 400);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.name\")}\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.password\")}\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\n\t\t\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword((e) => !e)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityOff /> : <Visibility />}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.email\")}\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.formControl}\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Can\n\t\t\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\n\t\t\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\n\t\t\t\t\t\t\t\t\t\t\tyes={() => (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"profile-selection-input-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.profile\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.profile\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"profile\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"profile-selection-label\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"profile-selection\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"admin\">Admin</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"user\">User</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Can\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editQueues\"\n\t\t\t\t\t\t\t\t\tyes={() => (\n\t\t\t\t\t\t\t\t\t\t<QueueSelect\n\t\t\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\n\t\t\t\t\t\t\t\t\t\t\tonChange={values => setSelectedQueueIds(values)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.buttons.cancel\")}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{userId\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"userModal.buttons.okEdit\")}`\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"userModal.buttons.okAdd\")}`}\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)}\n\t\t\t\t</Formik>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nexport default UserModal;\n","import React from \"react\";\n\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\tbackdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: \"#fff\",\n\t},\n}));\n\nconst BackdropLoading = () => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Backdrop className={classes.backdrop} open={true}>\n\t\t\t<CircularProgress color=\"inherit\" />\n\t\t</Backdrop>\n\t);\n};\n\nexport default BackdropLoading;\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nimport {\r\n  makeStyles,\r\n  Drawer,\r\n  AppBar,\r\n  Toolbar,\r\n  List,\r\n  Typography,\r\n  Divider,\r\n  MenuItem,\r\n  IconButton,\r\n  Menu,\r\n} from \"@material-ui/core\";\r\n\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\n\r\nimport MainListItems from \"./MainListItems\";\r\nimport NotificationsPopOver from \"../components/NotificationsPopOver\";\r\nimport UserModal from \"../components/UserModal\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\nimport { i18n } from \"../translate/i18n\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"calc(100vh - 56px)\",\r\n    },\r\n  },\r\n\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 8px\",\r\n    minHeight: \"48px\",\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: {\r\n    minHeight: \"48px\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n}));\r\n\r\nconst LoggedInLayout = ({ children }) => {\r\n  const classes = useStyles();\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const { handleLogout, loading } = useContext(AuthContext);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [drawerVariant, setDrawerVariant] = useState(\"permanent\");\r\n  const { user } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth > 600) {\r\n      setDrawerOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerVariant(\"temporary\");\r\n    } else {\r\n      setDrawerVariant(\"permanent\");\r\n    }\r\n  }, [drawerOpen]);\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setMenuOpen(true);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const handleOpenUserModal = () => {\r\n    setUserModalOpen(true);\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  const drawerClose = () => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <BackdropLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Drawer\r\n        variant={drawerVariant}\r\n        className={drawerOpen ? classes.drawerPaper : classes.drawerPaperClose}\r\n        classes={{\r\n          paper: clsx(\r\n            classes.drawerPaper,\r\n            !drawerOpen && classes.drawerPaperClose\r\n          ),\r\n        }}\r\n        open={drawerOpen}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <IconButton onClick={() => setDrawerOpen(!drawerOpen)}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          <MainListItems drawerClose={drawerClose} />\r\n        </List>\r\n        <Divider />\r\n      </Drawer>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={() => setUserModalOpen(false)}\r\n        userId={user?.id}\r\n      />\r\n      <AppBar\r\n        position=\"absolute\"\r\n        className={clsx(classes.appBar, drawerOpen && classes.appBarShift)}\r\n        color={process.env.NODE_ENV === \"development\" ? \"primary\" : \"primary\"}\r\n      >\r\n        <Toolbar variant=\"dense\" className={classes.toolbar}>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={() => setDrawerOpen(!drawerOpen)}\r\n            className={clsx(\r\n              classes.menuButton,\r\n              drawerOpen && classes.menuButtonHidden\r\n            )}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography\r\n            component=\"h1\"\r\n            variant=\"h6\"\r\n            color=\"inherit\"\r\n            noWrap\r\n            className={classes.title}\r\n          >\r\n            OfferHouseS\r\n          </Typography>\r\n          {user.id && <NotificationsPopOver />}\r\n\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              color=\"inherit\"\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              getContentAnchorEl={null}\r\n              anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\",\r\n              }}\r\n              transformOrigin={{\r\n                vertical: \"top\",\r\n                horizontal: \"right\",\r\n              }}\r\n              open={menuOpen}\r\n              onClose={handleCloseMenu}\r\n            >\r\n              <MenuItem onClick={handleOpenUserModal}>\r\n                {i18n.t(\"mainDrawer.appBar.user.profile\")}\r\n              </MenuItem>\r\n              <MenuItem onClick={handleClickLogout}>\r\n                {i18n.t(\"mainDrawer.appBar.user.logout\")}\r\n              </MenuItem>\r\n            </Menu>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.content}>\r\n        <div className={classes.appBarSpacer} />\r\n\r\n        {children ? children : null}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedInLayout;\r\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst Title = props => {\n\treturn (\n\t\t<Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\n\t\t\t{props.children}\n\t\t</Typography>\n\t);\n};\n\nexport default Title;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport {\n\tBarChart,\n\tCartesianGrid,\n\tBar,\n\tXAxis,\n\tYAxis,\n\tLabel,\n\tResponsiveContainer,\n} from \"recharts\";\nimport { startOfHour, parseISO, format } from \"date-fns\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport Title from \"./Title\";\nimport useTickets from \"../../hooks/useTickets\";\n\nconst Chart = () => {\n\tconst theme = useTheme();\n\n\tconst date = useRef(new Date().toISOString());\n\tconst { tickets } = useTickets({ date: date.current });\n\n\tconst [chartData, setChartData] = useState([\n\t\t{ time: \"08:00\", amount: 0 },\n\t\t{ time: \"09:00\", amount: 0 },\n\t\t{ time: \"10:00\", amount: 0 },\n\t\t{ time: \"11:00\", amount: 0 },\n\t\t{ time: \"12:00\", amount: 0 },\n\t\t{ time: \"13:00\", amount: 0 },\n\t\t{ time: \"14:00\", amount: 0 },\n\t\t{ time: \"15:00\", amount: 0 },\n\t\t{ time: \"16:00\", amount: 0 },\n\t\t{ time: \"17:00\", amount: 0 },\n\t\t{ time: \"18:00\", amount: 0 },\n\t\t{ time: \"19:00\", amount: 0 },\n\t]);\n\n\tuseEffect(() => {\n\t\tsetChartData(prevState => {\n\t\t\tlet aux = [...prevState];\n\n\t\t\taux.forEach(a => {\n\t\t\t\ttickets.forEach(ticket => {\n\t\t\t\t\tformat(startOfHour(parseISO(ticket.createdAt)), \"HH:mm\") === a.time &&\n\t\t\t\t\t\ta.amount++;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn aux;\n\t\t});\n\t}, [tickets]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Title>{`${i18n.t(\"dashboard.charts.perDay.title\")}${\n\t\t\t\ttickets.length\n\t\t\t}`}</Title>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<BarChart\n\t\t\t\t\tdata={chartData}\n\t\t\t\t\tbarSize={40}\n\t\t\t\t\twidth={730}\n\t\t\t\t\theight={250}\n\t\t\t\t\tmargin={{\n\t\t\t\t\t\ttop: 16,\n\t\t\t\t\t\tright: 16,\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\tleft: 24,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t<XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\n\t\t\t\t\t<YAxis\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tallowDecimals={false}\n\t\t\t\t\t\tstroke={theme.palette.text.secondary}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\tangle={270}\n\t\t\t\t\t\t\tposition=\"left\"\n\t\t\t\t\t\t\tstyle={{ textAnchor: \"middle\", fill: theme.palette.text.primary }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTickets\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</YAxis>\n\t\t\t\t\t<Bar dataKey=\"amount\" fill={theme.palette.primary.main} />\n\t\t\t\t</BarChart>\n\t\t\t</ResponsiveContainer>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default Chart;\n","import React, { useContext } from \"react\"\r\n\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport Container from \"@material-ui/core/Container\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport useTickets from \"../../hooks/useTickets\"\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport Chart from \"./Chart\"\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tpaddingTop: theme.spacing(4),\r\n\t\tpaddingBottom: theme.spacing(4),\r\n\t},\r\n\tfixedHeightPaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: 240,\r\n\t},\r\n\tcustomFixedHeightPaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: 120,\r\n\t},\r\n\tcustomFixedHeightPaperLg: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: \"100%\",\r\n\t},\r\n}))\r\n\r\nconst Dashboard = () => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst { user } = useContext(AuthContext);\r\n\tvar userQueueIds = [];\r\n\r\n\tif (user.queues && user.queues.length > 0) {\r\n\t\tuserQueueIds = user.queues.map(q => q.id);\r\n\t}\r\n\r\n\tconst GetTickets = (status, showAll, withUnreadMessages) => {\r\n\r\n\t\tconst { count } = useTickets({\r\n\t\t\tstatus: status,\r\n\t\t\tshowAll: showAll,\r\n\t\t\twithUnreadMessages: withUnreadMessages,\r\n\t\t\tqueueIds: JSON.stringify(userQueueIds)\r\n\t\t});\r\n\t\treturn count;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Container maxWidth=\"lg\" className={classes.container}>\r\n\t\t\t\t<Grid container spacing={3}>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.inAttendance.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"open\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.waiting.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"pending\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.closed.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"closed\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Paper className={classes.fixedHeightPaper}>\r\n\t\t\t\t\t\t\t<Chart />\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Container>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, FieldArray, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactModal = ({ open, onClose, contactId, initialValues, onSave }) => {\r\n\tconst classes = useStyles();\r\n\tconst isMounted = useRef(true);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tnumber: \"\",\r\n\t\temail: \"\",\r\n\t};\r\n\r\n\tconst [contact, setContact] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchContact = async () => {\r\n\t\t\tif (initialValues) {\r\n\t\t\t\tsetContact(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...initialValues };\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!contactId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/contacts/${contactId}`);\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tsetContact(data);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchContact();\r\n\t}, [contactId, open, initialValues]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetContact(initialState);\r\n\t};\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contactId) {\r\n\t\t\t\tawait api.put(`/contacts/${contactId}`, values);\r\n\t\t\t\thandleClose();\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t\thandleClose();\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t? `${i18n.t(\"contactModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"contactModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={contact}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ContactSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveContact(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, errors, touched, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.mainInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.number\")}\r\n\t\t\t\t\t\t\t\t\tname=\"number\"\r\n\t\t\t\t\t\t\t\t\terror={touched.number && Boolean(errors.number)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.number && errors.number}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"5513912344321\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email address\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.extraInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<FieldArray name=\"extraInfo\">\r\n\t\t\t\t\t\t\t\t\t{({ push, remove }) => (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{values.extraInfo &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.map((info, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.extraAttr}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${index}-info`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraName\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].name`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraValue\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].value`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => remove(index)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlineIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.extraAttr}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1, marginTop: 8 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => push({ name: \"\", value: \"\" })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{`+ ${i18n.t(\"contactModal.buttons.addExtraInfo\")}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</FieldArray>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Autocomplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport ContactModal from \"../ContactModal\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst filter = createFilterOptions({\n\ttrim: true,\n});\n\nconst NewTicketModal = ({ modalOpen, onClose }) => {\n\tconst history = useHistory();\n\n\tconst [options, setOptions] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [searchParam, setSearchParam] = useState(\"\");\n\tconst [selectedContact, setSelectedContact] = useState(null);\n\tconst [newContact, setNewContact] = useState({});\n\tconst [contactModalOpen, setContactModalOpen] = useState(false);\n\tconst { user } = useContext(AuthContext);\n\n\tuseEffect(() => {\n\t\tif (!modalOpen || searchParam.length < 3) {\n\t\t\tsetLoading(false);\n\t\t\treturn;\n\t\t}\n\t\tsetLoading(true);\n\t\tconst delayDebounceFn = setTimeout(() => {\n\t\t\tconst fetchContacts = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { data } = await api.get(\"contacts\", {\n\t\t\t\t\t\tparams: { searchParam },\n\t\t\t\t\t});\n\t\t\t\t\tsetOptions(data.contacts);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\ttoastError(err);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchContacts();\n\t\t}, 500);\n\t\treturn () => clearTimeout(delayDebounceFn);\n\t}, [searchParam, modalOpen]);\n\n\tconst handleClose = () => {\n\t\tonClose();\n\t\tsetSearchParam(\"\");\n\t\tsetSelectedContact(null);\n\t};\n\n\tconst handleSaveTicket = async contactId => {\n\t\tif (!contactId) return;\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst { data: ticket } = await api.post(\"/tickets\", {\n\t\t\t\tcontactId: contactId,\n\t\t\t\tuserId: user.id,\n\t\t\t\tstatus: \"open\",\n\t\t\t});\n\t\t\thistory.push(`/tickets/${ticket.id}`);\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t\tsetLoading(false);\n\t\thandleClose();\n\t};\n\n\tconst handleSelectOption = (e, newValue) => {\n\t\tif (newValue?.number) {\n\t\t\tsetSelectedContact(newValue);\n\t\t} else if (newValue?.name) {\n\t\t\tsetNewContact({ name: newValue.name });\n\t\t\tsetContactModalOpen(true);\n\t\t}\n\t};\n\n\tconst handleCloseContactModal = () => {\n\t\tsetContactModalOpen(false);\n\t};\n\n\tconst handleAddNewContactTicket = contact => {\n\t\thandleSaveTicket(contact.id);\n\t};\n\n\tconst createAddContactOption = (filterOptions, params) => {\n\t\tconst filtered = filter(filterOptions, params);\n\n\t\tif (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\n\t\t\tfiltered.push({\n\t\t\t\tname: `${params.inputValue}`,\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tconst renderOption = option => {\n\t\tif (option.number) {\n\t\t\treturn `${option.name} - ${option.number}`;\n\t\t} else {\n\t\t\treturn `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\n\t\t}\n\t};\n\n\tconst renderOptionLabel = option => {\n\t\tif (option.number) {\n\t\t\treturn `${option.name} - ${option.number}`;\n\t\t} else {\n\t\t\treturn `${option.name}`;\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ContactModal\n\t\t\t\topen={contactModalOpen}\n\t\t\t\tinitialValues={newContact}\n\t\t\t\tonClose={handleCloseContactModal}\n\t\t\t\tonSave={handleAddNewContactTicket}\n\t\t\t></ContactModal>\n\t\t\t<Dialog open={modalOpen} onClose={handleClose}>\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\n\t\t\t\t\t{i18n.t(\"newTicketModal.title\")}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tstyle={{ width: 300 }}\n\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\tautoHighlight\n\t\t\t\t\t\tfreeSolo\n\t\t\t\t\t\tclearOnEscape\n\t\t\t\t\t\tgetOptionLabel={renderOptionLabel}\n\t\t\t\t\t\trenderOption={renderOption}\n\t\t\t\t\t\tfilterOptions={createAddContactOption}\n\t\t\t\t\t\tonChange={(e, newValue) => handleSelectOption(e, newValue)}\n\t\t\t\t\t\trenderInput={params => (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\tlabel={i18n.t(\"newTicketModal.fieldLabel\")}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tonChange={e => setSearchParam(e.target.value)}\n\t\t\t\t\t\t\t\tonKeyPress={e => {\n\t\t\t\t\t\t\t\t\tif (loading || !selectedContact) return;\n\t\t\t\t\t\t\t\t\telse if (e.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\thandleSaveTicket(selectedContact.id);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t...params.InputProps,\n\t\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={20} />\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t{params.InputProps.endAdornment}\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"newTicketModal.buttons.cancel\")}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={!selectedContact}\n\t\t\t\t\t\tonClick={() => handleSaveTicket(selectedContact.id)}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"newTicketModal.buttons.ok\")}\n\t\t\t\t\t</ButtonWithSpinner>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</>\n\t);\n};\n\nexport default NewTicketModal;\n","import React from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst TicketsSkeleton = () => {\n\treturn (\n\t\t<>\n\t\t\t<ListItem dense>\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" />\n\t\t\t<ListItem dense>\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={70} />}\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={120} />}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" />\n\t\t\t<ListItem dense>\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" />\n\t\t</>\n\t);\n};\n\nexport default TicketsSkeleton;\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport openSocket from \"socket.io-client\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\n\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles(theme => ({\n\tticketsListWrapper: {\n\t\tposition: \"relative\",\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t\tflexDirection: \"column\",\n\t\toverflow: \"hidden\",\n\t\tborderTopRightRadius: 0,\n\t\tborderBottomRightRadius: 0,\n\t},\n\n\tticketsList: {\n\t\tflex: 1,\n\t\toverflowY: \"scroll\",\n\t\t...theme.scrollbarStyles,\n\t\tborderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\n\t},\n\n\tticketsListHeader: {\n\t\tcolor: \"rgb(67, 83, 105)\",\n\t\tzIndex: 2,\n\t\tbackgroundColor: \"white\",\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\n\tticketsCount: {\n\t\tfontWeight: \"normal\",\n\t\tcolor: \"rgb(104, 121, 146)\",\n\t\tmarginLeft: \"8px\",\n\t\tfontSize: \"14px\",\n\t},\n\n\tnoTicketsText: {\n\t\ttextAlign: \"center\",\n\t\tcolor: \"rgb(104, 121, 146)\",\n\t\tfontSize: \"14px\",\n\t\tlineHeight: \"1.4\",\n\t},\n\n\tnoTicketsTitle: {\n\t\ttextAlign: \"center\",\n\t\tfontSize: \"16px\",\n\t\tfontWeight: \"600\",\n\t\tmargin: \"0px\",\n\t},\n\n\tnoTicketsDiv: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100px\",\n\t\tmargin: 40,\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n}));\n\nconst reducer = (state, action) => {\n\tif (action.type === \"LOAD_TICKETS\") {\n\t\tconst newTickets = action.payload;\n\n\t\tnewTickets.forEach(ticket => {\n\t\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\n\t\t\tif (ticketIndex !== -1) {\n\t\t\t\tstate[ticketIndex] = ticket;\n\t\t\t\tif (ticket.unreadMessages > 0) {\n\t\t\t\t\tstate.unshift(state.splice(ticketIndex, 1)[0]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstate.push(ticket);\n\t\t\t}\n\t\t});\n\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"RESET_UNREAD\") {\n\t\tconst ticketId = action.payload;\n\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticketId);\n\t\tif (ticketIndex !== -1) {\n\t\t\tstate[ticketIndex].unreadMessages = 0;\n\t\t}\n\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"UPDATE_TICKET\") {\n\t\tconst ticket = action.payload;\n\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\n\t\tif (ticketIndex !== -1) {\n\t\t\tstate[ticketIndex] = ticket;\n\t\t} else {\n\t\t\tstate.unshift(ticket);\n\t\t}\n\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n\t\tconst ticket = action.payload;\n\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\n\t\tif (ticketIndex !== -1) {\n\t\t\tstate[ticketIndex] = ticket;\n\t\t\tstate.unshift(state.splice(ticketIndex, 1)[0]);\n\t\t} else {\n\t\t\tstate.unshift(ticket);\n\t\t}\n\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"UPDATE_TICKET_CONTACT\") {\n\t\tconst contact = action.payload;\n\t\tconst ticketIndex = state.findIndex(t => t.contactId === contact.id);\n\t\tif (ticketIndex !== -1) {\n\t\t\tstate[ticketIndex].contact = contact;\n\t\t}\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"DELETE_TICKET\") {\n\t\tconst ticketId = action.payload;\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticketId);\n\t\tif (ticketIndex !== -1) {\n\t\t\tstate.splice(ticketIndex, 1);\n\t\t}\n\n\t\treturn [...state];\n\t}\n\n\tif (action.type === \"RESET\") {\n\t\treturn [];\n\t}\n};\n\n\tconst TicketsList = (props) => {\n\t\tconst { status, searchParam, showAll, selectedQueueIds, updateCount, style } =\n\t\t\tprops;\n\tconst classes = useStyles();\n\tconst [pageNumber, setPageNumber] = useState(1);\n\tconst [ticketsList, dispatch] = useReducer(reducer, []);\n\tconst { user } = useContext(AuthContext);\n\n\tuseEffect(() => {\n\t\tdispatch({ type: \"RESET\" });\n\t\tsetPageNumber(1);\n\t}, [status, searchParam, dispatch, showAll, selectedQueueIds]);\n\n\tconst { tickets, hasMore, loading } = useTickets({\n\t\tpageNumber,\n\t\tsearchParam,\n\t\tstatus,\n\t\tshowAll,\n\t\tqueueIds: JSON.stringify(selectedQueueIds),\n\t});\n\n\tuseEffect(() => {\n\t\tif (!status && !searchParam) return;\n\t\tdispatch({\n\t\t\ttype: \"LOAD_TICKETS\",\n\t\t\tpayload: tickets,\n\t\t});\n\t}, [tickets, status, searchParam]);\n\n\tuseEffect(() => {\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n\t\tconst shouldUpdateTicket = ticket =>\n\t\t\t(!ticket.userId || ticket.userId === user?.id || showAll) &&\n\t\t\t(!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n\n\t\tconst notBelongsToUserQueues = ticket =>\n\t\t\tticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n\n\t\tsocket.on(\"connect\", () => {\n\t\t\tif (status) {\n\t\t\t\tsocket.emit(\"joinTickets\", status);\n\t\t\t} else {\n\t\t\t\tsocket.emit(\"joinNotification\");\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"ticket\", data => {\n\t\t\tif (data.action === \"updateUnread\") {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"RESET_UNREAD\",\n\t\t\t\t\tpayload: data.ticketId,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"UPDATE_TICKET\",\n\t\t\t\t\tpayload: data.ticket,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n\t\t\t\tdispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\n\t\t\t}\n\n\t\t\tif (data.action === \"delete\") {\n\t\t\t\tdispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"appMessage\", data => {\n\t\t\tif (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n\t\t\t\t\tpayload: data.ticket,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tsocket.on(\"contact\", data => {\n\t\t\tif (data.action === \"update\") {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"UPDATE_TICKET_CONTACT\",\n\t\t\t\t\tpayload: data.contact,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, [status, showAll, user, selectedQueueIds]);\n\n\tuseEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n\n\tconst loadMore = () => {\n\t\tsetPageNumber(prevState => prevState + 1);\n\t};\n\n\tconst handleScroll = e => {\n\t\tif (!hasMore || loading) return;\n\n\t\tconst { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n\n\t\tif (scrollHeight - (scrollTop + 100) < clientHeight) {\n\t\t\tloadMore();\n\t\t}\n\t};\n\n\treturn (\n    <Paper className={classes.ticketsListWrapper} style={style}>\n\t\t\t<Paper\n\t\t\t\tsquare\n\t\t\t\tname=\"closed\"\n\t\t\t\televation={0}\n\t\t\t\tclassName={classes.ticketsList}\n\t\t\t\tonScroll={handleScroll}\n\t\t\t>\n\t\t\t\t<List style={{ paddingTop: 0 }}>\n\t\t\t\t\t{ticketsList.length === 0 && !loading ? (\n\t\t\t\t\t\t<div className={classes.noTicketsDiv}>\n\t\t\t\t\t\t\t<span className={classes.noTicketsTitle}>\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketsList.noTicketsTitle\")}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<p className={classes.noTicketsText}>\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketsList.noTicketsMessage\")}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ticketsList.map(ticket => (\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} key={ticket.id} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && <TicketsListSkeleton />}\n\t\t\t\t</List>\n\t\t\t</Paper>\n    </Paper>\n\t);\n};\n\nexport default TicketsList;\n","import React from \"react\";\n\nconst TabPanel = ({ children, value, name, ...rest }) => {\n\tif (value === name) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\trole=\"tabpanel\"\n\t\t\t\tid={`simple-tabpanel-${name}`}\n\t\t\t\taria-labelledby={`simple-tab-${name}`}\n\t\t\t\t{...rest}\n\t\t\t>\n\t\t\t\t<>{children}</>\n\t\t\t</div>\n\t\t);\n\t} else return null;\n};\n\nexport default TabPanel;\n","import React from \"react\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport { Checkbox, ListItemText } from \"@material-ui/core\";\nimport { i18n } from \"../../translate/i18n\";\n\nconst TicketsQueueSelect = ({\n\tuserQueues,\n\tselectedQueueIds = [],\n\tonChange,\n}) => {\n\tconst handleChange = e => {\n\t\tonChange(e.target.value);\n\t};\n\n\treturn (\n\t\t<div style={{ width: 120, marginTop: -4 }}>\n\t\t\t<FormControl fullWidth margin=\"dense\">\n\t\t\t\t<Select\n\t\t\t\t\tmultiple\n\t\t\t\t\tdisplayEmpty\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tvalue={selectedQueueIds}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t}}\n\t\t\t\t\trenderValue={() => i18n.t(\"ticketsQueueSelect.placeholder\")}\n\t\t\t\t>\n\t\t\t\t\t{userQueues?.length > 0 &&\n\t\t\t\t\t\tuserQueues.map(queue => (\n\t\t\t\t\t\t\t<MenuItem dense key={queue.id} value={queue.id}>\n\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tcolor: queue.color,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tchecked={selectedQueueIds.indexOf(queue.id) > -1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ListItemText primary={queue.name} />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t</Select>\n\t\t\t</FormControl>\n\t\t</div>\n\t);\n};\n\nexport default TicketsQueueSelect;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport MoveToInboxIcon from \"@material-ui/icons/MoveToInbox\";\r\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\r\n\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport NewTicketModal from \"../NewTicketModal\";\r\nimport TicketsList from \"../TicketsList\";\r\nimport TabPanel from \"../TabPanel\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport TicketsQueueSelect from \"../TicketsQueueSelect\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticketsWrapper: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n  },\r\n\r\n  tabsHeader: {\r\n    flex: \"none\",\r\n    backgroundColor: \"#eee\",\r\n  },\r\n\r\n  settingsIcon: {\r\n    alignSelf: \"center\",\r\n    marginLeft: \"auto\",\r\n    padding: 8,\r\n  },\r\n\r\n  tab: {\r\n    minWidth: 120,\r\n    width: 120,\r\n  },\r\n\r\n  ticketOptionsBox: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    background: \"#fafafa\",\r\n    padding: theme.spacing(1),\r\n  },\r\n\r\n  serachInputWrapper: {\r\n    flex: 1,\r\n    background: \"#fff\",\r\n    display: \"flex\",\r\n    borderRadius: 40,\r\n    padding: 4,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n\r\n  searchIcon: {\r\n    color: \"grey\",\r\n    marginLeft: 6,\r\n    marginRight: 6,\r\n    alignSelf: \"center\",\r\n  },\r\n\r\n  searchInput: {\r\n    flex: 1,\r\n    border: \"none\",\r\n    borderRadius: 30,\r\n  },\r\n\r\n  badge: {\r\n    right: \"-10px\",\r\n  },\r\n  show: {\r\n    display: \"block\",\r\n  },\r\n  hide: {\r\n    display: \"none !important\",\r\n  },\r\n}));\r\n\r\nconst TicketsManager = () => {\r\n  const classes = useStyles();\r\n\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tab, setTab] = useState(\"open\");\r\n  const [tabOpen, setTabOpen] = useState(\"open\");\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [showAllTickets, setShowAllTickets] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [openCount, setOpenCount] = useState(0);\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n\r\n  const userQueueIds = user.queues.map((q) => q.id);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState(userQueueIds || []);\r\n\r\n  useEffect(() => {\r\n    if (user.profile.toUpperCase() === \"ADMIN\") {\r\n      setShowAllTickets(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (tab === \"search\") {\r\n      searchInputRef.current.focus();\r\n    }\r\n  }, [tab]);\r\n\r\n  let searchTimeout;\r\n\r\n  const handleSearch = (e) => {\r\n    const searchedTerm = e.target.value.toLowerCase();\r\n\r\n    clearTimeout(searchTimeout);\r\n\r\n    if (searchedTerm === \"\") {\r\n      setSearchParam(searchedTerm);\r\n      setTab(\"open\");\r\n      return;\r\n    }\r\n\r\n    searchTimeout = setTimeout(() => {\r\n      setSearchParam(searchedTerm);\r\n    }, 500);\r\n  };\r\n\r\n  const handleChangeTab = (e, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleChangeTabOpen = (e, newValue) => {\r\n    setTabOpen(newValue);\r\n  };\r\n\r\n  const applyPanelStyle = (status) => {\r\n    if (tabOpen !== status) {\r\n      return { width: 0, height: 0 };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={0} variant=\"outlined\" className={classes.ticketsWrapper}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        onClose={(e) => setNewTicketModalOpen(false)}\r\n      />\r\n      <Paper elevation={0} square className={classes.tabsHeader}>\r\n        <Tabs\r\n          value={tab}\r\n          onChange={handleChangeTab}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"icon label tabs example\"\r\n        >\r\n          <Tab\r\n            value={\"open\"}\r\n            icon={<MoveToInboxIcon />}\r\n            label={i18n.t(\"tickets.tabs.open.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"closed\"}\r\n            icon={<CheckBoxIcon />}\r\n            label={i18n.t(\"tickets.tabs.closed.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"search\"}\r\n            icon={<SearchIcon />}\r\n            label={i18n.t(\"tickets.tabs.search.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n        </Tabs>\r\n      </Paper>\r\n      <Paper square elevation={0} className={classes.ticketOptionsBox}>\r\n        {tab === \"search\" ? (\r\n          <div className={classes.serachInputWrapper}>\r\n            <SearchIcon className={classes.searchIcon} />\r\n            <InputBase\r\n              className={classes.searchInput}\r\n              inputRef={searchInputRef}\r\n              placeholder={i18n.t(\"tickets.search.placeholder\")}\r\n              type=\"search\"\r\n              onChange={handleSearch}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setNewTicketModalOpen(true)}\r\n            >\r\n              {i18n.t(\"ticketsManager.buttons.newTicket\")}\r\n            </Button>\r\n            <Can\r\n              role={user.profile}\r\n              perform=\"tickets-manager:showall\"\r\n              yes={() => (\r\n                <FormControlLabel\r\n                  label={i18n.t(\"tickets.buttons.showAll\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={showAllTickets}\r\n                      onChange={() =>\r\n                        setShowAllTickets((prevState) => !prevState)\r\n                      }\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              )}\r\n            />\r\n          </>\r\n        )}\r\n        <TicketsQueueSelect\r\n          style={{ marginLeft: 6 }}\r\n          selectedQueueIds={selectedQueueIds}\r\n          userQueues={user?.queues}\r\n          onChange={(values) => setSelectedQueueIds(values)}\r\n        />\r\n      </Paper>\r\n      <TabPanel value={tab} name=\"open\" className={classes.ticketsWrapper}>\r\n        <Tabs\r\n          value={tabOpen}\r\n          onChange={handleChangeTabOpen}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n        >\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={openCount}\r\n                color=\"primary\"\r\n              >\r\n                {i18n.t(\"ticketsList.assignedHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"open\"}\r\n          />\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={pendingCount}\r\n                color=\"secondary\"\r\n              >\r\n                {i18n.t(\"ticketsList.pendingHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"pending\"}\r\n          />\r\n        </Tabs>\r\n        <Paper className={classes.ticketsWrapper}>\r\n          <TicketsList\r\n            status=\"open\"\r\n            showAll={showAllTickets}\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setOpenCount(val)}\r\n            style={applyPanelStyle(\"open\")}\r\n          />\r\n          <TicketsList\r\n            status=\"pending\"\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setPendingCount(val)}\r\n            style={applyPanelStyle(\"pending\")}\r\n          />\r\n        </Paper>\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"closed\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          status=\"closed\"\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"search\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          searchParam={searchParam}\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsManager;\r\n","import React from \"react\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { i18n } from \"../../translate/i18n\";\n\nconst ContactDrawerSkeleton = ({ classes }) => {\n\treturn (\n\t\t<div className={classes.content}>\n\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\n\t\t\t\t<Skeleton\n\t\t\t\t\tanimation=\"wave\"\n\t\t\t\t\tvariant=\"circle\"\n\t\t\t\t\twidth={160}\n\t\t\t\t\theight={160}\n\t\t\t\t\tclassName={classes.contactAvatar}\n\t\t\t\t/>\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={90} />\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\n\t\t\t</Paper>\n\t\t\t<Paper square className={classes.contactDetails}>\n\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\n\t\t\t\t</Typography>\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\n\t\t\t\t</Paper>\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\n\t\t\t\t</Paper>\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\n\t\t\t\t</Paper>\n\t\t\t</Paper>\n\t\t</div>\n\t);\n};\n\nexport default ContactDrawerSkeleton;\n","import React, { useState } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Link from \"@material-ui/core/Link\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport ContactModal from \"../ContactModal\";\nimport ContactDrawerSkeleton from \"../ContactDrawerSkeleton\";\nimport MarkdownWrapper from \"../MarkdownWrapper\";\n\nconst drawerWidth = 320;\n\nconst useStyles = makeStyles(theme => ({\n\tdrawer: {\n\t\twidth: drawerWidth,\n\t\tflexShrink: 0,\n\t},\n\tdrawerPaper: {\n\t\twidth: drawerWidth,\n\t\tdisplay: \"flex\",\n\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\tborderRight: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\tborderTopRightRadius: 4,\n\t\tborderBottomRightRadius: 4,\n\t},\n\theader: {\n\t\tdisplay: \"flex\",\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\tbackgroundColor: \"#eee\",\n\t\talignItems: \"center\",\n\t\tpadding: theme.spacing(0, 1),\n\t\tminHeight: \"73px\",\n\t\tjustifyContent: \"flex-start\",\n\t},\n\tcontent: {\n\t\tdisplay: \"flex\",\n\t\tbackgroundColor: \"#eee\",\n\t\tflexDirection: \"column\",\n\t\tpadding: \"8px 0px 8px 8px\",\n\t\theight: \"100%\",\n\t\toverflowY: \"scroll\",\n\t\t...theme.scrollbarStyles,\n\t},\n\n\tcontactAvatar: {\n\t\tmargin: 15,\n\t\twidth: 160,\n\t\theight: 160,\n\t},\n\n\tcontactHeader: {\n\t\tdisplay: \"flex\",\n\t\tpadding: 8,\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\t\"& > *\": {\n\t\t\tmargin: 4,\n\t\t},\n\t},\n\n\tcontactDetails: {\n\t\tmarginTop: 8,\n\t\tpadding: 8,\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tcontactExtraInfo: {\n\t\tmarginTop: 4,\n\t\tpadding: 6,\n\t},\n}));\n\nconst ContactDrawer = ({ open, handleDrawerClose, contact, loading }) => {\n\tconst classes = useStyles();\n\n\tconst [modalOpen, setModalOpen] = useState(false);\n\n\treturn (\n\t\t<Drawer\n\t\t\tclassName={classes.drawer}\n\t\t\tvariant=\"persistent\"\n\t\t\tanchor=\"right\"\n\t\t\topen={open}\n\t\t\tPaperProps={{ style: { position: \"absolute\" } }}\n\t\t\tBackdropProps={{ style: { position: \"absolute\" } }}\n\t\t\tModalProps={{\n\t\t\t\tcontainer: document.getElementById(\"drawer-container\"),\n\t\t\t\tstyle: { position: \"absolute\" },\n\t\t\t}}\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t}}\n\t\t>\n\t\t\t<div className={classes.header}>\n\t\t\t\t<IconButton onClick={handleDrawerClose}>\n\t\t\t\t\t<CloseIcon />\n\t\t\t\t</IconButton>\n\t\t\t\t<Typography style={{ justifySelf: \"center\" }}>\n\t\t\t\t\t{i18n.t(\"contactDrawer.header\")}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t\t{loading ? (\n\t\t\t\t<ContactDrawerSkeleton classes={classes} />\n\t\t\t) : (\n\t\t\t\t<div className={classes.content}>\n\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\talt={contact.name}\n\t\t\t\t\t\t\tsrc={contact.profilePicUrl}\n\t\t\t\t\t\t\tclassName={classes.contactAvatar}\n\t\t\t\t\t\t></Avatar>\n\n\t\t\t\t\t\t<Typography>{contact.name}</Typography>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\t<Link href={`tel:${contact.number}`}>{contact.number}</Link>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={() => setModalOpen(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.buttons.edit\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\n\t\t\t\t\t\t<ContactModal\n\t\t\t\t\t\t\topen={modalOpen}\n\t\t\t\t\t\t\tonClose={() => setModalOpen(false)}\n\t\t\t\t\t\t\tcontactId={contact.id}\n\t\t\t\t\t\t></ContactModal>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{contact?.extraInfo?.map(info => (\n\t\t\t\t\t\t\t<Paper\n\t\t\t\t\t\t\t\tkey={info.id}\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName={classes.contactExtraInfo}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<InputLabel>{info.name}</InputLabel>\n\t\t\t\t\t\t\t\t<Typography component=\"div\" noWrap style={{ paddingTop: 2 }}>\n\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{info.value}</MarkdownWrapper>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Drawer>\n\t);\n};\n\nexport default ContactDrawer;\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\ttimerBox: {\n\t\tdisplay: \"flex\",\n\t\tmarginLeft: 10,\n\t\tmarginRight: 10,\n\t\talignItems: \"center\",\n\t},\n}));\n\nconst RecordingTimer = () => {\n\tconst classes = useStyles();\n\tconst initialState = {\n\t\tminutes: 0,\n\t\tseconds: 0,\n\t};\n\tconst [timer, setTimer] = useState(initialState);\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(\n\t\t\t() =>\n\t\t\t\tsetTimer(prevState => {\n\t\t\t\t\tif (prevState.seconds === 59) {\n\t\t\t\t\t\treturn { ...prevState, minutes: prevState.minutes + 1, seconds: 0 };\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...prevState, seconds: prevState.seconds + 1 };\n\t\t\t\t}),\n\t\t\t1000\n\t\t);\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, []);\n\n\tconst addZero = n => {\n\t\treturn n < 10 ? \"0\" + n : n;\n\t};\n\n\treturn (\n\t\t<div className={classes.timerBox}>\n\t\t\t<span>{`${addZero(timer.minutes)}:${addZero(timer.seconds)}`}</span>\n\t\t</div>\n\t);\n};\n\nexport default RecordingTimer;\n","import React, { useState, createContext } from \"react\";\n\nconst ReplyMessageContext = createContext();\n\nconst ReplyMessageProvider = ({ children }) => {\n\tconst [replyingMessage, setReplyingMessage] = useState(null);\n\n\treturn (\n\t\t<ReplyMessageContext.Provider\n\t\t\tvalue={{ replyingMessage, setReplyingMessage }}\n\t\t>\n\t\t\t{children}\n\t\t</ReplyMessageContext.Provider>\n\t);\n};\n\nexport { ReplyMessageContext, ReplyMessageProvider };\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoreVert from \"@material-ui/icons/MoreVert\";\r\nimport MoodIcon from \"@material-ui/icons/Mood\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport {\r\n  FormControlLabel,\r\n  Hidden,\r\n  Menu,\r\n  MenuItem,\r\n  Switch,\r\n} from \"@material-ui/core\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport RecordingTimer from \"./RecordingTimer\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    background: \"#eee\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      position: \"fixed\",\r\n      bottom: 0,\r\n      width: \"100%\",\r\n    },\r\n  },\r\n\r\n  newMessageBox: {\r\n    background: \"#eee\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"7px\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  messageInputWrapper: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    background: \"#fff\",\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n    position: \"relative\",\r\n  },\r\n\r\n  messageInput: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n  },\r\n\r\n  sendMessageIcons: {\r\n    color: \"grey\",\r\n  },\r\n\r\n  uploadInput: {\r\n    display: \"none\",\r\n  },\r\n\r\n  viewMediaInputWrapper: {\r\n    display: \"flex\",\r\n    padding: \"10px 13px\",\r\n    position: \"relative\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#eee\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  emojiBox: {\r\n    position: \"absolute\",\r\n    bottom: 63,\r\n    width: 40,\r\n    borderTop: \"1px solid #e8e8e8\",\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n    position: \"absolute\",\r\n    top: \"20%\",\r\n    left: \"50%\",\r\n    marginLeft: -12,\r\n  },\r\n\r\n  audioLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n  },\r\n\r\n  recorderWrapper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    alignContent: \"middle\",\r\n  },\r\n\r\n  cancelAudioIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  sendAudioIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  replyginMsgWrapper: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n    paddingLeft: 73,\r\n    paddingRight: 7,\r\n  },\r\n\r\n  replyginMsgContainer: {\r\n    flex: 1,\r\n    marginRight: 5,\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  replyginMsgBody: {\r\n    padding: 10,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  replyginContactMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  replyginSelfMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n  messageQuickAnswersWrapper: {\r\n    margin: 0,\r\n    position: \"absolute\",\r\n    bottom: \"50px\",\r\n    background: \"#ffffff\",\r\n    padding: \"2px\",\r\n    border: \"1px solid #CCC\",\r\n    left: 0,\r\n    width: \"100%\",\r\n    \"& li\": {\r\n      listStyle: \"none\",\r\n      \"& a\": {\r\n        display: \"block\",\r\n        padding: \"8px\",\r\n        textOverflow: \"ellipsis\",\r\n        overflow: \"hidden\",\r\n        maxHeight: \"32px\",\r\n        \"&:hover\": {\r\n          background: \"#F1F1F1\",\r\n          cursor: \"pointer\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nconst MessageInput = ({ ticketStatus }) => {\r\n  const classes = useStyles();\r\n  const { ticketId } = useParams();\r\n\r\n  const [medias, setMedias] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const [quickAnswers, setQuickAnswer] = useState([]);\r\n  const [typeBar, setTypeBar] = useState(false);\r\n  const inputRef = useRef();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { setReplyingMessage, replyingMessage } =\r\n    useContext(ReplyMessageContext);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [signMessage, setSignMessage] = useLocalStorage(\"signOption\", true);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, [replyingMessage]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    return () => {\r\n      setInputMessage(\"\");\r\n      setShowEmoji(false);\r\n      setMedias([]);\r\n      setReplyingMessage(null);\r\n    };\r\n  }, [ticketId, setReplyingMessage]);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setInputMessage(e.target.value);\r\n    handleLoadQuickAnswer(e.target.value);\r\n  };\r\n\r\n  const handleQuickAnswersClick = (value) => {\r\n    setInputMessage(value);\r\n    setTypeBar(false);\r\n  };\r\n\r\n  const handleAddEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInputMessage((prevState) => prevState + emoji);\r\n  };\r\n\r\n  const handleChangeMedias = (e) => {\r\n    if (!e.target.files) {\r\n      return;\r\n    }\r\n\r\n    const selectedMedias = Array.from(e.target.files);\r\n    setMedias(selectedMedias);\r\n  };\r\n\r\n  const handleInputPaste = (e) => {\r\n    if (e.clipboardData.files[0]) {\r\n      setMedias([e.clipboardData.files[0]]);\r\n    }\r\n  };\r\n\r\n  const handleUploadMedia = async (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"fromMe\", true);\r\n    medias.forEach((media) => {\r\n      formData.append(\"medias\", media);\r\n      formData.append(\"body\", media.name);\r\n    });\r\n\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n    setMedias([]);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (inputMessage.trim() === \"\") return;\r\n    setLoading(true);\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: signMessage\r\n        ? `*${user?.name}:*\\n${inputMessage.trim()}`\r\n        : inputMessage.trim(),\r\n      quotedMsg: replyingMessage,\r\n    };\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, message);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n  };\r\n\r\n  const handleStartRecording = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      await Mp3Recorder.start();\r\n      setRecording(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLoadQuickAnswer = async (value) => {\r\n    if (value && value.indexOf(\"/\") === 0) {\r\n      try {\r\n        const { data } = await api.get(\"/quickAnswers/\", {\r\n          params: { searchParam: inputMessage.substring(1) },\r\n        });\r\n        setQuickAnswer(data.quickAnswers);\r\n        if (data.quickAnswers.length > 0) {\r\n          setTypeBar(true);\r\n        } else {\r\n          setTypeBar(false);\r\n        }\r\n      } catch (err) {\r\n        setTypeBar(false);\r\n      }\r\n    } else {\r\n      setTypeBar(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAudio = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [, blob] = await Mp3Recorder.stop().getMp3();\r\n      if (blob.size < 10000) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.mp3`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", filename);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setRecording(false);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCancelAudio = async () => {\r\n    try {\r\n      await Mp3Recorder.stop().getMp3();\r\n      setRecording(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenMenuClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuItemClick = (event) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const renderReplyingMessage = (message) => {\r\n    return (\r\n      <div className={classes.replyginMsgWrapper}>\r\n        <div className={classes.replyginMsgContainer}>\r\n          <span\r\n            className={clsx(classes.replyginContactMsgSideColor, {\r\n              [classes.replyginSelfMsgSideColor]: !message.fromMe,\r\n            })}\r\n          ></span>\r\n          <div className={classes.replyginMsgBody}>\r\n            {!message.fromMe && (\r\n              <span className={classes.messageContactName}>\r\n                {message.contact?.name}\r\n              </span>\r\n            )}\r\n            {message.body}\r\n          </div>\r\n        </div>\r\n        <IconButton\r\n          aria-label=\"showRecorder\"\r\n          component=\"span\"\r\n          disabled={loading || ticketStatus !== \"open\"}\r\n          onClick={() => setReplyingMessage(null)}\r\n        >\r\n          <ClearIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (medias.length > 0)\r\n    return (\r\n      <Paper elevation={0} square className={classes.viewMediaInputWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancel-upload\"\r\n          component=\"span\"\r\n          onClick={(e) => setMedias([])}\r\n        >\r\n          <CancelIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.circleLoading} />\r\n          </div>\r\n        ) : (\r\n          <span>\r\n            {medias[0]?.name}\r\n            {/* <img src={media.preview} alt=\"\"></img> */}\r\n          </span>\r\n        )}\r\n        <IconButton\r\n          aria-label=\"send-upload\"\r\n          component=\"span\"\r\n          onClick={handleUploadMedia}\r\n          disabled={loading}\r\n        >\r\n          <SendIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </Paper>\r\n    );\r\n  else {\r\n    return (\r\n      <Paper square elevation={0} className={classes.mainWrapper}>\r\n        {replyingMessage && renderReplyingMessage(replyingMessage)}\r\n        <div className={classes.newMessageBox}>\r\n          <Hidden only={[\"sm\", \"xs\"]}>\r\n            <IconButton\r\n              aria-label=\"emojiPicker\"\r\n              component=\"span\"\r\n              disabled={loading || recording || ticketStatus !== \"open\"}\r\n              onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n            >\r\n              <MoodIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n            {showEmoji ? (\r\n              <div className={classes.emojiBox}>\r\n                <ClickAwayListener onClickAway={(e) => setShowEmoji(false)}>\r\n                  <Picker\r\n                    perLine={16}\r\n                    showPreview={false}\r\n                    showSkinTones={false}\r\n                    onSelect={handleAddEmoji}\r\n                  />\r\n                </ClickAwayListener>\r\n              </div>\r\n            ) : null}\r\n\r\n            <input\r\n              multiple\r\n              type=\"file\"\r\n              id=\"upload-button\"\r\n              disabled={loading || recording || ticketStatus !== \"open\"}\r\n              className={classes.uploadInput}\r\n              onChange={handleChangeMedias}\r\n            />\r\n            <label htmlFor=\"upload-button\">\r\n              <IconButton\r\n                aria-label=\"upload\"\r\n                component=\"span\"\r\n                disabled={loading || recording || ticketStatus !== \"open\"}\r\n              >\r\n                <AttachFileIcon className={classes.sendMessageIcons} />\r\n              </IconButton>\r\n            </label>\r\n            <FormControlLabel\r\n              style={{ marginRight: 7, color: \"gray\" }}\r\n              label={i18n.t(\"messagesInput.signMessage\")}\r\n              labelPlacement=\"start\"\r\n              control={\r\n                <Switch\r\n                  size=\"small\"\r\n                  checked={signMessage}\r\n                  onChange={(e) => {\r\n                    setSignMessage(e.target.checked);\r\n                  }}\r\n                  name=\"showAllTickets\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n            />\r\n          </Hidden>\r\n          <Hidden only={[\"md\", \"lg\", \"xl\"]}>\r\n            <IconButton\r\n              aria-controls=\"simple-menu\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleOpenMenuClick}\r\n            >\r\n              <MoreVert></MoreVert>\r\n            </IconButton>\r\n            <Menu\r\n              id=\"simple-menu\"\r\n              keepMounted\r\n              anchorEl={anchorEl}\r\n              open={Boolean(anchorEl)}\r\n              onClose={handleMenuItemClick}\r\n            >\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <IconButton\r\n                  aria-label=\"emojiPicker\"\r\n                  component=\"span\"\r\n                  disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n                >\r\n                  <MoodIcon className={classes.sendMessageIcons} />\r\n                </IconButton>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <input\r\n                  multiple\r\n                  type=\"file\"\r\n                  id=\"upload-button\"\r\n                  disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  className={classes.uploadInput}\r\n                  onChange={handleChangeMedias}\r\n                />\r\n                <label htmlFor=\"upload-button\">\r\n                  <IconButton\r\n                    aria-label=\"upload\"\r\n                    component=\"span\"\r\n                    disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  >\r\n                    <AttachFileIcon className={classes.sendMessageIcons} />\r\n                  </IconButton>\r\n                </label>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <FormControlLabel\r\n                  style={{ marginRight: 7, color: \"gray\" }}\r\n                  label={i18n.t(\"messagesInput.signMessage\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={signMessage}\r\n                      onChange={(e) => {\r\n                        setSignMessage(e.target.checked);\r\n                      }}\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              </MenuItem>\r\n            </Menu>\r\n          </Hidden>\r\n          <div className={classes.messageInputWrapper}>\r\n            <InputBase\r\n              inputRef={(input) => {\r\n                input && input.focus();\r\n                input && (inputRef.current = input);\r\n              }}\r\n              className={classes.messageInput}\r\n              placeholder={\r\n                ticketStatus === \"open\"\r\n                  ? i18n.t(\"messagesInput.placeholderOpen\")\r\n                  : i18n.t(\"messagesInput.placeholderClosed\")\r\n              }\r\n              multiline\r\n              maxRows={5}\r\n              value={inputMessage}\r\n              onChange={handleChangeInput}\r\n              disabled={recording || loading || ticketStatus !== \"open\"}\r\n              onPaste={(e) => {\r\n                ticketStatus === \"open\" && handleInputPaste(e);\r\n              }}\r\n              onKeyPress={(e) => {\r\n                if (loading || e.shiftKey) return;\r\n                else if (e.key === \"Enter\") {\r\n                  handleSendMessage();\r\n                }\r\n              }}\r\n            />\r\n            {typeBar ? (\r\n              <ul className={classes.messageQuickAnswersWrapper}>\r\n                {quickAnswers.map((value, index) => {\r\n                  return (\r\n                    <li\r\n                      className={classes.messageQuickAnswersWrapperItem}\r\n                      key={index}\r\n                    >\r\n                      {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\r\n                      <a onClick={() => handleQuickAnswersClick(value.message)}>\r\n                        {`${value.shortcut} - ${value.message}`}\r\n                      </a>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n          </div>\r\n          {inputMessage ? (\r\n            <IconButton\r\n              aria-label=\"sendMessage\"\r\n              component=\"span\"\r\n              onClick={handleSendMessage}\r\n              disabled={loading}\r\n            >\r\n              <SendIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n          ) : recording ? (\r\n            <div className={classes.recorderWrapper}>\r\n              <IconButton\r\n                aria-label=\"cancelRecording\"\r\n                component=\"span\"\r\n                fontSize=\"large\"\r\n                disabled={loading}\r\n                onClick={handleCancelAudio}\r\n              >\r\n                <HighlightOffIcon className={classes.cancelAudioIcon} />\r\n              </IconButton>\r\n              {loading ? (\r\n                <div>\r\n                  <CircularProgress className={classes.audioLoading} />\r\n                </div>\r\n              ) : (\r\n                <RecordingTimer />\r\n              )}\r\n\r\n              <IconButton\r\n                aria-label=\"sendRecordedAudio\"\r\n                component=\"span\"\r\n                onClick={handleUploadAudio}\r\n                disabled={loading}\r\n              >\r\n                <CheckCircleOutlineIcon className={classes.sendAudioIcon} />\r\n              </IconButton>\r\n            </div>\r\n          ) : (\r\n            <IconButton\r\n              aria-label=\"showRecorder\"\r\n              component=\"span\"\r\n              disabled={loading || ticketStatus !== \"open\"}\r\n              onClick={handleStartRecording}\r\n            >\r\n              <MicIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n          )}\r\n        </div>\r\n      </Paper>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MessageInput;\r\n","import { useState } from \"react\";\nimport toastError from \"../../errors/toastError\";\n\nexport function useLocalStorage(key, initialValue) {\n\tconst [storedValue, setStoredValue] = useState(() => {\n\t\ttry {\n\t\t\tconst item = localStorage.getItem(key);\n\t\t\treturn item ? JSON.parse(item) : initialValue;\n\t\t} catch (error) {\n\t\t\ttoastError(error);\n\t\t\treturn initialValue;\n\t\t}\n\t});\n\n\tconst setValue = value => {\n\t\ttry {\n\t\t\tconst valueToStore =\n\t\t\t\tvalue instanceof Function ? value(storedValue) : value;\n\n\t\t\tsetStoredValue(valueToStore);\n\n\t\t\tlocalStorage.setItem(key, JSON.stringify(valueToStore));\n\t\t} catch (error) {\n\t\t\ttoastError(error);\n\t\t}\n\t};\n\n\treturn [storedValue, setValue];\n}\n","import React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Avatar, Card, CardHeader } from \"@material-ui/core\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles(theme => ({\n\tticketHeader: {\n\t\tdisplay: \"flex\",\n\t\tbackgroundColor: \"#eee\",\n\t\tflex: \"none\",\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t},\n}));\n\nconst TicketHeaderSkeleton = () => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Card square className={classes.ticketHeader}>\n\t\t\t<CardHeader\n\t\t\t\ttitleTypographyProps={{ noWrap: true }}\n\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\n\t\t\t\tavatar={\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\">\n\t\t\t\t\t\t<Avatar alt=\"contact_image\" />\n\t\t\t\t\t</Skeleton>\n\t\t\t\t}\n\t\t\t\ttitle={<Skeleton animation=\"wave\" width={80} />}\n\t\t\t\tsubheader={<Skeleton animation=\"wave\" width={140} />}\n\t\t\t/>\n\t\t</Card>\n\t);\n};\n\nexport default TicketHeaderSkeleton;\n","import React from \"react\";\n\nimport { Card, Button } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TicketHeaderSkeleton from \"../TicketHeaderSkeleton\";\nimport ArrowBackIos from \"@material-ui/icons/ArrowBackIos\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  ticketHeader: {\n    display: \"flex\",\n    backgroundColor: \"#eee\",\n    flex: \"none\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    [theme.breakpoints.down(\"sm\")]: {\n      flexWrap: \"wrap\",\n    },\n  },\n}));\n\nconst TicketHeader = ({ loading, children }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const handleBack = () => {\n    history.push(\"/tickets\");\n  };\n\n  return (\n    <>\n      {loading ? (\n        <TicketHeaderSkeleton />\n      ) : (\n        <Card square className={classes.ticketHeader}>\n          <Button color=\"primary\" onClick={handleBack}>\n            <ArrowBackIos />\n          </Button>\n          {children}\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport default TicketHeader;\n","import React from \"react\";\n\nimport { Avatar, CardHeader } from \"@material-ui/core\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nconst TicketInfo = ({ contact, ticket, onClick }) => {\n\treturn (\n\t\t<CardHeader\n\t\t\tonClick={onClick}\n\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\ttitleTypographyProps={{ noWrap: true }}\n\t\t\tsubheaderTypographyProps={{ noWrap: true }}\n\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" />}\n\t\t\ttitle={`${contact.name} #${ticket.id}`}\n\t\t\tsubheader={\n\t\t\t\tticket.user &&\n\t\t\t\t`${i18n.t(\"messagesList.header.assignedTo\")} ${ticket.user.name}`\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default TicketInfo;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nconst ConfirmationModal = ({ title, children, open, onClose, onConfirm }) => {\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={() => onClose(false)}\n\t\t\taria-labelledby=\"confirm-dialog\"\n\t\t>\n\t\t\t<DialogTitle id=\"confirm-dialog\">{title}</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<Typography>{children}</Typography>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tonClick={() => onClose(false)}\n\t\t\t\t\tcolor=\"default\"\n\t\t\t\t>\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.cancel\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tonClose(false);\n\t\t\t\t\t\tonConfirm();\n\t\t\t\t\t}}\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t>\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.confirm\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nexport default ConfirmationModal;\n","import api from \"../../services/api\";\n\nconst useQueues = () => {\n\tconst findAll = async () => {\n        const { data } = await api.get(\"/queue\");\n        return data;\n    }\n\n\treturn { findAll };\n};\n\nexport default useQueues;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Select from \"@material-ui/core/Select\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { makeStyles } from \"@material-ui/core\";\n\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Autocomplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport toastError from \"../../errors/toastError\";\nimport useQueues from \"../../hooks/useQueues\";\n\nconst useStyles = makeStyles((theme) => ({\n  maxWidth: {\n    width: \"100%\",\n  },\n}));\n\nconst filterOptions = createFilterOptions({\n\ttrim: true,\n});\n\nconst TransferTicketModal = ({ modalOpen, onClose, ticketid }) => {\n\tconst history = useHistory();\n\tconst [options, setOptions] = useState([]);\n\tconst [queues, setQueues] = useState([]);\n\tconst [allQueues, setAllQueues] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [searchParam, setSearchParam] = useState(\"\");\n\tconst [selectedUser, setSelectedUser] = useState(null);\n\tconst [selectedQueue, setSelectedQueue] = useState('');\n\tconst classes = useStyles();\n\tconst { findAll: findAllQueues } = useQueues();\n\n\tuseEffect(() => {\n\t\tconst loadQueues = async () => {\n\t\t\tconst list = await findAllQueues();\n\t\t\tsetAllQueues(list);\n\t\t\tsetQueues(list);\n\t\t}\n\t\tloadQueues();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!modalOpen || searchParam.length < 3) {\n\t\t\tsetLoading(false);\n\t\t\treturn;\n\t\t}\n\t\tsetLoading(true);\n\t\tconst delayDebounceFn = setTimeout(() => {\n\t\t\tconst fetchUsers = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { data } = await api.get(\"/users/\", {\n\t\t\t\t\t\tparams: { searchParam },\n\t\t\t\t\t});\n\t\t\t\t\tsetOptions(data.users);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\ttoastError(err);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchUsers();\n\t\t}, 500);\n\t\treturn () => clearTimeout(delayDebounceFn);\n\t}, [searchParam, modalOpen]);\n\n\tconst handleClose = () => {\n\t\tonClose();\n\t\tsetSearchParam(\"\");\n\t\tsetSelectedUser(null);\n\t};\n\n\tconst handleSaveTicket = async e => {\n\t\te.preventDefault();\n\t\tif (!ticketid) return;\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tlet data = {};\n\n\t\t\tif (selectedUser) {\n\t\t\t\tdata.userId = selectedUser.id\n\t\t\t}\n\n\t\t\tif (selectedQueue && selectedQueue !== null) {\n\t\t\t\tdata.queueId = selectedQueue\n\n\t\t\t\tif (!selectedUser) {\n\t\t\t\t\tdata.status = 'pending';\n\t\t\t\t\tdata.userId = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait api.put(`/tickets/${ticketid}`, data);\n\n\t\t\tsetLoading(false);\n\t\t\thistory.push(`/tickets`);\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog open={modalOpen} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\n\t\t\t<form onSubmit={handleSaveTicket}>\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\n\t\t\t\t\t{i18n.t(\"transferTicketModal.title\")}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\tstyle={{ width: 300, marginBottom: 20 }}\n\t\t\t\t\t\tgetOptionLabel={option => `${option.name}`}\n\t\t\t\t\t\tonChange={(e, newValue) => {\n\t\t\t\t\t\t\tsetSelectedUser(newValue);\n\t\t\t\t\t\t\tif (newValue != null && Array.isArray(newValue.queues)) {\n\t\t\t\t\t\t\t\tsetQueues(newValue.queues);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetQueues(allQueues);\n\t\t\t\t\t\t\t\tsetSelectedQueue('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\tfreeSolo\n\t\t\t\t\t\tautoHighlight\n\t\t\t\t\t\tnoOptionsText={i18n.t(\"transferTicketModal.noOptions\")}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\trenderInput={params => (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\tlabel={i18n.t(\"transferTicketModal.fieldLabel\")}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tonChange={e => setSearchParam(e.target.value)}\n\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t...params.InputProps,\n\t\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={20} />\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t{params.InputProps.endAdornment}\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.maxWidth}>\n\t\t\t\t\t\t<InputLabel>{i18n.t(\"transferTicketModal.fieldQueueLabel\")}</InputLabel>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={selectedQueue}\n\t\t\t\t\t\t\tonChange={(e) => setSelectedQueue(e.target.value)}\n\t\t\t\t\t\t\tlabel={i18n.t(\"transferTicketModal.fieldQueuePlaceholder\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem value={''}>&nbsp;</MenuItem>\n\t\t\t\t\t\t\t{queues.map((queue) => (\n\t\t\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>{queue.name}</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"transferTicketModal.buttons.cancel\")}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"transferTicketModal.buttons.ok\")}\n\t\t\t\t\t</ButtonWithSpinner>\n\t\t\t\t</DialogActions>\n\t\t\t</form>\n\t\t</Dialog>\n\t);\n};\n\nexport default TransferTicketModal;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport TransferTicketModal from \"../TransferTicketModal\";\nimport toastError from \"../../errors/toastError\";\nimport { Can } from \"../Can\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst TicketOptionsMenu = ({ ticket, menuOpen, handleClose, anchorEl }) => {\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\n\tconst [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\n\tconst isMounted = useRef(true);\n\tconst { user } = useContext(AuthContext);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, []);\n\n\tconst handleDeleteTicket = async () => {\n\t\ttry {\n\t\t\tawait api.delete(`/tickets/${ticket.id}`);\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\tconst handleOpenConfirmationModal = e => {\n\t\tsetConfirmationOpen(true);\n\t\thandleClose();\n\t};\n\n\tconst handleOpenTransferModal = e => {\n\t\tsetTransferTicketModalOpen(true);\n\t\thandleClose();\n\t};\n\n\tconst handleCloseTransferTicketModal = () => {\n\t\tif (isMounted.current) {\n\t\t\tsetTransferTicketModalOpen(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Menu\n\t\t\t\tid=\"menu-appbar\"\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\tkeepMounted\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\topen={menuOpen}\n\t\t\t\tonClose={handleClose}\n\t\t\t>\n\t\t\t\t<MenuItem onClick={handleOpenTransferModal}>\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.transfer\")}\n\t\t\t\t</MenuItem>\n\t\t\t\t<Can\n\t\t\t\t\trole={user.profile}\n\t\t\t\t\tperform=\"ticket-options:deleteTicket\"\n\t\t\t\t\tyes={() => (\n\t\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\n\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.delete\")}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</Menu>\n\t\t\t<ConfirmationModal\n\t\t\t\ttitle={`${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${\n\t\t\t\t\tticket.id\n\t\t\t\t} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${\n\t\t\t\t\tticket.contact.name\n\t\t\t\t}?`}\n\t\t\t\topen={confirmationOpen}\n\t\t\t\tonClose={setConfirmationOpen}\n\t\t\t\tonConfirm={handleDeleteTicket}\n\t\t\t>\n\t\t\t\t{i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\n\t\t\t</ConfirmationModal>\n\t\t\t<TransferTicketModal\n\t\t\t\tmodalOpen={transferTicketModalOpen}\n\t\t\t\tonClose={handleCloseTransferTicketModal}\n\t\t\t\tticketid={ticket.id}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default TicketOptionsMenu;\n","import React, { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { IconButton } from \"@material-ui/core\";\nimport { MoreVert, Replay } from \"@material-ui/icons\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport TicketOptionsMenu from \"../TicketOptionsMenu\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles(theme => ({\n\tactionButtons: {\n\t\tmarginRight: 6,\n\t\tflex: \"none\",\n\t\talignSelf: \"center\",\n\t\tmarginLeft: \"auto\",\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t},\n\t},\n}));\n\nconst TicketActionButtons = ({ ticket }) => {\n\tconst classes = useStyles();\n\tconst history = useHistory();\n\tconst [anchorEl, setAnchorEl] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst ticketOptionsMenuOpen = Boolean(anchorEl);\n\tconst { user } = useContext(AuthContext);\n\n\tconst handleOpenTicketOptionsMenu = e => {\n\t\tsetAnchorEl(e.currentTarget);\n\t};\n\n\tconst handleCloseTicketOptionsMenu = e => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst handleUpdateTicketStatus = async (e, status, userId) => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tawait api.put(`/tickets/${ticket.id}`, {\n\t\t\t\tstatus: status,\n\t\t\t\tuserId: userId || null,\n\t\t\t});\n\n\t\t\tsetLoading(false);\n\t\t\tif (status === \"open\") {\n\t\t\t\thistory.push(`/tickets/${ticket.id}`);\n\t\t\t} else {\n\t\t\t\thistory.push(\"/tickets\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.actionButtons}>\n\t\t\t{ticket.status === \"closed\" && (\n\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\tloading={loading}\n\t\t\t\t\tstartIcon={<Replay />}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\n\t\t\t\t>\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.reopen\")}\n\t\t\t\t</ButtonWithSpinner>\n\t\t\t)}\n\t\t\t{ticket.status === \"open\" && (\n\t\t\t\t<>\n\t\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tstartIcon={<Replay />}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"pending\", null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.return\")}\n\t\t\t\t\t</ButtonWithSpinner>\n\t\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.resolve\")}\n\t\t\t\t\t</ButtonWithSpinner>\n\t\t\t\t\t<IconButton onClick={handleOpenTicketOptionsMenu}>\n\t\t\t\t\t\t<MoreVert />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<TicketOptionsMenu\n\t\t\t\t\t\tticket={ticket}\n\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\tmenuOpen={ticketOptionsMenuOpen}\n\t\t\t\t\t\thandleClose={handleCloseTicketOptionsMenu}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{ticket.status === \"pending\" && (\n\t\t\t\t<ButtonWithSpinner\n\t\t\t\t\tloading={loading}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\n\t\t\t\t>\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.accept\")}\n\t\t\t\t</ButtonWithSpinner>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TicketActionButtons;\n","import React, { useEffect, useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\n\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nimport { Button, Divider, } from \"@material-ui/core\";\n\nconst VcardPreview = ({ contact, numbers }) => {\n    const history = useHistory();\n    const { user } = useContext(AuthContext);\n\n    const [selectedContact, setContact] = useState({\n        name: \"\",\n        number: 0,\n        profilePicUrl: \"\"\n    });\n\n    useEffect(() => {\n        const delayDebounceFn = setTimeout(() => {\n            const fetchContacts = async() => {\n                try {\n                    let contactObj = {\n                        name: contact,\n                        number: numbers.replace(/\\D/g, \"\"),\n                        email: \"\"\n                    }\n                    const { data } = await api.post(\"/contact\", contactObj);\n                    setContact(data)\n\n                } catch (err) {\n                    console.log(err)\n                    toastError(err);\n                }\n            };\n            fetchContacts();\n        }, 500);\n        return () => clearTimeout(delayDebounceFn);\n    }, [contact, numbers]);\n\n    const handleNewChat = async() => {\n        try {\n            const { data: ticket } = await api.post(\"/tickets\", {\n                contactId: selectedContact.id,\n                userId: user.id,\n                status: \"open\",\n            });\n            history.push(`/tickets/${ticket.id}`);\n        } catch (err) {\n            toastError(err);\n        }\n    }\n\n    return (\n\t\t<>\n\t\t\t<div style={{\n\t\t\t\tminWidth: \"250px\",\n\t\t\t}}>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={2}>\n\t\t\t\t\t\t<Avatar src={selectedContact.profilePicUrl} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={9}>\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"10px\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\n\t\t\t\t\t\t\t{selectedContact.name}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={handleNewChat}\n\t\t\t\t\t\t\tdisabled={!selectedContact.number}\n\t\t\t\t\t\t>Conversar</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</>\n\t);\n\n};\n\nexport default VcardPreview;","import React, { useEffect } from 'react';\nimport toastError from \"../../errors/toastError\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { Button, Divider, } from \"@material-ui/core\";\n\nconst LocationPreview = ({ image, link, description }) => {\n    useEffect(() => {}, [image, link, description]);\n\n    const handleLocation = async() => {\n        try {\n            window.open(link);\n        } catch (err) {\n            toastError(err);\n        }\n    }\n\n    return (\n\t\t<>\n\t\t\t<div style={{\n\t\t\t\tminWidth: \"250px\",\n\t\t\t}}>\n\t\t\t\t<div>\n\t\t\t\t\t<div style={{ float: \"left\" }}>\n\t\t\t\t\t\t<img src={image} onClick={handleLocation} style={{ width: \"100px\" }} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{ description && (\n\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"15px\", marginRight: \"15px\", float: \"left\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: description.replace('\\\\n', '<br />') }}></div>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div style={{ display: \"block\", content: \"\", clear: \"both\" }}></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={handleLocation}\n\t\t\t\t\t\t\tdisabled={!link}\n\t\t\t\t\t\t>Visualizar</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n\n};\n\nexport default LocationPreview;","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport ModalImage from \"react-modal-image\";\nimport api from \"../../services/api\";\n\nconst useStyles = makeStyles(theme => ({\n\tmessageMedia: {\n\t\tobjectFit: \"cover\",\n\t\twidth: 250,\n\t\theight: 200,\n\t\tborderTopLeftRadius: 8,\n\t\tborderTopRightRadius: 8,\n\t\tborderBottomLeftRadius: 8,\n\t\tborderBottomRightRadius: 8,\n\t},\n}));\n\nconst ModalImageCors = ({ imageUrl }) => {\n\tconst classes = useStyles();\n\tconst [fetching, setFetching] = useState(true);\n\tconst [blobUrl, setBlobUrl] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tif (!imageUrl) return;\n\t\tconst fetchImage = async () => {\n\t\t\tconst { data, headers } = await api.get(imageUrl, {\n\t\t\t\tresponseType: \"blob\",\n\t\t\t});\n\t\t\tconst url = window.URL.createObjectURL(\n\t\t\t\tnew Blob([data], { type: headers[\"content-type\"] })\n\t\t\t);\n\t\t\tsetBlobUrl(url);\n\t\t\tsetFetching(false);\n\t\t};\n\t\tfetchImage();\n\t}, [imageUrl]);\n\n\treturn (\n\t\t<ModalImage\n\t\t\tclassName={classes.messageMedia}\n\t\t\tsmallSrcSet={fetching ? imageUrl : blobUrl}\n\t\t\tmedium={fetching ? imageUrl : blobUrl}\n\t\t\tlarge={fetching ? imageUrl : blobUrl}\n\t\t\talt=\"image\"\n\t\t/>\n\t);\n};\n\nexport default ModalImageCors;\n","import React, { useState, useContext } from \"react\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport { Menu } from \"@material-ui/core\";\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\nimport toastError from \"../../errors/toastError\";\n\nconst MessageOptionsMenu = ({ message, menuOpen, handleClose, anchorEl }) => {\n  const { setReplyingMessage } = useContext(ReplyMessageContext);\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\n\n  const handleDeleteMessage = async () => {\n    try {\n      await api.delete(`/messages/${message.id}`);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const hanldeReplyMessage = () => {\n    setReplyingMessage(message);\n    handleClose();\n  };\n\n  const handleOpenConfirmationModal = (e) => {\n    setConfirmationOpen(true);\n    handleClose();\n  };\n\n  return (\n    <>\n      <ConfirmationModal\n        title={i18n.t(\"messageOptionsMenu.confirmationModal.title\")}\n        open={confirmationOpen}\n        onClose={setConfirmationOpen}\n        onConfirm={handleDeleteMessage}\n      >\n        {i18n.t(\"messageOptionsMenu.confirmationModal.message\")}\n      </ConfirmationModal>\n      <Menu\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\",\n        }}\n        open={menuOpen}\n        onClose={handleClose}\n      >\n        {message.fromMe && (\n          <MenuItem onClick={handleOpenConfirmationModal}>\n            {i18n.t(\"messageOptionsMenu.delete\")}\n          </MenuItem>\n        )}\n        <MenuItem onClick={hanldeReplyMessage}>\n          {i18n.t(\"messageOptionsMenu.reply\")}\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\n\nexport default MessageOptionsMenu;\n","import React, { useState, useEffect, useReducer, useRef } from \"react\";\n\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport openSocket from \"socket.io-client\";\nimport clsx from \"clsx\";\n\nimport { green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  makeStyles,\n} from \"@material-ui/core\";\nimport {\n  AccessTime,\n  Block,\n  Done,\n  DoneAll,\n  ExpandMore,\n  GetApp,\n} from \"@material-ui/icons\";\n\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport VcardPreview from \"../VcardPreview\";\nimport LocationPreview from \"../LocationPreview\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\n\nconst useStyles = makeStyles((theme) => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n  },\n\n  messagesList: {\n    backgroundImage: `url(${whatsBackground})`,\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingBottom: \"90px\",\n    },\n    ...theme.scrollbarStyles,\n  },\n\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12,\n  },\n\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\",\n  },\n\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\",\n  },\n\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\",\n  },\n\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\",\n  },\n\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\n  },\n\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500,\n  },\n\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  },\n\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\",\n  },\n\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4,\n  },\n\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10,\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n\n    messages.forEach((message) => {\n      const messageIndex = state.findIndex((m) => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n\n    return [...newMessages, ...state];\n  }\n\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst MessagesList = ({ ticketId, isGroup }) => {\n  const classes = useStyles();\n\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        try {\n          const { data } = await api.get(\"/messages/\" + ticketId, {\n            params: { pageNumber },\n          });\n\n          if (currentTicketId.current === ticketId) {\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n\n  useEffect(() => {\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", ticketId));\n\n    socket.on(\"appMessage\", (data) => {\n      if (data.action === \"create\") {\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\n        scrollToBottom();\n      }\n\n      if (data.action === \"update\") {\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId]);\n\n  const loadMore = () => {\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\n  };\n\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore) return;\n    const { scrollTop } = e.currentTarget;\n\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n\n  const handleCloseMessageOptionsMenu = (e) => {\n    setAnchorEl(null);\n  };\n\n  const checkMessageMedia = (message) => {\n\tif(message.mediaType === \"location\" && message.body.split('|').length >= 2) {\n\t\tlet locationParts = message.body.split('|')\n\t\tlet imageLocation = locationParts[0]\t\t\n\t\tlet linkLocation = locationParts[1]\n\t\t\n\t\tlet descriptionLocation = null\n\t\t\n\t\tif(locationParts.length > 2)\n\t\t\tdescriptionLocation = message.body.split('|')[2]\n\t\t\n\t\treturn <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\n\t}\n\telse if (message.mediaType === \"vcard\") {\n\t\t//console.log(\"vcard\")\n\t\t//console.log(message)\n\t\tlet array = message.body.split(\"\\n\");\n\t\tlet obj = [];\n\t\tlet contact = \"\";\n\t\tfor (let index = 0; index < array.length; index++) {\n\t\t\tconst v = array[index];\n\t\t\tlet values = v.split(\":\");\n\t\t\tfor (let ind = 0; ind < values.length; ind++) {\n\t\t\t\tif (values[ind].indexOf(\"+\") !== -1) {\n\t\t\t\t\tobj.push({ number: values[ind] });\n\t\t\t\t}\n\t\t\t\tif (values[ind].indexOf(\"FN\") !== -1) {\n\t\t\t\t\tcontact = values[ind + 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn <VcardPreview contact={contact} numbers={obj[0].number} />\n\t} \n  /*else if (message.mediaType === \"multi_vcard\") {\n\t\tconsole.log(\"multi_vcard\")\n\t\tconsole.log(message)\n\t\t\n\t\tif(message.body !== null && message.body !== \"\") {\n\t\t\tlet newBody = JSON.parse(message.body)\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t  {\n\t\t\t\t\tnewBody.map(v => (\n\t\t\t\t\t  <VcardPreview contact={v.name} numbers={v.number} />\n\t\t\t\t\t))\n\t\t\t\t  }\n\t\t\t\t</>\n\t\t\t)\n\t\t} else return (<></>)\n\t}*/\n  else if (message.mediaType === \"image\") {\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\n    } else if (message.mediaType === \"audio\") {\n      return (\n        <audio controls>\n          <source src={message.mediaUrl} type=\"audio/ogg\"></source>\n        </audio>\n      );\n    } else if (message.mediaType === \"video\") {\n      return (\n        <video\n          className={classes.messageMedia}\n          src={message.mediaUrl}\n          controls\n        />\n      );\n    } else {\n      return (\n        <>\n          <div className={classes.downloadMedia}>\n            <Button\n              startIcon={<GetApp />}\n              color=\"primary\"\n              variant=\"outlined\"\n              target=\"_blank\"\n              href={message.mediaUrl}\n            >\n              Download\n            </Button>\n          </div>\n          <Divider />\n        </>\n      );\n    }\n  };\n\n  const renderMessageAck = (message) => {\n    if (message.ack === 0) {\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 1) {\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 2) {\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 3 || message.ack === 4) {\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\n    }\n  };\n\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return (\n        <span\n          className={classes.dailyTimestamp}\n          key={`timestamp-${message.id}`}\n        >\n          <div className={classes.dailyTimestampText}>\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n          </div>\n        </span>\n      );\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return (\n          <span\n            className={classes.dailyTimestamp}\n            key={`timestamp-${message.id}`}\n          >\n            <div className={classes.dailyTimestampText}>\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n            </div>\n          </span>\n        );\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return (\n        <div\n          key={`ref-${message.createdAt}`}\n          ref={lastMessageRef}\n          style={{ float: \"left\", clear: \"both\" }}\n        />\n      );\n    }\n  };\n\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n\n      if (messageUser !== previousMessageUser) {\n        return (\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\n        );\n      }\n    }\n  };\n\n  const renderQuotedMessage = (message) => {\n    return (\n      <div\n        className={clsx(classes.quotedContainerLeft, {\n          [classes.quotedContainerRight]: message.fromMe,\n        })}\n      >\n        <span\n          className={clsx(classes.quotedSideColorLeft, {\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\n          })}\n        ></span>\n        <div className={classes.quotedMsg}>\n          {!message.quotedMsg?.fromMe && (\n            <span className={classes.messageContactName}>\n              {message.quotedMsg?.contact?.name}\n            </span>\n          )}\n          {message.quotedMsg?.body}\n        </div>\n      </div>\n    );\n  };\n\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n        if (!message.fromMe) {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageLeft}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n                {(message.mediaUrl || message.mediaType === \"location\" || message.mediaType === \"vcard\" \n                //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div className={classes.textContentItem}>\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        } else {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageRight}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {(message.mediaUrl || message.mediaType === \"location\" || message.mediaType === \"vcard\" \n                //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div\n                  className={clsx(classes.textContentItem, {\n                    [classes.textContentItemDeleted]: message.isDeleted,\n                  })}\n                >\n                  {message.isDeleted && (\n                    <Block\n                      color=\"disabled\"\n                      fontSize=\"small\"\n                      className={classes.deletedIcon}\n                    />\n                  )}\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                    {renderMessageAck(message)}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return <div>Say hello to your new contact!</div>;\n    }\n  };\n\n  return (\n    <div className={classes.messagesListWrapper}>\n      <MessageOptionsMenu\n        message={selectedMessage}\n        anchorEl={anchorEl}\n        menuOpen={messageOptionsMenuOpen}\n        handleClose={handleCloseMessageOptionsMenu}\n      />\n      <div\n        id=\"messagesList\"\n        className={classes.messagesList}\n        onScroll={handleScroll}\n      >\n        {messagesList.length > 0 ? renderMessages() : []}\n      </div>\n      {loading && (\n        <div>\n          <CircularProgress className={classes.circleLoading} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessagesList;","import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport openSocket from \"socket.io-client\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { Paper, makeStyles } from \"@material-ui/core\";\r\n\r\nimport ContactDrawer from \"../ContactDrawer\";\r\nimport MessageInput from \"../MessageInput/\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport TicketActionButtons from \"../TicketActionButtons\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport api from \"../../services/api\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  ticketInfo: {\r\n    maxWidth: \"50%\",\r\n    flexBasis: \"50%\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxWidth: \"80%\",\r\n      flexBasis: \"80%\",\r\n    },\r\n  },\r\n  ticketActionButtons: {\r\n    maxWidth: \"50%\",\r\n    flexBasis: \"50%\",\r\n    display: \"flex\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxWidth: \"100%\",\r\n      flexBasis: \"100%\",\r\n      marginBottom: \"5px\",\r\n    },\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nconst Ticket = () => {\r\n  const { ticketId } = useParams();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTicket = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets/\" + ticketId);\r\n\r\n          setContact(data.contact);\r\n          setTicket(data);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTicket();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [ticketId, history]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\r\n\r\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", ticketId));\r\n\r\n    socket.on(\"ticket\", (data) => {\r\n      if (data.action === \"update\") {\r\n        setTicket(data.ticket);\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        toast.success(\"Ticket deleted sucessfully.\");\r\n        history.push(\"/tickets\");\r\n      }\r\n    });\r\n\r\n    socket.on(\"contact\", (data) => {\r\n      if (data.action === \"update\") {\r\n        setContact((prevState) => {\r\n          if (prevState.id === data.contact?.id) {\r\n            return { ...prevState, ...data.contact };\r\n          }\r\n          return prevState;\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, history]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root} id=\"drawer-container\">\r\n      <Paper\r\n        variant=\"outlined\"\r\n        elevation={0}\r\n        className={clsx(classes.mainWrapper, {\r\n          [classes.mainWrapperShift]: drawerOpen,\r\n        })}\r\n      >\r\n        <TicketHeader loading={loading}>\r\n          <div className={classes.ticketInfo}>\r\n            <TicketInfo\r\n              contact={contact}\r\n              ticket={ticket}\r\n              onClick={handleDrawerOpen}\r\n            />\r\n          </div>\r\n          <div className={classes.ticketActionButtons}>\r\n            <TicketActionButtons ticket={ticket} />\r\n          </div>\r\n        </TicketHeader>\r\n        <ReplyMessageProvider>\r\n          <MessagesList\r\n            ticketId={ticketId}\r\n            isGroup={ticket.isGroup}\r\n          ></MessagesList>\r\n          <MessageInput ticketStatus={ticket.status} />\r\n        </ReplyMessageProvider>\r\n      </Paper>\r\n      <ContactDrawer\r\n        open={drawerOpen}\r\n        handleDrawerClose={handleDrawerClose}\r\n        contact={contact}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport TicketsManager from \"../../components/TicketsManager/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chatContainer: {\r\n    flex: 1,\r\n    // // backgroundColor: \"#eee\",\r\n    // padding: theme.spacing(4),\r\n    height: `calc(100% - 48px)`,\r\n    overflowY: \"hidden\",\r\n  },\r\n\r\n  chatPapper: {\r\n    // backgroundColor: \"red\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n  },\r\n\r\n  contactsWrapper: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflowY: \"hidden\",\r\n  },\r\n  contactsWrapperSmall: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflowY: \"hidden\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  messagessWrapper: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeMsg: {\r\n    backgroundColor: \"#eee\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    height: \"100%\",\r\n    textAlign: \"center\",\r\n    borderRadius: 0,\r\n  },\r\n  ticketsManager: {},\r\n  ticketsManagerClosed: {\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Chat = () => {\r\n  const classes = useStyles();\r\n  const { ticketId } = useParams();\r\n\r\n  return (\r\n    <div className={classes.chatContainer}>\r\n      <div className={classes.chatPapper}>\r\n        <Grid container spacing={0}>\r\n          {/* <Grid item xs={4} className={classes.contactsWrapper}> */}\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={4}\r\n            className={\r\n              ticketId ? classes.contactsWrapperSmall : classes.contactsWrapper\r\n            }\r\n          >\r\n            <TicketsManager />\r\n          </Grid>\r\n          <Grid item xs={12} md={8} className={classes.messagessWrapper}>\r\n            {/* <Grid item xs={8} className={classes.messagessWrapper}> */}\r\n            {ticketId ? (\r\n              <>\r\n                <Ticket />\r\n              </>\r\n            ) : (\r\n              <Hidden only={[\"sm\", \"xs\"]}>\r\n                <Paper className={classes.welcomeMsg}>\r\n                  {/* <Paper square variant=\"outlined\" className={classes.welcomeMsg}> */}\r\n                  <span>{i18n.t(\"chat.noTicketMessage\")}</span>\r\n                </Paper>\r\n              </Hidden>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useState } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form, Field } from \"formik\";\r\n\r\nimport {\r\n\tAvatar,\r\n\tButton,\r\n\tCssBaseline,\r\n\tTextField,\r\n\tGrid,\r\n\tBox,\r\n\tTypography,\r\n\tContainer,\r\n\tInputAdornment,\r\n\tIconButton,\r\n\tLink\r\n  } from '@material-ui/core';\r\n  \r\nimport { LockOutlined, Visibility, VisibilityOff } from '@material-ui/icons';\r\n  \r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\n// const Copyright = () => {\r\n// \treturn (\r\n// \t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n// \t\t\t{\"Copyleft \"}\r\n// \t\t\t<Link color=\"inherit\" href=\"https://github.com/canove\">\r\n// \t\t\t\tCanove\r\n// \t\t\t</Link>{\" \"}\r\n// \t\t\t{new Date().getFullYear()}\r\n// \t\t\t{\".\"}\r\n// \t\t</Typography>\r\n// \t);\r\n// };\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: theme.spacing(8),\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tavatar: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t},\r\n\tform: {\r\n\t\twidth: \"100%\",\r\n\t\tmarginTop: theme.spacing(3),\r\n\t},\r\n\tsubmit: {\r\n\t\tmargin: theme.spacing(3, 0, 2),\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst SignUp = () => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\r\n\tconst initialState = { name: \"\", email: \"\", password: \"\" };\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tconst [user] = useState(initialState);\r\n\r\n\tconst handleSignUp = async values => {\r\n\t\ttry {\r\n\t\t\tawait api.post(\"/auth/signup\", values);\r\n\t\t\ttoast.success(i18n.t(\"signup.toasts.success\"));\r\n\t\t\thistory.push(\"/login\");\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container component=\"main\" maxWidth=\"xs\">\r\n\t\t\t<CssBaseline />\r\n\t\t\t<div className={classes.paper}>\r\n\t\t\t\t<Avatar className={classes.avatar}>\r\n\t\t\t\t\t<LockOutlined />\r\n\t\t\t\t</Avatar>\r\n\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\r\n\t\t\t\t\t{i18n.t(\"signup.title\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{/* <form className={classes.form} noValidate onSubmit={handleSignUp}> */}\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSignUp(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form className={classes.form}>\r\n\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword((e) => !e)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityOff /> : <Visibility />}\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tclassName={classes.submit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.submit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Grid container justify=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.login\")}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</div>\r\n\t\t\t<Box mt={5}>{/* <Copyright /> */}</Box>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  TextField,\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Container,\r\n  InputAdornment,\r\n  IconButton,\r\n  Link\r\n} from '@material-ui/core';\r\n\r\nimport { LockOutlined, Visibility, VisibilityOff } from '@material-ui/icons';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n// const Copyright = () => {\r\n// \treturn (\r\n// \t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n// \t\t\t{\"Copyleft \"}\r\n// \t\t\t<Link color=\"inherit\" href=\"https://github.com/canove\">\r\n// \t\t\t\tCanove\r\n// \t\t\t</Link>{\" \"}\r\n// \t\t\t{new Date().getFullYear()}\r\n// \t\t\t{\".\"}\r\n// \t\t</Typography>\r\n// \t);\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst Login = () => {\r\n  const classes = useStyles();\r\n\r\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const { handleLogin } = useContext(AuthContext);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handlSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleLogin(user);\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlined />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          {i18n.t(\"login.title\")}\r\n        </Typography>\r\n        <form className={classes.form} noValidate onSubmit={handlSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label={i18n.t(\"login.form.email\")}\r\n            name=\"email\"\r\n            value={user.email}\r\n            onChange={handleChangeInput}\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label={i18n.t(\"login.form.password\")}\r\n            id=\"password\"\r\n            value={user.password}\r\n            onChange={handleChangeInput}\r\n            autoComplete=\"current-password\"\r\n            type={showPassword ? 'text' : 'password'}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={() => setShowPassword((e) => !e)}\r\n                  >\r\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            {i18n.t(\"login.buttons.submit\")}\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item>\r\n              <Link\r\n                href=\"#\"\r\n                variant=\"body2\"\r\n                component={RouterLink}\r\n                to=\"/signup\"\r\n              >\r\n                {i18n.t(\"login.buttons.register\")}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>{/* <Copyright /> */}</Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainContainer: {\n    flex: 1,\n    // padding: theme.spacing(2),\n    // height: `calc(100% - 48px)`,\n    padding: 0,\n    height: \"100%\",\n  },\n\n  contentWrapper: {\n    height: \"100%\",\n    overflowY: \"hidden\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n}));\n\nconst MainContainer = ({ children }) => {\n  const classes = useStyles();\n\n  return (\n    <Container className={classes.mainContainer} maxWidth={false}>\n      <div className={classes.contentWrapper}>{children}</div>\n    </Container>\n  );\n};\n\nexport default MainContainer;\n","import React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\tcontactsHeader: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tpadding: \"0px 6px 6px 6px\",\n\t},\n}));\n\nconst MainHeader = ({ children }) => {\n\tconst classes = useStyles();\n\n\treturn <div className={classes.contactsHeader}>{children}</div>;\n};\n\nexport default MainHeader;\n","import React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\tMainHeaderButtonsWrapper: {\n\t\tflex: \"none\",\n\t\tmarginLeft: \"auto\",\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t},\n\t},\n}));\n\nconst MainHeaderButtonsWrapper = ({ children }) => {\n\tconst classes = useStyles();\n\n\treturn <div className={classes.MainHeaderButtonsWrapper}>{children}</div>;\n};\n\nexport default MainHeaderButtonsWrapper;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport default function Title(props) {\n\treturn (\n\t\t<Typography variant=\"h5\" color=\"primary\" gutterBottom>\n\t\t\t{props.children}\n\t\t</Typography>\n\t);\n}\n","import React from \"react\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n\tcustomTableCell: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n}));\n\nconst TableRowSkeleton = ({ avatar, columns }) => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<>\n\t\t\t<TableRow>\n\t\t\t\t{avatar && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<TableCell style={{ paddingRight: 0 }}>\n\t\t\t\t\t\t\t<Skeleton\n\t\t\t\t\t\t\t\tanimation=\"wave\"\n\t\t\t\t\t\t\t\tvariant=\"circle\"\n\t\t\t\t\t\t\t\twidth={40}\n\t\t\t\t\t\t\t\theight={40}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t<Skeleton animation=\"wave\" height={30} width={80} />\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{Array.from({ length: columns }, (_, index) => (\n\t\t\t\t\t<TableCell align=\"center\" key={index}>\n\t\t\t\t\t\t<div className={classes.customTableCell}>\n\t\t\t\t\t\t\t<Skeleton\n\t\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t\t\tanimation=\"wave\"\n\t\t\t\t\t\t\t\theight={30}\n\t\t\t\t\t\t\t\twidth={80}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TableCell>\n\t\t\t\t))}\n\t\t\t</TableRow>\n\t\t</>\n\t);\n};\n\nexport default TableRowSkeleton;\n","import React, { useState, useEffect } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport {\r\n\tDialog,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tButton,\r\n\tDialogActions,\r\n\tCircularProgress,\r\n\tTextField,\r\n\tSwitch,\r\n\tFormControlLabel,\r\n} from \"@material-ui/core\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst SessionSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n});\r\n\r\nconst WhatsAppModal = ({ open, onClose, whatsAppId }) => {\r\n\tconst classes = useStyles();\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tgreetingMessage: \"\",\r\n\t\tfarewellMessage: \"\",\r\n\t\tisDefault: false,\r\n\t};\r\n\tconst [whatsApp, setWhatsApp] = useState(initialState);\r\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSession = async () => {\r\n\t\t\tif (!whatsAppId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`whatsapp/${whatsAppId}`);\r\n\t\t\t\tsetWhatsApp(data);\r\n\r\n\t\t\t\tconst whatsQueueIds = data.queues?.map(queue => queue.id);\r\n\t\t\t\tsetSelectedQueueIds(whatsQueueIds);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchSession();\r\n\t}, [whatsAppId]);\r\n\r\n\tconst handleSaveWhatsApp = async values => {\r\n\t\tconst whatsappData = { ...values, queueIds: selectedQueueIds };\r\n\r\n\t\ttry {\r\n\t\t\tif (whatsAppId) {\r\n\t\t\t\tawait api.put(`/whatsapp/${whatsAppId}`, whatsappData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/whatsapp\", whatsappData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"whatsappModal.success\"));\r\n\t\t\thandleClose();\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetWhatsApp(initialState);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{whatsAppId\r\n\t\t\t\t\t\t? i18n.t(\"whatsappModal.title.edit\")\r\n\t\t\t\t\t\t: i18n.t(\"whatsappModal.title.add\")}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={whatsApp}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={SessionSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveWhatsApp(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tas={Switch}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"isDefault\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={values.isDefault}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.default\")}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.greetingMessage\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && Boolean(errors.greetingMessage)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && errors.greetingMessage\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.farewellMessage\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"farewellMessage\"\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"farewellMessage\"\r\n\t\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.farewellMessage && Boolean(errors.farewellMessage)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.farewellMessage && errors.farewellMessage\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<QueueSelect\r\n\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\r\n\t\t\t\t\t\t\t\t\tonChange={selectedIds => setSelectedQueueIds(selectedIds)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"whatsappModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{whatsAppId\r\n\t\t\t\t\t\t\t\t\t\t? i18n.t(\"whatsappModal.buttons.okEdit\")\r\n\t\t\t\t\t\t\t\t\t\t: i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default React.memo(WhatsAppModal);\r\n","import React, { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode.react\";\nimport openSocket from \"socket.io-client\";\nimport toastError from \"../../errors/toastError\";\n\nimport { Dialog, DialogContent, Paper, Typography } from \"@material-ui/core\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\n\nconst QrcodeModal = ({ open, onClose, whatsAppId }) => {\n\tconst [qrCode, setQrCode] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst fetchSession = async () => {\n\t\t\tif (!whatsAppId) return;\n\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(`/whatsapp/${whatsAppId}`);\n\t\t\t\tsetQrCode(data.qrcode);\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t};\n\t\tfetchSession();\n\t}, [whatsAppId]);\n\n\tuseEffect(() => {\n\t\tif (!whatsAppId) return;\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n\t\tsocket.on(\"whatsappSession\", data => {\n\t\t\tif (data.action === \"update\" && data.session.id === whatsAppId) {\n\t\t\t\tsetQrCode(data.session.qrcode);\n\t\t\t}\n\n\t\t\tif (data.action === \"update\" && data.session.qrcode === \"\") {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, [whatsAppId, onClose]);\n\n\treturn (\n\t\t<Dialog open={open} onClose={onClose} maxWidth=\"lg\" scroll=\"paper\">\n\t\t\t<DialogContent>\n\t\t\t\t<Paper elevation={0}>\n\t\t\t\t\t<Typography color=\"primary\" gutterBottom>\n\t\t\t\t\t\t{i18n.t(\"qrCode.message\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{qrCode ? (\n\t\t\t\t\t\t<QRCode value={qrCode} size={256} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span>Waiting for QR Code</span>\n\t\t\t\t\t)}\n\t\t\t\t</Paper>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nexport default React.memo(QrcodeModal);\n","import React, { useState, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format, parseISO } from \"date-fns\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n\tButton,\r\n\tTableBody,\r\n\tTableRow,\r\n\tTableCell,\r\n\tIconButton,\r\n\tTable,\r\n\tTableHead,\r\n\tPaper,\r\n\tTooltip,\r\n\tTypography,\r\n\tCircularProgress,\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tEdit,\r\n\tCheckCircle,\r\n\tSignalCellularConnectedNoInternet2Bar,\r\n\tSignalCellularConnectedNoInternet0Bar,\r\n\tSignalCellular4Bar,\r\n\tCropFree,\r\n\tDeleteOutline,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\n\r\nimport api from \"../../services/api\";\r\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport QrcodeModal from \"../../components/QrcodeModal\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainPaper: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(1),\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\ttooltip: {\r\n\t\tbackgroundColor: \"#f5f5f9\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.87)\",\r\n\t\tfontSize: theme.typography.pxToRem(14),\r\n\t\tborder: \"1px solid #dadde9\",\r\n\t\tmaxWidth: 450,\r\n\t},\r\n\ttooltipPopper: {\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t},\r\n}));\r\n\r\nconst CustomToolTip = ({ title, content, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tarrow\r\n\t\t\tclasses={{\r\n\t\t\t\ttooltip: classes.tooltip,\r\n\t\t\t\tpopper: classes.tooltipPopper,\r\n\t\t\t}}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography gutterBottom color=\"inherit\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{content && <Typography>{content}</Typography>}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tooltip>\r\n\t);\r\n};\r\n\r\nconst Connections = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst { whatsApps, loading } = useContext(WhatsAppsContext);\r\n\tconst [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\r\n\tconst [qrModalOpen, setQrModalOpen] = useState(false);\r\n\tconst [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\r\n\tconst [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\tconst confirmationModalInitialState = {\r\n\t\taction: \"\",\r\n\t\ttitle: \"\",\r\n\t\tmessage: \"\",\r\n\t\twhatsAppId: \"\",\r\n\t\topen: false,\r\n\t};\r\n\tconst [confirmModalInfo, setConfirmModalInfo] = useState(\r\n\t\tconfirmationModalInitialState\r\n\t);\r\n\r\n\tconst handleStartWhatsAppSession = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.post(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRequestNewQrCode = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.put(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenWhatsAppModal = () => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseWhatsAppModal = useCallback(() => {\r\n\t\tsetWhatsAppModalOpen(false);\r\n\t\tsetSelectedWhatsApp(null);\r\n\t}, [setSelectedWhatsApp, setWhatsAppModalOpen]);\r\n\r\n\tconst handleOpenQrModal = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetQrModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseQrModal = useCallback(() => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetQrModalOpen(false);\r\n\t}, [setQrModalOpen, setSelectedWhatsApp]);\r\n\r\n\tconst handleEditWhatsApp = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = (action, whatsAppId) => {\r\n\t\tif (action === \"disconnect\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (action === \"delete\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.deleteTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.deleteMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetConfirmModalOpen(true);\r\n\t};\r\n\r\n\tconst handleSubmitConfirmationModal = async () => {\r\n\t\tif (confirmModalInfo.action === \"disconnect\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (confirmModalInfo.action === \"delete\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t\ttoast.success(i18n.t(\"connections.toasts.deleted\"));\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetConfirmModalInfo(confirmationModalInitialState);\r\n\t};\r\n\r\n\tconst renderActionButtons = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={() => handleOpenQrModal(whatsApp)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.qrcode\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => handleStartWhatsAppSession(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.tryAgain\")}\r\n\t\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => handleRequestNewQrCode(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.newQr\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"CONNECTED\" ||\r\n\t\t\t\t\twhatsApp.status === \"PAIRING\" ||\r\n\t\t\t\t\twhatsApp.status === \"TIMEOUT\") && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\thandleOpenConfirmationModal(\"disconnect\", whatsApp.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.disconnect\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.connecting\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderStatusToolTips = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.disconnected.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.disconnected.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.qrcode.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.qrcode.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CropFree />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"CONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\r\n\t\t\t\t\t\t<SignalCellular4Bar style={{ color: green[500] }} />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.timeout.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.timeout.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MainContainer>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={confirmModalInfo.title}\r\n\t\t\t\topen={confirmModalOpen}\r\n\t\t\t\tonClose={setConfirmModalOpen}\r\n\t\t\t\tonConfirm={handleSubmitConfirmationModal}\r\n\t\t\t>\r\n\t\t\t\t{confirmModalInfo.message}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<QrcodeModal\r\n\t\t\t\topen={qrModalOpen}\r\n\t\t\t\tonClose={handleCloseQrModal}\r\n\t\t\t\twhatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<WhatsAppModal\r\n\t\t\t\topen={whatsAppModalOpen}\r\n\t\t\t\tonClose={handleCloseWhatsAppModal}\r\n\t\t\t\twhatsAppId={!qrModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<Title>{i18n.t(\"connections.title\")}</Title>\r\n\t\t\t\t<MainHeaderButtonsWrapper>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={handleOpenWhatsAppModal}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.add\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</MainHeaderButtonsWrapper>\r\n\t\t\t</MainHeader>\r\n\t\t\t<Paper className={classes.mainPaper} variant=\"outlined\">\r\n\t\t\t\t<Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.name\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.status\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.session\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.lastUpdate\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.default\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.actions\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<TableRowSkeleton />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{whatsApps?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\twhatsApps.map(whatsApp => (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow key={whatsApp.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{whatsApp.name}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderStatusToolTips(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderActionButtons(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{format(parseISO(whatsApp.updatedAt), \"dd/MM/yy HH:mm\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApp.isDefault && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle style={{ color: green[500] }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditWhatsApp(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenConfirmationModal(\"delete\", whatsApp.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</Paper>\r\n\t\t</MainContainer>\r\n\t);\r\n};\r\n\r\nexport default Connections;\r\n","import React, { useState, useEffect } from \"react\";\nimport openSocket from \"socket.io-client\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Select from \"@material-ui/core/Select\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { toast } from \"react-toastify\";\n\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n.js\";\nimport toastError from \"../../errors/toastError\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tpadding: theme.spacing(8, 8, 3),\n\t},\n\n\tpaper: {\n\t\tpadding: theme.spacing(2),\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tmarginBottom: 12,\n\n\t},\n\n\tsettingOption: {\n\t\tmarginLeft: \"auto\",\n\t},\n\tmargin: {\n\t\tmargin: theme.spacing(1),\n\t},\n\n}));\n\nconst Settings = () => {\n\tconst classes = useStyles();\n\n\tconst [settings, setSettings] = useState([]);\n\n\tuseEffect(() => {\n\t\tconst fetchSession = async () => {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(\"/settings\");\n\t\t\t\tsetSettings(data);\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t};\n\t\tfetchSession();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n\t\tsocket.on(\"settings\", data => {\n\t\t\tif (data.action === \"update\") {\n\t\t\t\tsetSettings(prevState => {\n\t\t\t\t\tconst aux = [...prevState];\n\t\t\t\t\tconst settingIndex = aux.findIndex(s => s.key === data.setting.key);\n\t\t\t\t\taux[settingIndex].value = data.setting.value;\n\t\t\t\t\treturn aux;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, []);\n\n\tconst handleChangeSetting = async e => {\n\t\tconst selectedValue = e.target.value;\n\t\tconst settingKey = e.target.name;\n\n\t\ttry {\n\t\t\tawait api.put(`/settings/${settingKey}`, {\n\t\t\t\tvalue: selectedValue,\n\t\t\t});\n\t\t\ttoast.success(i18n.t(\"settings.success\"));\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\tconst getSettingValue = key => {\n\t\tconst { value } = settings.find(s => s.key === key);\n\t\treturn value;\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Container className={classes.container} maxWidth=\"sm\">\n\t\t\t\t<Typography variant=\"body2\" gutterBottom>\n\t\t\t\t\t{i18n.t(\"settings.title\")}\n\t\t\t\t</Typography>\n\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.name\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tnative\n\t\t\t\t\t\tid=\"userCreation-setting\"\n\t\t\t\t\t\tname=\"userCreation\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tsettings && settings.length > 0 && getSettingValue(\"userCreation\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={classes.settingOption}\n\t\t\t\t\t\tonChange={handleChangeSetting}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"enabled\">\n\t\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.options.enabled\")}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t<option value=\"disabled\">\n\t\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.options.disabled\")}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</Select>\n\n\t\t\t\t</Paper>\n\n\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid=\"api-token-setting\"\n\t\t\t\t\t\treadonly\n\t\t\t\t\t\tlabel=\"Token Api\"\n\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvalue={settings && settings.length > 0 && getSettingValue(\"userApiToken\")}\n\t\t\t\t\t/>\n\t\t\t\t</Paper>\n\n\t\t\t</Container>\n\t\t</div>\n\t);\n};\n\nexport default Settings;\n","import React, { useState, useEffect, useReducer } from \"react\";\nimport { toast } from \"react-toastify\";\nimport openSocket from \"socket.io-client\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\n\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport UserModal from \"../../components/UserModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_USERS\") {\n    const users = action.payload;\n    const newUsers = [];\n\n    users.forEach((user) => {\n      const userIndex = state.findIndex((u) => u.id === user.id);\n      if (userIndex !== -1) {\n        state[userIndex] = user;\n      } else {\n        newUsers.push(user);\n      }\n    });\n\n    return [...state, ...newUsers];\n  }\n\n  if (action.type === \"UPDATE_USERS\") {\n    const user = action.payload;\n    const userIndex = state.findIndex((u) => u.id === user.id);\n\n    if (userIndex !== -1) {\n      state[userIndex] = user;\n      return [...state];\n    } else {\n      return [user, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_USER\") {\n    const userId = action.payload;\n\n    const userIndex = state.findIndex((u) => u.id === userId);\n    if (userIndex !== -1) {\n      state.splice(userIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst Users = () => {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [users, dispatch] = useReducer(reducer, []);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchUsers = async () => {\n        try {\n          const { data } = await api.get(\"/users/\", {\n            params: { searchParam, pageNumber },\n          });\n          dispatch({ type: \"LOAD_USERS\", payload: data.users });\n          setHasMore(data.hasMore);\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n      fetchUsers();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n    socket.on(\"user\", (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleOpenUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(true);\n  };\n\n  const handleCloseUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditUser = (user) => {\n    setSelectedUser(user);\n    setUserModalOpen(true);\n  };\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      await api.delete(`/users/${userId}`);\n      toast.success(i18n.t(\"users.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingUser &&\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\n            deletingUser.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={setConfirmModalOpen}\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\n      >\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <UserModal\n        open={userModalOpen}\n        onClose={handleCloseUserModal}\n        aria-labelledby=\"form-dialog-title\"\n        userId={selectedUser && selectedUser.id}\n      />\n      <MainHeader>\n        <Title>{i18n.t(\"users.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <TextField\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon style={{ color: \"gray\" }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenUserModal}\n          >\n            {i18n.t(\"users.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper\n        className={classes.mainPaper}\n        variant=\"outlined\"\n        onScroll={handleScroll}\n      >\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.email\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.profile\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {users.map((user) => (\n                <TableRow key={user.id}>\n                  <TableCell align=\"center\">{user.name}</TableCell>\n                  <TableCell align=\"center\">{user.email}</TableCell>\n                  <TableCell align=\"center\">{user.profile}</TableCell>\n                  <TableCell align=\"center\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEditUser(user)}\n                    >\n                      <EditIcon />\n                    </IconButton>\n\n                    <IconButton\n                      size=\"small\"\n                      onClick={(e) => {\n                        setConfirmModalOpen(true);\n                        setDeletingUser(user);\n                      }}\n                    >\n                      <DeleteOutlineIcon />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {loading && <TableRowSkeleton columns={4} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Users;\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport openSocket from \"socket.io-client\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactModal from \"../../components/ContactModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contacts/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\r\n\r\n    socket.on(\"contact\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  const handleSaveTicket = async (contactId) => {\r\n    if (!contactId) return;\r\n    setLoading(true);\r\n    try {\r\n      const { data: ticket } = await api.post(\"/tickets\", {\r\n        contactId: contactId,\r\n        userId: user?.id,\r\n        status: \"open\",\r\n      });\r\n      history.push(`/tickets/${ticket.id}`);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contacts/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleimportContact = async () => {\r\n    try {\r\n      await api.post(\"/contacts/import\");\r\n      history.go(0);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={(e) =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleimportContact()\r\n        }\r\n      >\r\n        {deletingContact\r\n          ? `${i18n.t(\"contacts.confirmationModal.deleteMessage\")}`\r\n          : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"contacts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={(e) => setConfirmOpen(true)}\r\n          >\r\n            {i18n.t(\"contacts.buttons.import\")}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenContactModal}\r\n          >\r\n            {i18n.t(\"contacts.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\" />\r\n              <TableCell>{i18n.t(\"contacts.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell style={{ paddingRight: 0 }}>\r\n                    {<Avatar src={contact.profilePicUrl} />}\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleSaveTicket(contact.id)}\r\n                    >\r\n                      <WhatsAppIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={(e) => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton avatar columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport {\n  makeStyles,\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport { green } from \"@material-ui/core/colors\";\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexWrap: \"wrap\",\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    width: \"100%\",\n  },\n\n  btnWrapper: {\n    position: \"relative\",\n  },\n\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  textQuickAnswerContainer: {\n    width: \"100%\",\n  },\n}));\n\nconst QuickAnswerSchema = Yup.object().shape({\n  shortcut: Yup.string()\n    .min(2, \"Too Short!\")\n    .max(15, \"Too Long!\")\n    .required(\"Required\"),\n  message: Yup.string()\n    .min(8, \"Too Short!\")\n    .max(30000, \"Too Long!\")\n    .required(\"Required\"),\n});\n\nconst QuickAnswersModal = ({\n  open,\n  onClose,\n  quickAnswerId,\n  initialValues,\n  onSave,\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n\n  const initialState = {\n    shortcut: \"\",\n    message: \"\",\n  };\n\n  const [quickAnswer, setQuickAnswer] = useState(initialState);\n\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const fetchQuickAnswer = async () => {\n      if (initialValues) {\n        setQuickAnswer((prevState) => {\n          return { ...prevState, ...initialValues };\n        });\n      }\n\n      if (!quickAnswerId) return;\n\n      try {\n        const { data } = await api.get(`/quickAnswers/${quickAnswerId}`);\n        if (isMounted.current) {\n          setQuickAnswer(data);\n        }\n      } catch (err) {\n        toastError(err);\n      }\n    };\n\n    fetchQuickAnswer();\n  }, [quickAnswerId, open, initialValues]);\n\n  const handleClose = () => {\n    onClose();\n    setQuickAnswer(initialState);\n  };\n\n  const handleSaveQuickAnswer = async (values) => {\n    try {\n      if (quickAnswerId) {\n        await api.put(`/quickAnswers/${quickAnswerId}`, values);\n        handleClose();\n      } else {\n        const { data } = await api.post(\"/quickAnswers\", values);\n        if (onSave) {\n          onSave(data);\n        }\n        handleClose();\n      }\n      toast.success(i18n.t(\"quickAnswersModal.success\"));\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        maxWidth=\"sm\"\n        fullWidth\n        scroll=\"paper\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          {quickAnswerId\n            ? `${i18n.t(\"quickAnswersModal.title.edit\")}`\n            : `${i18n.t(\"quickAnswersModal.title.add\")}`}\n        </DialogTitle>\n        <Formik\n          initialValues={quickAnswer}\n          enableReinitialize={true}\n          validationSchema={QuickAnswerSchema}\n          onSubmit={(values, actions) => {\n            setTimeout(() => {\n              handleSaveQuickAnswer(values);\n              actions.setSubmitting(false);\n            }, 400);\n          }}\n        >\n          {({ values, errors, touched, isSubmitting }) => (\n            <Form>\n              <DialogContent dividers>\n                <div className={classes.textQuickAnswerContainer}>\n                  <Field\n                    as={TextField}\n                    label={i18n.t(\"quickAnswersModal.form.shortcut\")}\n                    name=\"shortcut\"\n                    autoFocus\n                    error={touched.shortcut && Boolean(errors.shortcut)}\n                    helperText={touched.shortcut && errors.shortcut}\n                    variant=\"outlined\"\n                    margin=\"dense\"\n                    className={classes.textField}\n                    fullWidth\n                  />\n                </div>\n                <div className={classes.textQuickAnswerContainer}>\n                  <Field\n                    as={TextField}\n                    label={i18n.t(\"quickAnswersModal.form.message\")}\n                    name=\"message\"\n                    error={touched.message && Boolean(errors.message)}\n                    helperText={touched.message && errors.message}\n                    variant=\"outlined\"\n                    margin=\"dense\"\n                    className={classes.textField}\n                    multiline\n                    rows={5}\n                    fullWidth\n                  />\n                </div>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleClose}\n                  color=\"secondary\"\n                  disabled={isSubmitting}\n                  variant=\"outlined\"\n                >\n                  {i18n.t(\"quickAnswersModal.buttons.cancel\")}\n                </Button>\n                <Button\n                  type=\"submit\"\n                  color=\"primary\"\n                  disabled={isSubmitting}\n                  variant=\"contained\"\n                  className={classes.btnWrapper}\n                >\n                  {quickAnswerId\n                    ? `${i18n.t(\"quickAnswersModal.buttons.okEdit\")}`\n                    : `${i18n.t(\"quickAnswersModal.buttons.okAdd\")}`}\n                  {isSubmitting && (\n                    <CircularProgress\n                      size={24}\n                      className={classes.buttonProgress}\n                    />\n                  )}\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default QuickAnswersModal;\n","import React, { useState, useEffect, useReducer } from \"react\";\nimport openSocket from \"socket.io-client\";\n\nimport {\n  Button,\n  IconButton,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  InputAdornment,\n  TextField,\n} from \"@material-ui/core\";\nimport { Edit, DeleteOutline } from \"@material-ui/icons\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\n\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport QuickAnswersModal from \"../../components/QuickAnswersModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport { toast } from \"react-toastify\";\nimport toastError from \"../../errors/toastError\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_QUICK_ANSWERS\") {\n    const quickAnswers = action.payload;\n    const newQuickAnswers = [];\n\n    quickAnswers.forEach((quickAnswer) => {\n      const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswer.id);\n      if (quickAnswerIndex !== -1) {\n        state[quickAnswerIndex] = quickAnswer;\n      } else {\n        newQuickAnswers.push(quickAnswer);\n      }\n    });\n\n    return [...state, ...newQuickAnswers];\n  }\n\n  if (action.type === \"UPDATE_QUICK_ANSWERS\") {\n    const quickAnswer = action.payload;\n    const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswer.id);\n\n    if (quickAnswerIndex !== -1) {\n      state[quickAnswerIndex] = quickAnswer;\n      return [...state];\n    } else {\n      return [quickAnswer, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_QUICK_ANSWERS\") {\n    const quickAnswerId = action.payload;\n\n    const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswerId);\n    if (quickAnswerIndex !== -1) {\n      state.splice(quickAnswerIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst QuickAnswers = () => {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [quickAnswers, dispatch] = useReducer(reducer, []);\n  const [selectedQuickAnswers, setSelectedQuickAnswers] = useState(null);\n  const [quickAnswersModalOpen, setQuickAnswersModalOpen] = useState(false);\n  const [deletingQuickAnswers, setDeletingQuickAnswers] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchQuickAnswers = async () => {\n        try {\n          const { data } = await api.get(\"/quickAnswers/\", {\n            params: { searchParam, pageNumber },\n          });\n          dispatch({ type: \"LOAD_QUICK_ANSWERS\", payload: data.quickAnswers });\n          setHasMore(data.hasMore);\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n      fetchQuickAnswers();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n    socket.on(\"quickAnswer\", (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_QUICK_ANSWERS\", payload: data.quickAnswer });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({\n          type: \"DELETE_QUICK_ANSWERS\",\n          payload: +data.quickAnswerId,\n        });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleOpenQuickAnswersModal = () => {\n    setSelectedQuickAnswers(null);\n    setQuickAnswersModalOpen(true);\n  };\n\n  const handleCloseQuickAnswersModal = () => {\n    setSelectedQuickAnswers(null);\n    setQuickAnswersModalOpen(false);\n  };\n\n  const handleEditQuickAnswers = (quickAnswer) => {\n    setSelectedQuickAnswers(quickAnswer);\n    setQuickAnswersModalOpen(true);\n  };\n\n  const handleDeleteQuickAnswers = async (quickAnswerId) => {\n    try {\n      await api.delete(`/quickAnswers/${quickAnswerId}`);\n      toast.success(i18n.t(\"quickAnswers.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingQuickAnswers(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingQuickAnswers &&\n          `${i18n.t(\"quickAnswers.confirmationModal.deleteTitle\")} ${\n            deletingQuickAnswers.shortcut\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={setConfirmModalOpen}\n        onConfirm={() => handleDeleteQuickAnswers(deletingQuickAnswers.id)}\n      >\n        {i18n.t(\"quickAnswers.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <QuickAnswersModal\n        open={quickAnswersModalOpen}\n        onClose={handleCloseQuickAnswersModal}\n        aria-labelledby=\"form-dialog-title\"\n        quickAnswerId={selectedQuickAnswers && selectedQuickAnswers.id}\n      ></QuickAnswersModal>\n      <MainHeader>\n        <Title>{i18n.t(\"quickAnswers.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <TextField\n            placeholder={i18n.t(\"quickAnswers.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon style={{ color: \"gray\" }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenQuickAnswersModal}\n          >\n            {i18n.t(\"quickAnswers.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper\n        className={classes.mainPaper}\n        variant=\"outlined\"\n        onScroll={handleScroll}\n      >\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">\n                {i18n.t(\"quickAnswers.table.shortcut\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"quickAnswers.table.message\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"quickAnswers.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {quickAnswers.map((quickAnswer) => (\n                <TableRow key={quickAnswer.id}>\n                  <TableCell align=\"center\">{quickAnswer.shortcut}</TableCell>\n                  <TableCell align=\"center\">{quickAnswer.message}</TableCell>\n                  <TableCell align=\"center\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEditQuickAnswers(quickAnswer)}\n                    >\n                      <Edit />\n                    </IconButton>\n\n                    <IconButton\n                      size=\"small\"\n                      onClick={(e) => {\n                        setConfirmModalOpen(true);\n                        setDeletingQuickAnswers(quickAnswer);\n                      }}\n                    >\n                      <DeleteOutline />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {loading && <TableRowSkeleton columns={3} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default QuickAnswers;\n","import { Dialog } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\n\nimport { GithubPicker } from \"react-color\";\n\nconst ColorPicker = ({ onChange, currentColor, handleClose, open }) => {\n  const [selectedColor, setSelectedColor] = useState(currentColor);\n  const colors = [\n    \"#B80000\",\n    \"#DB3E00\",\n    \"#FCCB00\",\n    \"#008B02\",\n    \"#006B76\",\n    \"#1273DE\",\n    \"#004DCF\",\n    \"#5300EB\",\n    \"#EB9694\",\n    \"#FAD0C3\",\n    \"#FEF3BD\",\n    \"#C1E1C5\",\n    \"#BEDADC\",\n    \"#C4DEF6\",\n    \"#BED3F3\",\n    \"#D4C4FB\",\n    \"#4D4D4D\",\n    \"#999999\",\n    \"#FFFFFF\",\n    \"#F44E3B\",\n    \"#FE9200\",\n    \"#FCDC00\",\n    \"#DBDF00\",\n    \"#A4DD00\",\n    \"#68CCCA\",\n    \"#73D8FF\",\n    \"#AEA1FF\",\n    \"#FDA1FF\",\n    \"#333333\",\n    \"#808080\",\n    \"#cccccc\",\n    \"#D33115\",\n    \"#E27300\",\n    \"#FCC400\",\n    \"#B0BC00\",\n    \"#68BC00\",\n    \"#16A5A5\",\n    \"#009CE0\",\n    \"#7B64FF\",\n    \"#FA28FF\",\n    \"#666666\",\n    \"#B3B3B3\",\n    \"#9F0500\",\n    \"#C45100\",\n    \"#FB9E00\",\n    \"#808900\",\n    \"#194D33\",\n    \"#0C797D\",\n    \"#0062B1\",\n    \"#653294\",\n    \"#AB149E\",\n  ];\n\n  const handleChange = (color) => {\n    setSelectedColor(color.hex);\n    handleClose();\n  };\n\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"simple-dialog-title\"\n      open={open}\n      maxWidth=\"xs\"\n      paperFullWidth\n    >\n      <GithubPicker\n        width={\"100%\"}\n        triangle=\"hide\"\n        color={selectedColor}\n        colors={colors}\n        onChange={handleChange}\n        onChangeComplete={(color) => onChange(color.hex)}\n      />\n    </Dialog>\n  );\n};\n\nexport default ColorPicker;\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport ColorPicker from \"../ColorPicker\";\nimport { IconButton, InputAdornment } from \"@material-ui/core\";\nimport { Colorize } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttextField: {\n\t\tmarginRight: theme.spacing(1),\n\t\tflex: 1,\n\t},\n\n\tbtnWrapper: {\n\t\tposition: \"relative\",\n\t},\n\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: \"absolute\",\n\t\ttop: \"50%\",\n\t\tleft: \"50%\",\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n\tformControl: {\n\t\tmargin: theme.spacing(1),\n\t\tminWidth: 120,\n\t},\n\tcolorAdorment: {\n\t\twidth: 20,\n\t\theight: 20,\n\t},\n}));\n\nconst QueueSchema = Yup.object().shape({\n\tname: Yup.string()\n\t\t.min(2, \"Too Short!\")\n\t\t.max(50, \"Too Long!\")\n\t\t.required(\"Required\"),\n\tcolor: Yup.string().min(3, \"Too Short!\").max(9, \"Too Long!\").required(),\n\tgreetingMessage: Yup.string(),\n});\n\nconst QueueModal = ({ open, onClose, queueId }) => {\n\tconst classes = useStyles();\n\n\tconst initialState = {\n\t\tname: \"\",\n\t\tcolor: \"\",\n\t\tgreetingMessage: \"\",\n\t};\n\n\tconst [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\n\tconst [queue, setQueue] = useState(initialState);\n\tconst greetingRef = useRef();\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (!queueId) return;\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(`/queue/${queueId}`);\n\t\t\t\tsetQueue(prevState => {\n\t\t\t\t\treturn { ...prevState, ...data };\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t})();\n\n\t\treturn () => {\n\t\t\tsetQueue({\n\t\t\t\tname: \"\",\n\t\t\t\tcolor: \"\",\n\t\t\t\tgreetingMessage: \"\",\n\t\t\t});\n\t\t};\n\t}, [queueId, open]);\n\n\tconst handleClose = () => {\n\t\tonClose();\n\t\tsetQueue(initialState);\n\t};\n\n\tconst handleSaveQueue = async values => {\n\t\ttry {\n\t\t\tif (queueId) {\n\t\t\t\tawait api.put(`/queue/${queueId}`, values);\n\t\t\t} else {\n\t\t\t\tawait api.post(\"/queue\", values);\n\t\t\t}\n\t\t\ttoast.success(\"Queue saved successfully\");\n\t\t\thandleClose();\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog open={open} onClose={handleClose} scroll=\"paper\">\n\t\t\t\t<DialogTitle>\n\t\t\t\t\t{queueId\n\t\t\t\t\t\t? `${i18n.t(\"queueModal.title.edit\")}`\n\t\t\t\t\t\t: `${i18n.t(\"queueModal.title.add\")}`}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={queue}\n\t\t\t\t\tenableReinitialize={true}\n\t\t\t\t\tvalidationSchema={QueueSchema}\n\t\t\t\t\tonSubmit={(values, actions) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\thandleSaveQueue(values);\n\t\t\t\t\t\t\tactions.setSubmitting(false);\n\t\t\t\t\t\t}, 400);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ touched, errors, isSubmitting, values }) => (\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.name\")}\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.color\")}\n\t\t\t\t\t\t\t\t\tname=\"color\"\n\t\t\t\t\t\t\t\t\tid=\"color\"\n\t\t\t\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\t\t\t\tsetColorPickerModalOpen(true);\n\t\t\t\t\t\t\t\t\t\tgreetingRef.current.focus();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\terror={touched.color && Boolean(errors.color)}\n\t\t\t\t\t\t\t\t\thelperText={touched.color && errors.color}\n\t\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t\tstartAdornment: (\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: values.color }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.colorAdorment}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setColorPickerModalOpen(true)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Colorize />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\t\t\topen={colorPickerModalOpen}\n\t\t\t\t\t\t\t\t\thandleClose={() => setColorPickerModalOpen(false)}\n\t\t\t\t\t\t\t\t\tonChange={color => {\n\t\t\t\t\t\t\t\t\t\tvalues.color = color;\n\t\t\t\t\t\t\t\t\t\tsetQueue(() => {\n\t\t\t\t\t\t\t\t\t\t\treturn { ...values, color };\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.greetingMessage\")}\n\t\t\t\t\t\t\t\t\t\ttype=\"greetingMessage\"\n\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\tinputRef={greetingRef}\n\t\t\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tname=\"greetingMessage\"\n\t\t\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && Boolean(errors.greetingMessage)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && errors.greetingMessage\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{i18n.t(\"queueModal.buttons.cancel\")}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{queueId\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"queueModal.buttons.okEdit\")}`\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"queueModal.buttons.okAdd\")}`}\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)}\n\t\t\t\t</Formik>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nexport default QueueModal;\n","import React, { useEffect, useReducer, useState } from \"react\";\n\nimport openSocket from \"socket.io-client\";\n\nimport {\n  Button,\n  IconButton,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Typography,\n} from \"@material-ui/core\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport Title from \"../../components/Title\";\nimport { i18n } from \"../../translate/i18n\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\nimport QueueModal from \"../../components/QueueModal\";\nimport { toast } from \"react-toastify\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  customTableCell: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_QUEUES\") {\n    const queues = action.payload;\n    const newQueues = [];\n\n    queues.forEach((queue) => {\n      const queueIndex = state.findIndex((q) => q.id === queue.id);\n      if (queueIndex !== -1) {\n        state[queueIndex] = queue;\n      } else {\n        newQueues.push(queue);\n      }\n    });\n\n    return [...state, ...newQueues];\n  }\n\n  if (action.type === \"UPDATE_QUEUES\") {\n    const queue = action.payload;\n    const queueIndex = state.findIndex((u) => u.id === queue.id);\n\n    if (queueIndex !== -1) {\n      state[queueIndex] = queue;\n      return [...state];\n    } else {\n      return [queue, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_QUEUE\") {\n    const queueId = action.payload;\n    const queueIndex = state.findIndex((q) => q.id === queueId);\n    if (queueIndex !== -1) {\n      state.splice(queueIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst Queues = () => {\n  const classes = useStyles();\n\n  const [queues, dispatch] = useReducer(reducer, []);\n  const [loading, setLoading] = useState(false);\n\n  const [queueModalOpen, setQueueModalOpen] = useState(false);\n  const [selectedQueue, setSelectedQueue] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      try {\n        const { data } = await api.get(\"/queue\");\n        dispatch({ type: \"LOAD_QUEUES\", payload: data });\n\n        setLoading(false);\n      } catch (err) {\n        toastError(err);\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n    socket.on(\"queue\", (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_QUEUES\", payload: data.queue });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_QUEUE\", payload: data.queueId });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleOpenQueueModal = () => {\n    setQueueModalOpen(true);\n    setSelectedQueue(null);\n  };\n\n  const handleCloseQueueModal = () => {\n    setQueueModalOpen(false);\n    setSelectedQueue(null);\n  };\n\n  const handleEditQueue = (queue) => {\n    setSelectedQueue(queue);\n    setQueueModalOpen(true);\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setConfirmModalOpen(false);\n    setSelectedQueue(null);\n  };\n\n  const handleDeleteQueue = async (queueId) => {\n    try {\n      await api.delete(`/queue/${queueId}`);\n      toast.success(i18n.t(\"Queue deleted successfully!\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setSelectedQueue(null);\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          selectedQueue &&\n          `${i18n.t(\"queues.confirmationModal.deleteTitle\")} ${\n            selectedQueue.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={handleCloseConfirmationModal}\n        onConfirm={() => handleDeleteQueue(selectedQueue.id)}\n      >\n        {i18n.t(\"queues.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <QueueModal\n        open={queueModalOpen}\n        onClose={handleCloseQueueModal}\n        queueId={selectedQueue?.id}\n      />\n      <MainHeader>\n        <Title>{i18n.t(\"queues.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenQueueModal}\n          >\n            {i18n.t(\"queues.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper className={classes.mainPaper} variant=\"outlined\">\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">\n                {i18n.t(\"queues.table.name\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"queues.table.color\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"queues.table.greeting\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"queues.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {queues.map((queue) => (\n                <TableRow key={queue.id}>\n                  <TableCell align=\"center\">{queue.name}</TableCell>\n                  <TableCell align=\"center\">\n                    <div className={classes.customTableCell}>\n                      <span\n                        style={{\n                          backgroundColor: queue.color,\n                          width: 60,\n                          height: 20,\n                          alignSelf: \"center\",\n                        }}\n                      />\n                    </div>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <div className={classes.customTableCell}>\n                      <Typography\n                        style={{ width: 300, align: \"center\" }}\n                        noWrap\n                        variant=\"body2\"\n                      >\n                        {queue.greetingMessage}\n                      </Typography>\n                    </div>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEditQueue(queue)}\n                    >\n                      <Edit />\n                    </IconButton>\n\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => {\n                        setSelectedQueue(queue);\n                        setConfirmModalOpen(true);\n                      }}\n                    >\n                      <DeleteOutline />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {loading && <TableRowSkeleton columns={4} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Queues;\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttextField: {\n\t\tmarginRight: theme.spacing(1),\n\t\tflex: 1,\n\t},\n\n\tbtnWrapper: {\n\t\tposition: \"relative\",\n\t},\n\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: \"absolute\",\n\t\ttop: \"50%\",\n\t\tleft: \"50%\",\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n\tformControl: {\n\t\tmargin: theme.spacing(1),\n\t\tminWidth: 120,\n\t},\n\tcolorAdorment: {\n\t\twidth: 20,\n\t\theight: 20,\n\t},\n}));\n\nconst QueueSchema = Yup.object().shape({\n\tname: Yup.string()\n\t\t.min(2, \"Too Short!\")\n\t\t.max(50, \"Too Long!\")\n\t\t.required(\"Required\"),\n\tcolor: Yup.string().min(3, \"Too Short!\").max(9, \"Too Long!\").required(),\n\tgreetingMessage: Yup.string(),\n});\n\nconst QueueModal = ({ open, onClose, queueId }) => {\n\tconst classes = useStyles();\n\n\tconst initialState = {\n\t\tname: \"\",\n\t\tcolor: \"\",\n\t\tgreetingMessage: \"\",\n\t};\n\n\tconst [queue, setQueue] = useState(initialState);\n\tconst greetingRef = useRef();\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (!queueId) return;\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(`/queue/${queueId}`);\n\t\t\t\tsetQueue(prevState => {\n\t\t\t\t\treturn { ...prevState, ...data };\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t})();\n\n\t\treturn () => {\n\t\t\tsetQueue({\n\t\t\t\tname: \"\",\n\t\t\t\tcolor: \"\",\n\t\t\t\tgreetingMessage: \"\",\n\t\t\t});\n\t\t};\n\t}, [queueId, open]);\n\n\tconst handleClose = () => {\n\t\tonClose();\n\t\tsetQueue(initialState);\n\t};\n\n\tconst handleSaveQueue = async values => {\n\t\ttry {\n\t\t\tif (queueId) {\n\t\t\t\tawait api.put(`/queue/${queueId}`, values);\n\t\t\t} else {\n\t\t\t\tawait api.post(\"/queue\", values);\n\t\t\t}\n\t\t\ttoast.success(\"Queue saved successfully\");\n\t\t\thandleClose();\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog open={open} onClose={handleClose} scroll=\"paper\">\n\t\t\t\t<DialogTitle>\n\t\t\t\t\t{queueId\n\t\t\t\t\t\t? `${i18n.t(\"campaignModal.title.edit\")}`\n\t\t\t\t\t\t: `${i18n.t(\"campaignModal.title.add\")}`}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={queue}\n\t\t\t\t\tenableReinitialize={true}\n\t\t\t\t\tvalidationSchema={QueueSchema}\n\t\t\t\t\tonSubmit={(values, actions) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\thandleSaveQueue(values);\n\t\t\t\t\t\t\tactions.setSubmitting(false);\n\t\t\t\t\t\t}, 400);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ touched, errors, isSubmitting, values }) => (\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"campaignModal.form.name\")}\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"campaignModal.form.conextion\")}\n\t\t\t\t\t\t\t\t\tname=\"conextion\"\n\t\t\t\t\t\t\t\t\tid=\"conextion\"\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tas={TextField}\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"campaignModal.form.message\")}\n\t\t\t\t\t\t\t\t\t\ttype=\"greetingMessage\"\n\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\tinputRef={greetingRef}\n\t\t\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tname=\"greetingMessage\"\n\t\t\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && Boolean(errors.greetingMessage)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && errors.greetingMessage\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{i18n.t(\"queueModal.buttons.cancel\")}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{queueId\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"queueModal.buttons.okEdit\")}`\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"queueModal.buttons.okAdd\")}`}\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)}\n\t\t\t\t</Formik>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nexport default QueueModal;\n","import React, { useEffect, useReducer, useState } from \"react\";\n\nimport openSocket from \"socket.io-client\";\n\nimport {\n  Button,\n  IconButton,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Typography,\n} from \"@material-ui/core\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport Title from \"../../components/Title\";\nimport { i18n } from \"../../translate/i18n\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\nimport CampaignModal from \"../../components/CampaignModal\";\nimport { toast } from \"react-toastify\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  customTableCell: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_QUEUES\") {\n    const queues = action.payload;\n    const newQueues = [];\n\n    queues.forEach((queue) => {\n      const queueIndex = state.findIndex((q) => q.id === queue.id);\n      if (queueIndex !== -1) {\n        state[queueIndex] = queue;\n      } else {\n        newQueues.push(queue);\n      }\n    });\n\n    return [...state, ...newQueues];\n  }\n\n  if (action.type === \"UPDATE_QUEUES\") {\n    const queue = action.payload;\n    const queueIndex = state.findIndex((u) => u.id === queue.id);\n\n    if (queueIndex !== -1) {\n      state[queueIndex] = queue;\n      return [...state];\n    } else {\n      return [queue, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_QUEUE\") {\n    const queueId = action.payload;\n    const queueIndex = state.findIndex((q) => q.id === queueId);\n    if (queueIndex !== -1) {\n      state.splice(queueIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst Queues = () => {\n  const classes = useStyles();\n\n  const [queues, dispatch] = useReducer(reducer, []);\n  const [loading, setLoading] = useState(false);\n\n  const [CampaignModalOpen, setCampaignModalOpen] = useState(false);\n  const [selectedQueue, setSelectedQueue] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      try {\n        const { data } = await api.get(\"/queue\");\n        dispatch({ type: \"LOAD_QUEUES\", payload: data });\n\n        setLoading(false);\n      } catch (err) {\n        toastError(err);\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\n\n    socket.on(\"queue\", (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_QUEUES\", payload: data.queue });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_QUEUE\", payload: data.queueId });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleOpenCampaignModal = () => {\n    setCampaignModalOpen(true);\n    setSelectedQueue(null);\n  };\n\n  const handleCloseCampaignModal = () => {\n    setCampaignModalOpen(false);\n    setSelectedQueue(null);\n  };\n\n  const handleEditQueue = (queue) => {\n    setSelectedQueue(queue);\n    setCampaignModalOpen(true);\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setConfirmModalOpen(false);\n    setSelectedQueue(null);\n  };\n\n  const handleDeleteQueue = async (queueId) => {\n    try {\n      await api.delete(`/queue/${queueId}`);\n      toast.success(i18n.t(\"Queue deleted successfully!\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setSelectedQueue(null);\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          selectedQueue &&\n          `${i18n.t(\"campaigns.confirmationModal.deleteTitle\")} ${\n            selectedQueue.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={handleCloseConfirmationModal}\n        onConfirm={() => handleDeleteQueue(selectedQueue.id)}\n      >\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <CampaignModal\n        open={CampaignModalOpen}\n        onClose={handleCloseCampaignModal}\n        queueId={selectedQueue?.id}\n      />\n      <MainHeader>\n        <Title>{i18n.t(\"campaigns.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenCampaignModal}\n          >\n            {i18n.t(\"campaigns.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper className={classes.mainPaper} variant=\"outlined\">\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">\n                {i18n.t(\"campaigns.table.name\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"campaigns.table.status\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"campaigns.table.createdAt\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"campaigns.table.progress\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"campaigns.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {queues.map((queue) => (\n                <TableRow key={queue.id}>\n                  <TableCell align=\"center\">{queue.name}</TableCell>\n                  <TableCell align=\"center\">\n                    <div className={classes.customTableCell}>\n                      <span\n                        style={{\n                          backgroundColor: queue.color,\n                          width: 60,\n                          height: 20,\n                          alignSelf: \"center\",\n                        }}\n                      />\n                    </div>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <div className={classes.customTableCell}>\n                      <Typography\n                        style={{ width: 300, align: \"center\" }}\n                        noWrap\n                        variant=\"body2\"\n                      >\n                        {queue.greetingMessage}\n                      </Typography>\n                    </div>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEditQueue(queue)}\n                    >\n                      <Edit />\n                    </IconButton>\n\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => {\n                        setSelectedQueue(queue);\n                        setConfirmModalOpen(true);\n                      }}\n                    >\n                      <DeleteOutline />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {loading && <TableRowSkeleton columns={4} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Queues;\n","import React, { useContext } from \"react\";\nimport { Route as RouterRoute, Redirect } from \"react-router-dom\";\n\nimport { AuthContext } from \"../context/Auth/AuthContext\";\nimport BackdropLoading from \"../components/BackdropLoading\";\n\nconst Route = ({ component: Component, isPrivate = false, ...rest }) => {\n  const { isAuth, loading } = useContext(AuthContext);\n\n  if (!isAuth && isPrivate) {\n    return (\n      <>\n        {loading && <BackdropLoading />}\n        <Redirect to={{ pathname: \"/login\", state: { from: rest.location } }} />\n      </>\n    );\n  }\n\n  if (isAuth && !isPrivate) {\n    return (\n      <>\n        {loading && <BackdropLoading />}\n        <Redirect to={{ pathname: \"/\", state: { from: rest.location } }} />;\n      </>\n    );\n  }\n\n  return (\n    <>\n      {loading && <BackdropLoading />}\n      <RouterRoute {...rest} component={Component} />\n    </>\n  );\n};\n\nexport default Route;\n","import React from \"react\";\r\nimport { BrowserRouter, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport LoggedInLayout from \"../layout\";\r\nimport Dashboard from \"../pages/Dashboard/\";\r\nimport Tickets from \"../pages/Tickets/\";\r\nimport Signup from \"../pages/Signup/\";\r\nimport Login from \"../pages/Login/\";\r\nimport Connections from \"../pages/Connections/\";\r\nimport Settings from \"../pages/Settings/\";\r\nimport Users from \"../pages/Users\";\r\nimport Contacts from \"../pages/Contacts/\";\r\nimport QuickAnswers from \"../pages/QuickAnswers/\";\r\nimport Queues from \"../pages/Queues/\";\r\nimport Campaigns from \"../pages/Campaigns/\"\r\nimport { AuthProvider } from \"../context/Auth/AuthContext\";\r\nimport { WhatsAppsProvider } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport Route from \"./Route\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthProvider>\r\n        <Switch>\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/signup\" component={Signup} />\r\n          <WhatsAppsProvider>\r\n            <LoggedInLayout>\r\n              <Route exact path=\"/\" component={Dashboard} isPrivate />\r\n              <Route\r\n                exact\r\n                path=\"/tickets/:ticketId?\"\r\n                component={Tickets}\r\n                isPrivate\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/connections\"\r\n                component={Connections}\r\n                isPrivate\r\n              />\r\n              <Route exact path=\"/contacts\" component={Contacts} isPrivate />\r\n              <Route exact path=\"/users\" component={Users} isPrivate />\r\n              <Route\r\n                exact\r\n                path=\"/quickAnswers\"\r\n                component={QuickAnswers}\r\n                isPrivate\r\n              />\r\n              <Route exact path=\"/Settings\" component={Settings} isPrivate />\r\n              <Route exact path=\"/Queues\" component={Queues} isPrivate />\r\n              <Route exact path=\"/Campaigns\" component={Campaigns} isPrivate />\r\n            </LoggedInLayout>\r\n          </WhatsAppsProvider>\r\n        </Switch>\r\n        <ToastContainer autoClose={3000} />\r\n      </AuthProvider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useState, useEffect } from \"react\";\nimport Routes from \"./routes\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport { createTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport { ptBR } from \"@material-ui/core/locale\";\n\nconst App = () => {\n  const [locale, setLocale] = useState();\n\n  const theme = createTheme(\n    {\n      scrollbarStyles: {\n        \"&::-webkit-scrollbar\": {\n          width: \"8px\",\n          height: \"8px\",\n        },\n        \"&::-webkit-scrollbar-thumb\": {\n          boxShadow: \"inset 0 0 6px rgba(0, 0, 0, 0.3)\",\n          backgroundColor: \"#e8e8e8\",\n        },\n      },\n      palette: {\n        primary: {\n          // light: will be calculated from palette.primary.main,\n          main: '#128C7E',\n          // dark: will be calculated from palette.primary.main,\n          // contrastText: will be calculated to contrast with palette.primary.main\n          background: {\n            default: \"#23343E\"\n          }\n        },\n        secondary: {\n          light: '#0066ff',\n          main: '#0044ff',\n          // dark: will be calculated from palette.secondary.main,\n          contrastText: '#ffcc00',\n        }\n      },\n    },\n    locale\n  );\n  /*\n  const theme = createTheme(\n    {\n      scrollbarStyles: {\n        \"&::-webkit-scrollbar\": {\n          width: \"8px\",\n          height: \"8px\",\n        },\n        \"&::-webkit-scrollbar-thumb\": {\n          boxShadow: \"inset 0 0 6px rgba(0, 0, 0, 0.3)\",\n          backgroundColor: \"#e8e8e8\",\n        },\n      },\n      palette: {\n        primary: { main: \"#2576d2\" },\n      },\n    },\n    locale\n  );\n  */\n\n  useEffect(() => {\n    const i18nlocale = localStorage.getItem(\"i18nextLng\");\n    const browserLocale =\n      i18nlocale.substring(0, 2) + i18nlocale.substring(3, 5);\n\n    if (browserLocale === \"ptBR\") {\n      setLocale(ptBR);\n    }\n  }, []);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Routes />\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n\t<CssBaseline>\n\t\t<App />\n\t</CssBaseline>,\n\tdocument.getElementById(\"root\")\n);\n\n// ReactDOM.render(\n// \t<React.StrictMode>\n// \t\t<CssBaseline>\n// \t\t\t<App />\n// \t\t</CssBaseline>,\n//   </React.StrictMode>\n\n// \tdocument.getElementById(\"root\")\n// );\n"],"sourceRoot":""}